(function (yi) { typeof define == "function" && define.amd ? define(yi) : yi() })(function () {
  "use strict"; function yi(s, e) { return e.forEach(function (t) { t && typeof t != "string" && !Array.isArray(t) && Object.keys(t).forEach(function (i) { if (i !== "default" && !(i in s)) { var r = Object.getOwnPropertyDescriptor(t, i); Object.defineProperty(s, i, r.get ? r : { enumerable: !0, get: function () { return t[i] } }) } }) }), Object.freeze(s) } function Re(s) { if (s === void 0) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return s } function cn(s, e) { s.prototype = Object.create(e.prototype), s.prototype.constructor = s, s.__proto__ = e }/*!
 * GSAP 3.9.1
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ce = { autoSleep: 120, force3D: "auto", nullTargetWarn: 1, units: { lineHeight: "" } }, xt = { duration: .5, overwrite: !1, delay: 0 }, Zi, pe = 1e8, q = 1 / pe, er = Math.PI * 2, To = er / 4, ko = 0, hn = Math.sqrt, Eo = Math.cos, Po = Math.sin, W = function (e) { return typeof e == "string" }, V = function (e) { return typeof e == "function" }, Le = function (e) { return typeof e == "number" }, tr = function (e) { return typeof e == "undefined" }, Ie = function (e) { return typeof e == "object" }, te = function (e) { return e !== !1 }, un = function () { return typeof window != "undefined" }, vi = function (e) { return V(e) || W(e) }, dn = typeof ArrayBuffer == "function" && ArrayBuffer.isView || function () { }, Y = Array.isArray, ir = /(?:-?\.?\d|\.)+/gi, fn = /[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g, Tt = /[-+=.]*\d+[.e-]*\d*[a-z%]*/g, rr = /[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi, pn = /[+-]=-?[.\d]+/, gn = /[^,'"\[\]\s]+/gi, Co = /[\d.+\-=]+(?:e[-+]\d*)*/i, N, ke, nr, sr, he = {}, wi = {}, mn, _n = function (e) { return (wi = kt(e, he)) && Pe }, or = function (e, t) { return console.warn("Invalid property", e, "set to", t, "Missing plugin? gsap.registerPlugin()") }, bi = function (e, t) { return !t && console.warn(e) }, yn = function (e, t) { return e && (he[e] = t) && wi && (wi[e] = t) || he }, Ht = function () { return 0 }, ar = {}, De = [], lr = {}, vn, ue = {}, cr = {}, wn = 30, Si = [], hr = "", ur = function (e) { var t = e[0], i, r; if (Ie(t) || V(t) || (e = [e]), !(i = (t._gsap || {}).harness)) { for (r = Si.length; r-- && !Si[r].targetTest(t);); i = Si[r] } for (r = e.length; r--;)e[r] && (e[r]._gsap || (e[r]._gsap = new Gn(e[r], i))) || e.splice(r, 1); return e }, rt = function (e) { return e._gsap || ur(_e(e))[0]._gsap }, bn = function (e, t, i) { return (i = e[t]) && V(i) ? e[t]() : tr(i) && e.getAttribute && e.getAttribute(t) || i }, ie = function (e, t) { return (e = e.split(",")).forEach(t) || e }, F = function (e) { return Math.round(e * 1e5) / 1e5 || 0 }, Q = function (e) { return Math.round(e * 1e7) / 1e7 || 0 }, Oo = function (e, t) { for (var i = t.length, r = 0; e.indexOf(t[r]) < 0 && ++r < i;); return r < i }, xi = function () { var e = De.length, t = De.slice(0), i, r; for (lr = {}, De.length = 0, i = 0; i < e; i++)r = t[i], r && r._lazy && (r.render(r._lazy[0], r._lazy[1], !0)._lazy = 0) }, Sn = function (e, t, i, r) { De.length && xi(), e.render(t, i, r), De.length && xi() }, xn = function (e) { var t = parseFloat(e); return (t || t === 0) && (e + "").match(gn).length < 2 ? t : W(e) ? e.trim() : e }, Tn = function (e) { return e }, ge = function (e, t) { for (var i in t) i in e || (e[i] = t[i]); return e }, Ao = function (e) { return function (t, i) { for (var r in i) r in t || r === "duration" && e || r === "ease" || (t[r] = i[r]) } }, kt = function (e, t) { for (var i in t) e[i] = t[i]; return e }, kn = function s(e, t) { for (var i in t) i !== "__proto__" && i !== "constructor" && i !== "prototype" && (e[i] = Ie(t[i]) ? s(e[i] || (e[i] = {}), t[i]) : t[i]); return e }, Ti = function (e, t) { var i = {}, r; for (r in e) r in t || (i[r] = e[r]); return i }, Wt = function (e) { var t = e.parent || N, i = e.keyframes ? Ao(Y(e.keyframes)) : ge; if (te(e.inherit)) for (; t;)i(e, t.vars.defaults), t = t.parent || t._dp; return e }, Ro = function (e, t) { for (var i = e.length, r = i === t.length; r && i-- && e[i] === t[i];); return i < 0 }, Lo = function (e, t, i, r, n) { i === void 0 && (i = "_first"), r === void 0 && (r = "_last"); var o = e[r], a; if (n) for (a = t[n]; o && o[n] > a;)o = o._prev; return o ? (t._next = o._next, o._next = t) : (t._next = e[i], e[i] = t), t._next ? t._next._prev = t : e[r] = t, t._prev = o, t.parent = t._dp = e, t }, ki = function (e, t, i, r) { i === void 0 && (i = "_first"), r === void 0 && (r = "_last"); var n = t._prev, o = t._next; n ? n._next = o : e[i] === t && (e[i] = o), o ? o._prev = n : e[r] === t && (e[r] = n), t._next = t._prev = t.parent = null }, $e = function (e, t) { e.parent && (!t || e.parent.autoRemoveChildren) && e.parent.remove(e), e._act = 0 }, nt = function (e, t) { if (e && (!t || t._end > e._dur || t._start < 0)) for (var i = e; i;)i._dirty = 1, i = i.parent; return e }, Io = function (e) { for (var t = e.parent; t && t.parent;)t._dirty = 1, t.totalDuration(), t = t.parent; return e }, $o = function s(e) { return !e || e._ts && s(e.parent) }, En = function (e) { return e._repeat ? Et(e._tTime, e = e.duration() + e._rDelay) * e : 0 }, Et = function (e, t) { var i = Math.floor(e /= t); return e && i === e ? i - 1 : i }, Ei = function (e, t) { return (e - t._start) * t._ts + (t._ts >= 0 ? 0 : t._dirty ? t.totalDuration() : t._tDur) }, Pi = function (e) { return e._end = Q(e._start + (e._tDur / Math.abs(e._ts || e._rts || q) || 0)) }, Pn = function (e, t) { var i = e._dp; return i && i.smoothChildTiming && e._ts && (e._start = Q(i._time - (e._ts > 0 ? t / e._ts : ((e._dirty ? e.totalDuration() : e._tDur) - t) / -e._ts)), Pi(e), i._dirty || nt(i, e)), e }, Cn = function (e, t) { var i; if ((t._time || t._initted && !t._dur) && (i = Ei(e.rawTime(), t), (!t._dur || Gt(0, t.totalDuration(), i) - t._tTime > q) && t.render(i, !0)), nt(e, t)._dp && e._initted && e._time >= e._dur && e._ts) { if (e._dur < e.duration()) for (i = e; i._dp;)i.rawTime() >= 0 && i.totalTime(i._tTime), i = i._dp; e._zTime = -q } }, Ee = function (e, t, i, r) { return t.parent && $e(t), t._start = Q((Le(i) ? i : i || e !== N ? me(e, i, t) : e._time) + t._delay), t._end = Q(t._start + (t.totalDuration() / Math.abs(t.timeScale()) || 0)), Lo(e, t, "_first", "_last", e._sort ? "_start" : 0), dr(t) || (e._recent = t), r || Cn(e, t), e }, On = function (e, t) { return (he.ScrollTrigger || or("scrollTrigger", t)) && he.ScrollTrigger.create(t, e) }, An = function (e, t, i, r) { if (ra(e, t), !e._initted) return 1; if (!i && e._pt && (e._dur && e.vars.lazy !== !1 || !e._dur && e.vars.lazy) && vn !== ve.frame) return De.push(e), e._lazy = [t, r], 1 }, jo = function s(e) { var t = e.parent; return t && t._ts && t._initted && !t._lock && (t.rawTime() < 0 || s(t)) }, dr = function (e) { var t = e.data; return t === "isFromStart" || t === "isStart" }, Mo = function (e, t, i, r) { var n = e.ratio, o = t < 0 || !t && (!e._start && jo(e) && !(!e._initted && dr(e)) || (e._ts < 0 || e._dp._ts < 0) && !dr(e)) ? 0 : 1, a = e._rDelay, l = 0, c, h, u; if (a && e._repeat && (l = Gt(0, e._tDur, t), h = Et(l, a), e._yoyo && h & 1 && (o = 1 - o), h !== Et(e._tTime, a) && (n = 1 - o, e.vars.repeatRefresh && e._initted && e.invalidate())), o !== n || r || e._zTime === q || !t && e._zTime) { if (!e._initted && An(e, t, r, i)) return; for (u = e._zTime, e._zTime = t || (i ? q : 0), i || (i = t && !u), e.ratio = o, e._from && (o = 1 - o), e._time = 0, e._tTime = l, c = e._pt; c;)c.r(o, c.d), c = c._next; e._startAt && t < 0 && e._startAt.render(t, !0, !0), e._onUpdate && !i && ye(e, "onUpdate"), l && e._repeat && !i && e.parent && ye(e, "onRepeat"), (t >= e._tDur || t < 0) && e.ratio === o && (o && $e(e, 1), i || (ye(e, o ? "onComplete" : "onReverseComplete", !0), e._prom && e._prom())) } else e._zTime || (e._zTime = t) }, Do = function (e, t, i) { var r; if (i > t) for (r = e._first; r && r._start <= i;) { if (r.data === "isPause" && r._start > t) return r; r = r._next } else for (r = e._last; r && r._start >= i;) { if (r.data === "isPause" && r._start < t) return r; r = r._prev } }, Pt = function (e, t, i, r) { var n = e._repeat, o = Q(t) || 0, a = e._tTime / e._tDur; return a && !r && (e._time *= o / e._dur), e._dur = o, e._tDur = n ? n < 0 ? 1e10 : Q(o * (n + 1) + e._rDelay * n) : o, a > 0 && !r ? Pn(e, e._tTime = e._tDur * a) : e.parent && Pi(e), i || nt(e.parent, e), e }, Rn = function (e) { return e instanceof ne ? nt(e) : Pt(e, e._dur) }, qo = { _start: 0, endTime: Ht, totalDuration: Ht }, me = function s(e, t, i) { var r = e.labels, n = e._recent || qo, o = e.duration() >= pe ? n.endTime(!1) : e._dur, a, l, c; return W(t) && (isNaN(t) || t in r) ? (l = t.charAt(0), c = t.substr(-1) === "%", a = t.indexOf("="), l === "<" || l === ">" ? (a >= 0 && (t = t.replace(/=/, "")), (l === "<" ? n._start : n.endTime(n._repeat >= 0)) + (parseFloat(t.substr(1)) || 0) * (c ? (a < 0 ? n : i).totalDuration() / 100 : 1)) : a < 0 ? (t in r || (r[t] = o), r[t]) : (l = parseFloat(t.charAt(a - 1) + t.substr(a + 1)), c && i && (l = l / 100 * (Y(i) ? i[0] : i).totalDuration()), a > 1 ? s(e, t.substr(0, a - 1), i) + l : o + l)) : t == null ? o : +t }, Vt = function (e, t, i) { var r = Le(t[1]), n = (r ? 2 : 1) + (e < 2 ? 0 : 1), o = t[n], a, l; if (r && (o.duration = t[1]), o.parent = i, e) { for (a = o, l = i; l && !("immediateRender" in a);)a = l.vars.defaults || {}, l = te(l.vars.inherit) && l.parent; o.immediateRender = te(a.immediateRender), e < 2 ? o.runBackwards = 1 : o.startAt = t[n - 1] } return new G(t[0], o, t[n + 1]) }, qe = function (e, t) { return e || e === 0 ? t(e) : t }, Gt = function (e, t, i) { return i < e ? e : i > t ? t : i }, re = function (e, t) { return !W(e) || !(t = Co.exec(e)) ? "" : e.substr(t.index + t[0].length) }, Uo = function (e, t, i) { return qe(i, function (r) { return Gt(e, t, r) }) }, fr = [].slice, Ln = function (e, t) { return e && Ie(e) && "length" in e && (!t && !e.length || e.length - 1 in e && Ie(e[0])) && !e.nodeType && e !== ke }, zo = function (e, t, i) { return i === void 0 && (i = []), e.forEach(function (r) { var n; return W(r) && !t || Ln(r, 1) ? (n = i).push.apply(n, _e(r)) : i.push(r) }) || i }, _e = function (e, t, i) { return W(e) && !i && (nr || !Ot()) ? fr.call((t || sr).querySelectorAll(e), 0) : Y(e) ? zo(e, i) : Ln(e) ? fr.call(e, 0) : e ? [e] : [] }, Bo = function (e) { return e = _e(e)[0] || bi("Invalid scope") || {}, function (t) { var i = e.current || e.nativeElement || e; return _e(t, i.querySelectorAll ? i : i === e ? bi("Invalid scope") || sr.createElement("div") : e) } }, In = function (e) { return e.sort(function () { return .5 - Math.random() }) }, $n = function (e) { if (V(e)) return e; var t = Ie(e) ? e : { each: e }, i = st(t.ease), r = t.from || 0, n = parseFloat(t.base) || 0, o = {}, a = r > 0 && r < 1, l = isNaN(r) || a, c = t.axis, h = r, u = r; return W(r) ? h = u = { center: .5, edges: .5, end: 1 }[r] || 0 : !a && l && (h = r[0], u = r[1]), function (d, p, g) { var f = (g || t).length, m = o[f], _, y, v, b, w, S, T, k, x; if (!m) { if (x = t.grid === "auto" ? 0 : (t.grid || [1, pe])[1], !x) { for (T = -pe; T < (T = g[x++].getBoundingClientRect().left) && x < f;); x-- } for (m = o[f] = [], _ = l ? Math.min(x, f) * h - .5 : r % x, y = x === pe ? 0 : l ? f * u / x - .5 : r / x | 0, T = 0, k = pe, S = 0; S < f; S++)v = S % x - _, b = y - (S / x | 0), m[S] = w = c ? Math.abs(c === "y" ? b : v) : hn(v * v + b * b), w > T && (T = w), w < k && (k = w); r === "random" && In(m), m.max = T - k, m.min = k, m.v = f = (parseFloat(t.amount) || parseFloat(t.each) * (x > f ? f - 1 : c ? c === "y" ? f / x : x : Math.max(x, f / x)) || 0) * (r === "edges" ? -1 : 1), m.b = f < 0 ? n - f : n, m.u = re(t.amount || t.each) || 0, i = i && f < 0 ? Hn(i) : i } return f = (m[d] - m.min) / m.max || 0, Q(m.b + (i ? i(f) : f) * m.v) + m.u } }, pr = function (e) { var t = Math.pow(10, ((e + "").split(".")[1] || "").length); return function (i) { var r = Math.round(parseFloat(i) / e) * e * t; return (r - r % 1) / t + (Le(i) ? 0 : re(i)) } }, jn = function (e, t) { var i = Y(e), r, n; return !i && Ie(e) && (r = i = e.radius || pe, e.values ? (e = _e(e.values), (n = !Le(e[0])) && (r *= r)) : e = pr(e.increment)), qe(t, i ? V(e) ? function (o) { return n = e(o), Math.abs(n - o) <= r ? n : o } : function (o) { for (var a = parseFloat(n ? o.x : o), l = parseFloat(n ? o.y : 0), c = pe, h = 0, u = e.length, d, p; u--;)n ? (d = e[u].x - a, p = e[u].y - l, d = d * d + p * p) : d = Math.abs(e[u] - a), d < c && (c = d, h = u); return h = !r || c <= r ? e[h] : o, n || h === o || Le(o) ? h : h + re(o) } : pr(e)) }, Mn = function (e, t, i, r) { return qe(Y(e) ? !t : i === !0 ? !!(i = 0) : !r, function () { return Y(e) ? e[~~(Math.random() * e.length)] : (i = i || 1e-5) && (r = i < 1 ? Math.pow(10, (i + "").length - 2) : 1) && Math.floor(Math.round((e - i / 2 + Math.random() * (t - e + i * .99)) / i) * i * r) / r }) }, No = function () { for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)t[i] = arguments[i]; return function (r) { return t.reduce(function (n, o) { return o(n) }, r) } }, Fo = function (e, t) { return function (i) { return e(parseFloat(i)) + (t || re(i)) } }, Ho = function (e, t, i) { return qn(e, t, 0, 1, i) }, Dn = function (e, t, i) { return qe(i, function (r) { return e[~~t(r)] }) }, Wo = function s(e, t, i) { var r = t - e; return Y(e) ? Dn(e, s(0, e.length), t) : qe(i, function (n) { return (r + (n - e) % r) % r + e }) }, Vo = function s(e, t, i) { var r = t - e, n = r * 2; return Y(e) ? Dn(e, s(0, e.length - 1), t) : qe(i, function (o) { return o = (n + (o - e) % n) % n || 0, e + (o > r ? n - o : o) }) }, Jt = function (e) { for (var t = 0, i = "", r, n, o, a; ~(r = e.indexOf("random(", t));)o = e.indexOf(")", r), a = e.charAt(r + 7) === "[", n = e.substr(r + 7, o - r - 7).match(a ? gn : ir), i += e.substr(t, r - t) + Mn(a ? n : +n[0], a ? 0 : +n[1], +n[2] || 1e-5), t = o + 1; return i + e.substr(t, e.length - t) }, qn = function (e, t, i, r, n) { var o = t - e, a = r - i; return qe(n, function (l) { return i + ((l - e) / o * a || 0) }) }, Go = function s(e, t, i, r) { var n = isNaN(e + t) ? 0 : function (p) { return (1 - p) * e + p * t }; if (!n) { var o = W(e), a = {}, l, c, h, u, d; if (i === !0 && (r = 1) && (i = null), o) e = { p: e }, t = { p: t }; else if (Y(e) && !Y(t)) { for (h = [], u = e.length, d = u - 2, c = 1; c < u; c++)h.push(s(e[c - 1], e[c])); u--, n = function (g) { g *= u; var f = Math.min(d, ~~g); return h[f](g - f) }, i = t } else r || (e = kt(Y(e) ? [] : {}, e)); if (!h) { for (l in t) yr.call(a, e, l, "get", t[l]); n = function (g) { return br(g, a) || (o ? e.p : e) } } } return qe(i, n) }, Un = function (e, t, i) { var r = e.labels, n = pe, o, a, l; for (o in r) a = r[o] - t, a < 0 == !!i && a && n > (a = Math.abs(a)) && (l = o, n = a); return l }, ye = function (e, t, i) { var r = e.vars, n = r[t], o, a; if (!!n) return o = r[t + "Params"], a = r.callbackScope || e, i && De.length && xi(), o ? n.apply(a, o) : n.call(a) }, Kt = function (e) { return $e(e), e.scrollTrigger && e.scrollTrigger.kill(!1), e.progress() < 1 && ye(e, "onInterrupt"), e }, Ct, Jo = function (e) { e = !e.name && e.default || e; var t = e.name, i = V(e), r = t && !i && e.init ? function () { this._props = [] } : e, n = { init: Ht, render: br, add: yr, kill: ha, modifier: ca, rawVars: 0 }, o = { targetTest: 0, get: 0, getSetter: wr, aliases: {}, register: 0 }; if (Ot(), e !== r) { if (ue[t]) return; ge(r, ge(Ti(e, n), o)), kt(r.prototype, kt(n, Ti(e, o))), ue[r.prop = t] = r, e.targetTest && (Si.push(r), ar[t] = 1), t = (t === "css" ? "CSS" : t.charAt(0).toUpperCase() + t.substr(1)) + "Plugin" } yn(t, r), e.register && e.register(Pe, r, se) }, U = 255, Xt = { aqua: [0, U, U], lime: [0, U, 0], silver: [192, 192, 192], black: [0, 0, 0], maroon: [128, 0, 0], teal: [0, 128, 128], blue: [0, 0, U], navy: [0, 0, 128], white: [U, U, U], olive: [128, 128, 0], yellow: [U, U, 0], orange: [U, 165, 0], gray: [128, 128, 128], purple: [128, 0, 128], green: [0, 128, 0], red: [U, 0, 0], pink: [U, 192, 203], cyan: [0, U, U], transparent: [U, U, U, 0] }, gr = function (e, t, i) { return e += e < 0 ? 1 : e > 1 ? -1 : 0, (e * 6 < 1 ? t + (i - t) * e * 6 : e < .5 ? i : e * 3 < 2 ? t + (i - t) * (2 / 3 - e) * 6 : t) * U + .5 | 0 }, zn = function (e, t, i) { var r = e ? Le(e) ? [e >> 16, e >> 8 & U, e & U] : 0 : Xt.black, n, o, a, l, c, h, u, d, p, g; if (!r) { if (e.substr(-1) === "," && (e = e.substr(0, e.length - 1)), Xt[e]) r = Xt[e]; else if (e.charAt(0) === "#") { if (e.length < 6 && (n = e.charAt(1), o = e.charAt(2), a = e.charAt(3), e = "#" + n + n + o + o + a + a + (e.length === 5 ? e.charAt(4) + e.charAt(4) : "")), e.length === 9) return r = parseInt(e.substr(1, 6), 16), [r >> 16, r >> 8 & U, r & U, parseInt(e.substr(7), 16) / 255]; e = parseInt(e.substr(1), 16), r = [e >> 16, e >> 8 & U, e & U] } else if (e.substr(0, 3) === "hsl") { if (r = g = e.match(ir), !t) l = +r[0] % 360 / 360, c = +r[1] / 100, h = +r[2] / 100, o = h <= .5 ? h * (c + 1) : h + c - h * c, n = h * 2 - o, r.length > 3 && (r[3] *= 1), r[0] = gr(l + 1 / 3, n, o), r[1] = gr(l, n, o), r[2] = gr(l - 1 / 3, n, o); else if (~e.indexOf("=")) return r = e.match(fn), i && r.length < 4 && (r[3] = 1), r } else r = e.match(ir) || Xt.transparent; r = r.map(Number) } return t && !g && (n = r[0] / U, o = r[1] / U, a = r[2] / U, u = Math.max(n, o, a), d = Math.min(n, o, a), h = (u + d) / 2, u === d ? l = c = 0 : (p = u - d, c = h > .5 ? p / (2 - u - d) : p / (u + d), l = u === n ? (o - a) / p + (o < a ? 6 : 0) : u === o ? (a - n) / p + 2 : (n - o) / p + 4, l *= 60), r[0] = ~~(l + .5), r[1] = ~~(c * 100 + .5), r[2] = ~~(h * 100 + .5)), i && r.length < 4 && (r[3] = 1), r }, Bn = function (e) { var t = [], i = [], r = -1; return e.split(Ue).forEach(function (n) { var o = n.match(Tt) || []; t.push.apply(t, o), i.push(r += o.length + 1) }), t.c = i, t }, Nn = function (e, t, i) { var r = "", n = (e + r).match(Ue), o = t ? "hsla(" : "rgba(", a = 0, l, c, h, u; if (!n) return e; if (n = n.map(function (d) { return (d = zn(d, t, 1)) && o + (t ? d[0] + "," + d[1] + "%," + d[2] + "%," + d[3] : d.join(",")) + ")" }), i && (h = Bn(e), l = i.c, l.join(r) !== h.c.join(r))) for (c = e.replace(Ue, "1").split(Tt), u = c.length - 1; a < u; a++)r += c[a] + (~l.indexOf(a) ? n.shift() || o + "0,0,0,0)" : (h.length ? h : n.length ? n : i).shift()); if (!c) for (c = e.split(Ue), u = c.length - 1; a < u; a++)r += c[a] + n[a]; return r + c[u] }, Ue = function () { var s = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b", e; for (e in Xt) s += "|" + e + "\\b"; return new RegExp(s + ")", "gi") }(), Ko = /hsl[a]?\(/, Fn = function (e) { var t = e.join(" "), i; if (Ue.lastIndex = 0, Ue.test(t)) return i = Ko.test(t), e[1] = Nn(e[1], i), e[0] = Nn(e[0], i, Bn(e[1])), !0 }, Ci, ve = function () { var s = Date.now, e = 500, t = 33, i = s(), r = i, n = 1e3 / 240, o = n, a = [], l, c, h, u, d, p, g = function f(m) { var _ = s() - r, y = m === !0, v, b, w, S; if (_ > e && (i += _ - t), r += _, w = r - i, v = w - o, (v > 0 || y) && (S = ++u.frame, d = w - u.time * 1e3, u.time = w = w / 1e3, o += v + (v >= n ? 4 : n - v), b = 1), y || (l = c(f)), b) for (p = 0; p < a.length; p++)a[p](w, d, S, m) }; return u = { time: 0, frame: 0, tick: function () { g(!0) }, deltaRatio: function (m) { return d / (1e3 / (m || 60)) }, wake: function () { mn && (!nr && un() && (ke = nr = window, sr = ke.document || {}, he.gsap = Pe, (ke.gsapVersions || (ke.gsapVersions = [])).push(Pe.version), _n(wi || ke.GreenSockGlobals || !ke.gsap && ke || {}), h = ke.requestAnimationFrame), l && u.sleep(), c = h || function (m) { return setTimeout(m, o - u.time * 1e3 + 1 | 0) }, Ci = 1, g(2)) }, sleep: function () { (h ? ke.cancelAnimationFrame : clearTimeout)(l), Ci = 0, c = Ht }, lagSmoothing: function (m, _) { e = m || 1 / q, t = Math.min(_, e, 0) }, fps: function (m) { n = 1e3 / (m || 240), o = u.time * 1e3 + n }, add: function (m) { a.indexOf(m) < 0 && a.push(m), Ot() }, remove: function (m, _) { ~(_ = a.indexOf(m)) && a.splice(_, 1) && p >= _ && p-- }, _listeners: a }, u }(), Ot = function () { return !Ci && ve.wake() }, j = {}, Xo = /^[\d.\-M][\d.\-,\s]/, Yo = /["']/g, Qo = function (e) { for (var t = {}, i = e.substr(1, e.length - 3).split(":"), r = i[0], n = 1, o = i.length, a, l, c; n < o; n++)l = i[n], a = n !== o - 1 ? l.lastIndexOf(",") : l.length, c = l.substr(0, a), t[r] = isNaN(c) ? c.replace(Yo, "").trim() : +c, r = l.substr(a + 1).trim(); return t }, Zo = function (e) { var t = e.indexOf("(") + 1, i = e.indexOf(")"), r = e.indexOf("(", t); return e.substring(t, ~r && r < i ? e.indexOf(")", i + 1) : i) }, ea = function (e) { var t = (e + "").split("("), i = j[t[0]]; return i && t.length > 1 && i.config ? i.config.apply(null, ~e.indexOf("{") ? [Qo(t[1])] : Zo(e).split(",").map(xn)) : j._CE && Xo.test(e) ? j._CE("", e) : i }, Hn = function (e) { return function (t) { return 1 - e(1 - t) } }, Wn = function s(e, t) { for (var i = e._first, r; i;)i instanceof ne ? s(i, t) : i.vars.yoyoEase && (!i._yoyo || !i._repeat) && i._yoyo !== t && (i.timeline ? s(i.timeline, t) : (r = i._ease, i._ease = i._yEase, i._yEase = r, i._yoyo = t)), i = i._next }, st = function (e, t) { return e && (V(e) ? e : j[e] || ea(e)) || t }, ot = function (e, t, i, r) { i === void 0 && (i = function (l) { return 1 - t(1 - l) }), r === void 0 && (r = function (l) { return l < .5 ? t(l * 2) / 2 : 1 - t((1 - l) * 2) / 2 }); var n = { easeIn: t, easeOut: i, easeInOut: r }, o; return ie(e, function (a) { j[a] = he[a] = n, j[o = a.toLowerCase()] = i; for (var l in n) j[o + (l === "easeIn" ? ".in" : l === "easeOut" ? ".out" : ".inOut")] = j[a + "." + l] = n[l] }), n }, Vn = function (e) { return function (t) { return t < .5 ? (1 - e(1 - t * 2)) / 2 : .5 + e((t - .5) * 2) / 2 } }, mr = function s(e, t, i) { var r = t >= 1 ? t : 1, n = (i || (e ? .3 : .45)) / (t < 1 ? t : 1), o = n / er * (Math.asin(1 / r) || 0), a = function (h) { return h === 1 ? 1 : r * Math.pow(2, -10 * h) * Po((h - o) * n) + 1 }, l = e === "out" ? a : e === "in" ? function (c) { return 1 - a(1 - c) } : Vn(a); return n = er / n, l.config = function (c, h) { return s(e, c, h) }, l }, _r = function s(e, t) { t === void 0 && (t = 1.70158); var i = function (o) { return o ? --o * o * ((t + 1) * o + t) + 1 : 0 }, r = e === "out" ? i : e === "in" ? function (n) { return 1 - i(1 - n) } : Vn(i); return r.config = function (n) { return s(e, n) }, r }; ie("Linear,Quad,Cubic,Quart,Quint,Strong", function (s, e) { var t = e < 5 ? e + 1 : e; ot(s + ",Power" + (t - 1), e ? function (i) { return Math.pow(i, t) } : function (i) { return i }, function (i) { return 1 - Math.pow(1 - i, t) }, function (i) { return i < .5 ? Math.pow(i * 2, t) / 2 : 1 - Math.pow((1 - i) * 2, t) / 2 }) }), j.Linear.easeNone = j.none = j.Linear.easeIn, ot("Elastic", mr("in"), mr("out"), mr()), function (s, e) { var t = 1 / e, i = 2 * t, r = 2.5 * t, n = function (a) { return a < t ? s * a * a : a < i ? s * Math.pow(a - 1.5 / e, 2) + .75 : a < r ? s * (a -= 2.25 / e) * a + .9375 : s * Math.pow(a - 2.625 / e, 2) + .984375 }; ot("Bounce", function (o) { return 1 - n(1 - o) }, n) }(7.5625, 2.75), ot("Expo", function (s) { return s ? Math.pow(2, 10 * (s - 1)) : 0 }), ot("Circ", function (s) { return -(hn(1 - s * s) - 1) }), ot("Sine", function (s) { return s === 1 ? 1 : -Eo(s * To) + 1 }), ot("Back", _r("in"), _r("out"), _r()), j.SteppedEase = j.steps = he.SteppedEase = { config: function (e, t) { e === void 0 && (e = 1); var i = 1 / e, r = e + (t ? 0 : 1), n = t ? 1 : 0, o = 1 - q; return function (a) { return ((r * Gt(0, o, a) | 0) + n) * i } } }, xt.ease = j["quad.out"], ie("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt", function (s) { return hr += s + "," + s + "Params," }); var Gn = function (e, t) { this.id = ko++, e._gsap = this, this.target = e, this.harness = t, this.get = t ? t.get : bn, this.set = t ? t.getSetter : wr }, Yt = function () { function s(t) { this.vars = t, this._delay = +t.delay || 0, (this._repeat = t.repeat === 1 / 0 ? -2 : t.repeat || 0) && (this._rDelay = t.repeatDelay || 0, this._yoyo = !!t.yoyo || !!t.yoyoEase), this._ts = 1, Pt(this, +t.duration, 1, 1), this.data = t.data, Ci || ve.wake() } var e = s.prototype; return e.delay = function (i) { return i || i === 0 ? (this.parent && this.parent.smoothChildTiming && this.startTime(this._start + i - this._delay), this._delay = i, this) : this._delay }, e.duration = function (i) { return arguments.length ? this.totalDuration(this._repeat > 0 ? i + (i + this._rDelay) * this._repeat : i) : this.totalDuration() && this._dur }, e.totalDuration = function (i) { return arguments.length ? (this._dirty = 0, Pt(this, this._repeat < 0 ? i : (i - this._repeat * this._rDelay) / (this._repeat + 1))) : this._tDur }, e.totalTime = function (i, r) { if (Ot(), !arguments.length) return this._tTime; var n = this._dp; if (n && n.smoothChildTiming && this._ts) { for (Pn(this, i), !n._dp || n.parent || Cn(n, this); n && n.parent;)n.parent._time !== n._start + (n._ts >= 0 ? n._tTime / n._ts : (n.totalDuration() - n._tTime) / -n._ts) && n.totalTime(n._tTime, !0), n = n.parent; !this.parent && this._dp.autoRemoveChildren && (this._ts > 0 && i < this._tDur || this._ts < 0 && i > 0 || !this._tDur && !i) && Ee(this._dp, this, this._start - this._delay) } return (this._tTime !== i || !this._dur && !r || this._initted && Math.abs(this._zTime) === q || !i && !this._initted && (this.add || this._ptLookup)) && (this._ts || (this._pTime = i), Sn(this, i, r)), this }, e.time = function (i, r) { return arguments.length ? this.totalTime(Math.min(this.totalDuration(), i + En(this)) % (this._dur + this._rDelay) || (i ? this._dur : 0), r) : this._time }, e.totalProgress = function (i, r) { return arguments.length ? this.totalTime(this.totalDuration() * i, r) : this.totalDuration() ? Math.min(1, this._tTime / this._tDur) : this.ratio }, e.progress = function (i, r) { return arguments.length ? this.totalTime(this.duration() * (this._yoyo && !(this.iteration() & 1) ? 1 - i : i) + En(this), r) : this.duration() ? Math.min(1, this._time / this._dur) : this.ratio }, e.iteration = function (i, r) { var n = this.duration() + this._rDelay; return arguments.length ? this.totalTime(this._time + (i - 1) * n, r) : this._repeat ? Et(this._tTime, n) + 1 : 1 }, e.timeScale = function (i) { if (!arguments.length) return this._rts === -q ? 0 : this._rts; if (this._rts === i) return this; var r = this.parent && this._ts ? Ei(this.parent._time, this) : this._tTime; return this._rts = +i || 0, this._ts = this._ps || i === -q ? 0 : this._rts, Io(this.totalTime(Gt(-this._delay, this._tDur, r), !0)), Pi(this), this }, e.paused = function (i) { return arguments.length ? (this._ps !== i && (this._ps = i, i ? (this._pTime = this._tTime || Math.max(-this._delay, this.rawTime()), this._ts = this._act = 0) : (Ot(), this._ts = this._rts, this.totalTime(this.parent && !this.parent.smoothChildTiming ? this.rawTime() : this._tTime || this._pTime, this.progress() === 1 && Math.abs(this._zTime) !== q && (this._tTime -= q)))), this) : this._ps }, e.startTime = function (i) { if (arguments.length) { this._start = i; var r = this.parent || this._dp; return r && (r._sort || !this.parent) && Ee(r, this, i - this._delay), this } return this._start }, e.endTime = function (i) { return this._start + (te(i) ? this.totalDuration() : this.duration()) / Math.abs(this._ts || 1) }, e.rawTime = function (i) { var r = this.parent || this._dp; return r ? i && (!this._ts || this._repeat && this._time && this.totalProgress() < 1) ? this._tTime % (this._dur + this._rDelay) : this._ts ? Ei(r.rawTime(i), this) : this._tTime : this._tTime }, e.globalTime = function (i) { for (var r = this, n = arguments.length ? i : r.rawTime(); r;)n = r._start + n / (r._ts || 1), r = r._dp; return n }, e.repeat = function (i) { return arguments.length ? (this._repeat = i === 1 / 0 ? -2 : i, Rn(this)) : this._repeat === -2 ? 1 / 0 : this._repeat }, e.repeatDelay = function (i) { if (arguments.length) { var r = this._time; return this._rDelay = i, Rn(this), r ? this.time(r) : this } return this._rDelay }, e.yoyo = function (i) { return arguments.length ? (this._yoyo = i, this) : this._yoyo }, e.seek = function (i, r) { return this.totalTime(me(this, i), te(r)) }, e.restart = function (i, r) { return this.play().totalTime(i ? -this._delay : 0, te(r)) }, e.play = function (i, r) { return i != null && this.seek(i, r), this.reversed(!1).paused(!1) }, e.reverse = function (i, r) { return i != null && this.seek(i || this.totalDuration(), r), this.reversed(!0).paused(!1) }, e.pause = function (i, r) { return i != null && this.seek(i, r), this.paused(!0) }, e.resume = function () { return this.paused(!1) }, e.reversed = function (i) { return arguments.length ? (!!i !== this.reversed() && this.timeScale(-this._rts || (i ? -q : 0)), this) : this._rts < 0 }, e.invalidate = function () { return this._initted = this._act = 0, this._zTime = -q, this }, e.isActive = function () { var i = this.parent || this._dp, r = this._start, n; return !!(!i || this._ts && this._initted && i.isActive() && (n = i.rawTime(!0)) >= r && n < this.endTime(!0) - q) }, e.eventCallback = function (i, r, n) { var o = this.vars; return arguments.length > 1 ? (r ? (o[i] = r, n && (o[i + "Params"] = n), i === "onUpdate" && (this._onUpdate = r)) : delete o[i], this) : o[i] }, e.then = function (i) { var r = this; return new Promise(function (n) { var o = V(i) ? i : Tn, a = function () { var c = r.then; r.then = null, V(o) && (o = o(r)) && (o.then || o === r) && (r.then = c), n(o), r.then = c }; r._initted && r.totalProgress() === 1 && r._ts >= 0 || !r._tTime && r._ts < 0 ? a() : r._prom = a }) }, e.kill = function () { Kt(this) }, s }(); ge(Yt.prototype, { _time: 0, _start: 0, _end: 0, _tTime: 0, _tDur: 0, _dirty: 0, _repeat: 0, _yoyo: !1, parent: null, _initted: !1, _rDelay: 0, _ts: 1, _dp: 0, ratio: 0, _zTime: -q, _prom: 0, _ps: !1, _rts: 1 }); var ne = function (s) { cn(e, s); function e(i, r) { var n; return i === void 0 && (i = {}), n = s.call(this, i) || this, n.labels = {}, n.smoothChildTiming = !!i.smoothChildTiming, n.autoRemoveChildren = !!i.autoRemoveChildren, n._sort = te(i.sortChildren), N && Ee(i.parent || N, Re(n), r), i.reversed && n.reverse(), i.paused && n.paused(!0), i.scrollTrigger && On(Re(n), i.scrollTrigger), n } var t = e.prototype; return t.to = function (r, n, o) { return Vt(0, arguments, this), this }, t.from = function (r, n, o) { return Vt(1, arguments, this), this }, t.fromTo = function (r, n, o, a) { return Vt(2, arguments, this), this }, t.set = function (r, n, o) { return n.duration = 0, n.parent = this, Wt(n).repeatDelay || (n.repeat = 0), n.immediateRender = !!n.immediateRender, new G(r, n, me(this, o), 1), this }, t.call = function (r, n, o) { return Ee(this, G.delayedCall(0, r, n), o) }, t.staggerTo = function (r, n, o, a, l, c, h) { return o.duration = n, o.stagger = o.stagger || a, o.onComplete = c, o.onCompleteParams = h, o.parent = this, new G(r, o, me(this, l)), this }, t.staggerFrom = function (r, n, o, a, l, c, h) { return o.runBackwards = 1, Wt(o).immediateRender = te(o.immediateRender), this.staggerTo(r, n, o, a, l, c, h) }, t.staggerFromTo = function (r, n, o, a, l, c, h, u) { return a.startAt = o, Wt(a).immediateRender = te(a.immediateRender), this.staggerTo(r, n, a, l, c, h, u) }, t.render = function (r, n, o) { var a = this._time, l = this._dirty ? this.totalDuration() : this._tDur, c = this._dur, h = r <= 0 ? 0 : Q(r), u = this._zTime < 0 != r < 0 && (this._initted || !c), d, p, g, f, m, _, y, v, b, w, S, T; if (this !== N && h > l && r >= 0 && (h = l), h !== this._tTime || o || u) { if (a !== this._time && c && (h += this._time - a, r += this._time - a), d = h, b = this._start, v = this._ts, _ = !v, u && (c || (a = this._zTime), (r || !n) && (this._zTime = r)), this._repeat) { if (S = this._yoyo, m = c + this._rDelay, this._repeat < -1 && r < 0) return this.totalTime(m * 100 + r, n, o); if (d = Q(h % m), h === l ? (f = this._repeat, d = c) : (f = ~~(h / m), f && f === h / m && (d = c, f--), d > c && (d = c)), w = Et(this._tTime, m), !a && this._tTime && w !== f && (w = f), S && f & 1 && (d = c - d, T = 1), f !== w && !this._lock) { var k = S && w & 1, x = k === (S && f & 1); if (f < w && (k = !k), a = k ? 0 : c, this._lock = 1, this.render(a || (T ? 0 : Q(f * m)), n, !c)._lock = 0, this._tTime = h, !n && this.parent && ye(this, "onRepeat"), this.vars.repeatRefresh && !T && (this.invalidate()._lock = 1), a && a !== this._time || _ !== !this._ts || this.vars.onRepeat && !this.parent && !this._act) return this; if (c = this._dur, l = this._tDur, x && (this._lock = 2, a = k ? c : -1e-4, this.render(a, !0), this.vars.repeatRefresh && !T && this.invalidate()), this._lock = 0, !this._ts && !_) return this; Wn(this, T) } } if (this._hasPause && !this._forcing && this._lock < 2 && (y = Do(this, Q(a), Q(d)), y && (h -= d - (d = y._start))), this._tTime = h, this._time = d, this._act = !v, this._initted || (this._onUpdate = this.vars.onUpdate, this._initted = 1, this._zTime = r, a = 0), !a && d && !n && (ye(this, "onStart"), this._tTime !== h)) return this; if (d >= a && r >= 0) for (p = this._first; p;) { if (g = p._next, (p._act || d >= p._start) && p._ts && y !== p) { if (p.parent !== this) return this.render(r, n, o); if (p.render(p._ts > 0 ? (d - p._start) * p._ts : (p._dirty ? p.totalDuration() : p._tDur) + (d - p._start) * p._ts, n, o), d !== this._time || !this._ts && !_) { y = 0, g && (h += this._zTime = -q); break } } p = g } else { p = this._last; for (var E = r < 0 ? r : d; p;) { if (g = p._prev, (p._act || E <= p._end) && p._ts && y !== p) { if (p.parent !== this) return this.render(r, n, o); if (p.render(p._ts > 0 ? (E - p._start) * p._ts : (p._dirty ? p.totalDuration() : p._tDur) + (E - p._start) * p._ts, n, o), d !== this._time || !this._ts && !_) { y = 0, g && (h += this._zTime = E ? -q : q); break } } p = g } } if (y && !n && (this.pause(), y.render(d >= a ? 0 : -q)._zTime = d >= a ? 1 : -1, this._ts)) return this._start = b, Pi(this), this.render(r, n, o); this._onUpdate && !n && ye(this, "onUpdate", !0), (h === l && l >= this.totalDuration() || !h && a) && (b === this._start || Math.abs(v) !== Math.abs(this._ts)) && (this._lock || ((r || !c) && (h === l && this._ts > 0 || !h && this._ts < 0) && $e(this, 1), !n && !(r < 0 && !a) && (h || a || !l) && (ye(this, h === l && r >= 0 ? "onComplete" : "onReverseComplete", !0), this._prom && !(h < l && this.timeScale() > 0) && this._prom()))) } return this }, t.add = function (r, n) { var o = this; if (Le(n) || (n = me(this, n, r)), !(r instanceof Yt)) { if (Y(r)) return r.forEach(function (a) { return o.add(a, n) }), this; if (W(r)) return this.addLabel(r, n); if (V(r)) r = G.delayedCall(0, r); else return this } return this !== r ? Ee(this, r, n) : this }, t.getChildren = function (r, n, o, a) { r === void 0 && (r = !0), n === void 0 && (n = !0), o === void 0 && (o = !0), a === void 0 && (a = -pe); for (var l = [], c = this._first; c;)c._start >= a && (c instanceof G ? n && l.push(c) : (o && l.push(c), r && l.push.apply(l, c.getChildren(!0, n, o)))), c = c._next; return l }, t.getById = function (r) { for (var n = this.getChildren(1, 1, 1), o = n.length; o--;)if (n[o].vars.id === r) return n[o] }, t.remove = function (r) { return W(r) ? this.removeLabel(r) : V(r) ? this.killTweensOf(r) : (ki(this, r), r === this._recent && (this._recent = this._last), nt(this)) }, t.totalTime = function (r, n) { return arguments.length ? (this._forcing = 1, !this._dp && this._ts && (this._start = Q(ve.time - (this._ts > 0 ? r / this._ts : (this.totalDuration() - r) / -this._ts))), s.prototype.totalTime.call(this, r, n), this._forcing = 0, this) : this._tTime }, t.addLabel = function (r, n) { return this.labels[r] = me(this, n), this }, t.removeLabel = function (r) { return delete this.labels[r], this }, t.addPause = function (r, n, o) { var a = G.delayedCall(0, n || Ht, o); return a.data = "isPause", this._hasPause = 1, Ee(this, a, me(this, r)) }, t.removePause = function (r) { var n = this._first; for (r = me(this, r); n;)n._start === r && n.data === "isPause" && $e(n), n = n._next }, t.killTweensOf = function (r, n, o) { for (var a = this.getTweensOf(r, o), l = a.length; l--;)ze !== a[l] && a[l].kill(r, n); return this }, t.getTweensOf = function (r, n) { for (var o = [], a = _e(r), l = this._first, c = Le(n), h; l;)l instanceof G ? Oo(l._targets, a) && (c ? (!ze || l._initted && l._ts) && l.globalTime(0) <= n && l.globalTime(l.totalDuration()) > n : !n || l.isActive()) && o.push(l) : (h = l.getTweensOf(a, n)).length && o.push.apply(o, h), l = l._next; return o }, t.tweenTo = function (r, n) { n = n || {}; var o = this, a = me(o, r), l = n, c = l.startAt, h = l.onStart, u = l.onStartParams, d = l.immediateRender, p, g = G.to(o, ge({ ease: n.ease || "none", lazy: !1, immediateRender: !1, time: a, overwrite: "auto", duration: n.duration || Math.abs((a - (c && "time" in c ? c.time : o._time)) / o.timeScale()) || q, onStart: function () { if (o.pause(), !p) { var m = n.duration || Math.abs((a - (c && "time" in c ? c.time : o._time)) / o.timeScale()); g._dur !== m && Pt(g, m, 0, 1).render(g._time, !0, !0), p = 1 } h && h.apply(g, u || []) } }, n)); return d ? g.render(0) : g }, t.tweenFromTo = function (r, n, o) { return this.tweenTo(n, ge({ startAt: { time: me(this, r) } }, o)) }, t.recent = function () { return this._recent }, t.nextLabel = function (r) { return r === void 0 && (r = this._time), Un(this, me(this, r)) }, t.previousLabel = function (r) { return r === void 0 && (r = this._time), Un(this, me(this, r), 1) }, t.currentLabel = function (r) { return arguments.length ? this.seek(r, !0) : this.previousLabel(this._time + q) }, t.shiftChildren = function (r, n, o) { o === void 0 && (o = 0); for (var a = this._first, l = this.labels, c; a;)a._start >= o && (a._start += r, a._end += r), a = a._next; if (n) for (c in l) l[c] >= o && (l[c] += r); return nt(this) }, t.invalidate = function () { var r = this._first; for (this._lock = 0; r;)r.invalidate(), r = r._next; return s.prototype.invalidate.call(this) }, t.clear = function (r) { r === void 0 && (r = !0); for (var n = this._first, o; n;)o = n._next, this.remove(n), n = o; return this._dp && (this._time = this._tTime = this._pTime = 0), r && (this.labels = {}), nt(this) }, t.totalDuration = function (r) { var n = 0, o = this, a = o._last, l = pe, c, h, u; if (arguments.length) return o.timeScale((o._repeat < 0 ? o.duration() : o.totalDuration()) / (o.reversed() ? -r : r)); if (o._dirty) { for (u = o.parent; a;)c = a._prev, a._dirty && a.totalDuration(), h = a._start, h > l && o._sort && a._ts && !o._lock ? (o._lock = 1, Ee(o, a, h - a._delay, 1)._lock = 0) : l = h, h < 0 && a._ts && (n -= h, (!u && !o._dp || u && u.smoothChildTiming) && (o._start += h / o._ts, o._time -= h, o._tTime -= h), o.shiftChildren(-h, !1, -1 / 0), l = 0), a._end > n && a._ts && (n = a._end), a = c; Pt(o, o === N && o._time > n ? o._time : n, 1, 1), o._dirty = 0 } return o._tDur }, e.updateRoot = function (r) { if (N._ts && (Sn(N, Ei(r, N)), vn = ve.frame), ve.frame >= wn) { wn += ce.autoSleep || 120; var n = N._first; if ((!n || !n._ts) && ce.autoSleep && ve._listeners.length < 2) { for (; n && !n._ts;)n = n._next; n || ve.sleep() } } }, e }(Yt); ge(ne.prototype, { _lock: 0, _hasPause: 0, _forcing: 0 }); var ta = function (e, t, i, r, n, o, a) { var l = new se(this._pt, e, t, 0, 1, Zn, null, n), c = 0, h = 0, u, d, p, g, f, m, _, y; for (l.b = i, l.e = r, i += "", r += "", (_ = ~r.indexOf("random(")) && (r = Jt(r)), o && (y = [i, r], o(y, e, t), i = y[0], r = y[1]), d = i.match(rr) || []; u = rr.exec(r);)g = u[0], f = r.substring(c, u.index), p ? p = (p + 1) % 5 : f.substr(-5) === "rgba(" && (p = 1), g !== d[h++] && (m = parseFloat(d[h - 1]) || 0, l._pt = { _next: l._pt, p: f || h === 1 ? f : ",", s: m, c: g.charAt(1) === "=" ? parseFloat(g.substr(2)) * (g.charAt(0) === "-" ? -1 : 1) : parseFloat(g) - m, m: p && p < 4 ? Math.round : 0 }, c = rr.lastIndex); return l.c = c < r.length ? r.substring(c, r.length) : "", l.fp = a, (pn.test(r) || _) && (l.e = 0), this._pt = l, l }, yr = function (e, t, i, r, n, o, a, l, c) { V(r) && (r = r(n || 0, e, o)); var h = e[t], u = i !== "get" ? i : V(h) ? c ? e[t.indexOf("set") || !V(e["get" + t.substr(3)]) ? t : "get" + t.substr(3)](c) : e[t]() : h, d = V(h) ? c ? oa : Yn : vr, p; if (W(r) && (~r.indexOf("random(") && (r = Jt(r)), r.charAt(1) === "=" && (p = parseFloat(u) + parseFloat(r.substr(2)) * (r.charAt(0) === "-" ? -1 : 1) + (re(u) || 0), (p || p === 0) && (r = p))), u !== r) return !isNaN(u * r) && r !== "" ? (p = new se(this._pt, e, t, +u || 0, r - (u || 0), typeof h == "boolean" ? la : Qn, 0, d), c && (p.fp = c), a && p.modifier(a, this, e), this._pt = p) : (!h && !(t in e) && or(t, r), ta.call(this, e, t, u, r, d, l || ce.stringFilter, c)) }, ia = function (e, t, i, r, n) { if (V(e) && (e = Qt(e, n, t, i, r)), !Ie(e) || e.style && e.nodeType || Y(e) || dn(e)) return W(e) ? Qt(e, n, t, i, r) : e; var o = {}, a; for (a in e) o[a] = Qt(e[a], n, t, i, r); return o }, Jn = function (e, t, i, r, n, o) { var a, l, c, h; if (ue[e] && (a = new ue[e]).init(n, a.rawVars ? t[e] : ia(t[e], r, n, o, i), i, r, o) !== !1 && (i._pt = l = new se(i._pt, n, e, 0, 1, a.render, a, 0, a.priority), i !== Ct)) for (c = i._ptLookup[i._targets.indexOf(n)], h = a._props.length; h--;)c[a._props[h]] = l; return a }, ze, ra = function s(e, t) { var i = e.vars, r = i.ease, n = i.startAt, o = i.immediateRender, a = i.lazy, l = i.onUpdate, c = i.onUpdateParams, h = i.callbackScope, u = i.runBackwards, d = i.yoyoEase, p = i.keyframes, g = i.autoRevert, f = e._dur, m = e._startAt, _ = e._targets, y = e.parent, v = y && y.data === "nested" ? y.parent._targets : _, b = e._overwrite === "auto" && !Zi, w = e.timeline, S, T, k, x, E, O, P, A, C, R, I, B, Z; if (w && (!p || !r) && (r = "none"), e._ease = st(r, xt.ease), e._yEase = d ? Hn(st(d === !0 ? r : d, xt.ease)) : 0, d && e._yoyo && !e._repeat && (d = e._yEase, e._yEase = e._ease, e._ease = d), e._from = !w && !!i.runBackwards, !w || p && !i.stagger) { if (A = _[0] ? rt(_[0]).harness : 0, B = A && i[A.prop], S = Ti(i, ar), m && $e(m.render(-1, !0)), n) if ($e(e._startAt = G.set(_, ge({ data: "isStart", overwrite: !1, parent: y, immediateRender: !0, lazy: te(a), startAt: null, delay: 0, onUpdate: l, onUpdateParams: c, callbackScope: h, stagger: 0 }, n))), t < 0 && !o && !g && e._startAt.render(-1, !0), o) { if (t > 0 && !g && (e._startAt = 0), f && t <= 0) { t && (e._zTime = t); return } } else g === !1 && (e._startAt = 0); else if (u && f) { if (m) !g && (e._startAt = 0); else if (t && (o = !1), k = ge({ overwrite: !1, data: "isFromStart", lazy: o && te(a), immediateRender: o, stagger: 0, parent: y }, S), B && (k[A.prop] = B), $e(e._startAt = G.set(_, k)), t < 0 && e._startAt.render(-1, !0), e._zTime = t, !o) s(e._startAt, q); else if (!t) return } for (e._pt = 0, a = f && te(a) || a && !f, T = 0; T < _.length; T++) { if (E = _[T], P = E._gsap || ur(_)[T]._gsap, e._ptLookup[T] = R = {}, lr[P.id] && De.length && xi(), I = v === _ ? T : v.indexOf(E), A && (C = new A).init(E, B || S, e, I, v) !== !1 && (e._pt = x = new se(e._pt, E, C.name, 0, 1, C.render, C, 0, C.priority), C._props.forEach(function (D) { R[D] = x }), C.priority && (O = 1)), !A || B) for (k in S) ue[k] && (C = Jn(k, S, e, I, E, v)) ? C.priority && (O = 1) : R[k] = x = yr.call(e, E, k, "get", S[k], I, v, 0, i.stringFilter); e._op && e._op[T] && e.kill(E, e._op[T]), b && e._pt && (ze = e, N.killTweensOf(E, R, e.globalTime(t)), Z = !e.parent, ze = 0), e._pt && a && (lr[P.id] = 1) } O && es(e), e._onInit && e._onInit(e) } e._onUpdate = l, e._initted = (!e._op || e._pt) && !Z, p && t <= 0 && w.render(pe, !0, !0) }, na = function (e, t) { var i = e[0] ? rt(e[0]).harness : 0, r = i && i.aliases, n, o, a, l; if (!r) return t; n = kt({}, t); for (o in r) if (o in n) for (l = r[o].split(","), a = l.length; a--;)n[l[a]] = n[o]; return n }, sa = function (e, t, i, r) { var n = t.ease || r || "power1.inOut", o, a; if (Y(t)) a = i[e] || (i[e] = []), t.forEach(function (l, c) { return a.push({ t: c / (t.length - 1) * 100, v: l, e: n }) }); else for (o in t) a = i[o] || (i[o] = []), o === "ease" || a.push({ t: parseFloat(e), v: t[o], e: n }) }, Qt = function (e, t, i, r, n) { return V(e) ? e.call(t, i, r, n) : W(e) && ~e.indexOf("random(") ? Jt(e) : e }, Kn = hr + "repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase", Xn = {}; ie(Kn + ",id,stagger,delay,duration,paused,scrollTrigger", function (s) { return Xn[s] = 1 }); var G = function (s) { cn(e, s); function e(i, r, n, o) { var a; typeof r == "number" && (n.duration = r, r = n, n = null), a = s.call(this, o ? r : Wt(r)) || this; var l = a.vars, c = l.duration, h = l.delay, u = l.immediateRender, d = l.stagger, p = l.overwrite, g = l.keyframes, f = l.defaults, m = l.scrollTrigger, _ = l.yoyoEase, y = r.parent || N, v = (Y(i) || dn(i) ? Le(i[0]) : "length" in r) ? [i] : _e(i), b, w, S, T, k, x, E, O; if (a._targets = v.length ? ur(v) : bi("GSAP target " + i + " not found. https://greensock.com", !ce.nullTargetWarn) || [], a._ptLookup = [], a._overwrite = p, g || d || vi(c) || vi(h)) { if (r = a.vars, b = a.timeline = new ne({ data: "nested", defaults: f || {} }), b.kill(), b.parent = b._dp = Re(a), b._start = 0, d || vi(c) || vi(h)) { if (T = v.length, E = d && $n(d), Ie(d)) for (k in d) ~Kn.indexOf(k) && (O || (O = {}), O[k] = d[k]); for (w = 0; w < T; w++)S = Ti(r, Xn), S.stagger = 0, _ && (S.yoyoEase = _), O && kt(S, O), x = v[w], S.duration = +Qt(c, Re(a), w, x, v), S.delay = (+Qt(h, Re(a), w, x, v) || 0) - a._delay, !d && T === 1 && S.delay && (a._delay = h = S.delay, a._start += h, S.delay = 0), b.to(x, S, E ? E(w, x, v) : 0), b._ease = j.none; b.duration() ? c = h = 0 : a.timeline = 0 } else if (g) { Wt(ge(b.vars.defaults, { ease: "none" })), b._ease = st(g.ease || r.ease || "none"); var P = 0, A, C, R; if (Y(g)) g.forEach(function (I) { return b.to(v, I, ">") }); else { S = {}; for (k in g) k === "ease" || k === "easeEach" || sa(k, g[k], S, g.easeEach); for (k in S) for (A = S[k].sort(function (I, B) { return I.t - B.t }), P = 0, w = 0; w < A.length; w++)C = A[w], R = { ease: C.e, duration: (C.t - (w ? A[w - 1].t : 0)) / 100 * c }, R[k] = C.v, b.to(v, R, P), P += R.duration; b.duration() < c && b.to({}, { duration: c - b.duration() }) } } c || a.duration(c = b.duration()) } else a.timeline = 0; return p === !0 && !Zi && (ze = Re(a), N.killTweensOf(v), ze = 0), Ee(y, Re(a), n), r.reversed && a.reverse(), r.paused && a.paused(!0), (u || !c && !g && a._start === Q(y._time) && te(u) && $o(Re(a)) && y.data !== "nested") && (a._tTime = -q, a.render(Math.max(0, -h))), m && On(Re(a), m), a } var t = e.prototype; return t.render = function (r, n, o) { var a = this._time, l = this._tDur, c = this._dur, h = r > l - q && r >= 0 ? l : r < q ? 0 : r, u, d, p, g, f, m, _, y, v; if (!c) Mo(this, r, n, o); else if (h !== this._tTime || !r || o || !this._initted && this._tTime || this._startAt && this._zTime < 0 != r < 0) { if (u = h, y = this.timeline, this._repeat) { if (g = c + this._rDelay, this._repeat < -1 && r < 0) return this.totalTime(g * 100 + r, n, o); if (u = Q(h % g), h === l ? (p = this._repeat, u = c) : (p = ~~(h / g), p && p === h / g && (u = c, p--), u > c && (u = c)), m = this._yoyo && p & 1, m && (v = this._yEase, u = c - u), f = Et(this._tTime, g), u === a && !o && this._initted) return this; p !== f && (y && this._yEase && Wn(y, m), this.vars.repeatRefresh && !m && !this._lock && (this._lock = o = 1, this.render(Q(g * p), !0).invalidate()._lock = 0)) } if (!this._initted) { if (An(this, r < 0 ? r : u, o, n)) return this._tTime = 0, this; if (c !== this._dur) return this.render(r, n, o) } if (this._tTime = h, this._time = u, !this._act && this._ts && (this._act = 1, this._lazy = 0), this.ratio = _ = (v || this._ease)(u / c), this._from && (this.ratio = _ = 1 - _), u && !a && !n && (ye(this, "onStart"), this._tTime !== h)) return this; for (d = this._pt; d;)d.r(_, d.d), d = d._next; y && y.render(r < 0 ? r : !u && m ? -q : y._dur * y._ease(u / this._dur), n, o) || this._startAt && (this._zTime = r), this._onUpdate && !n && (r < 0 && this._startAt && this._startAt.render(r, !0, o), ye(this, "onUpdate")), this._repeat && p !== f && this.vars.onRepeat && !n && this.parent && ye(this, "onRepeat"), (h === this._tDur || !h) && this._tTime === h && (r < 0 && this._startAt && !this._onUpdate && this._startAt.render(r, !0, !0), (r || !c) && (h === this._tDur && this._ts > 0 || !h && this._ts < 0) && $e(this, 1), !n && !(r < 0 && !a) && (h || a) && (ye(this, h === l ? "onComplete" : "onReverseComplete", !0), this._prom && !(h < l && this.timeScale() > 0) && this._prom())) } return this }, t.targets = function () { return this._targets }, t.invalidate = function () { return this._pt = this._op = this._startAt = this._onUpdate = this._lazy = this.ratio = 0, this._ptLookup = [], this.timeline && this.timeline.invalidate(), s.prototype.invalidate.call(this) }, t.kill = function (r, n) { if (n === void 0 && (n = "all"), !r && (!n || n === "all")) return this._lazy = this._pt = 0, this.parent ? Kt(this) : this; if (this.timeline) { var o = this.timeline.totalDuration(); return this.timeline.killTweensOf(r, n, ze && ze.vars.overwrite !== !0)._first || Kt(this), this.parent && o !== this.timeline.totalDuration() && Pt(this, this._dur * this.timeline._tDur / o, 0, 1), this } var a = this._targets, l = r ? _e(r) : a, c = this._ptLookup, h = this._pt, u, d, p, g, f, m, _; if ((!n || n === "all") && Ro(a, l)) return n === "all" && (this._pt = 0), Kt(this); for (u = this._op = this._op || [], n !== "all" && (W(n) && (f = {}, ie(n, function (y) { return f[y] = 1 }), n = f), n = na(a, n)), _ = a.length; _--;)if (~l.indexOf(a[_])) { d = c[_], n === "all" ? (u[_] = n, g = d, p = {}) : (p = u[_] = u[_] || {}, g = n); for (f in g) m = d && d[f], m && ((!("kill" in m.d) || m.d.kill(f) === !0) && ki(this, m, "_pt"), delete d[f]), p !== "all" && (p[f] = 1) } return this._initted && !this._pt && h && Kt(this), this }, e.to = function (r, n) { return new e(r, n, arguments[2]) }, e.from = function (r, n) { return Vt(1, arguments) }, e.delayedCall = function (r, n, o, a) { return new e(n, 0, { immediateRender: !1, lazy: !1, overwrite: !1, delay: r, onComplete: n, onReverseComplete: n, onCompleteParams: o, onReverseCompleteParams: o, callbackScope: a }) }, e.fromTo = function (r, n, o) { return Vt(2, arguments) }, e.set = function (r, n) { return n.duration = 0, n.repeatDelay || (n.repeat = 0), new e(r, n) }, e.killTweensOf = function (r, n, o) { return N.killTweensOf(r, n, o) }, e }(Yt); ge(G.prototype, { _targets: [], _lazy: 0, _startAt: 0, _op: 0, _onInit: 0 }), ie("staggerTo,staggerFrom,staggerFromTo", function (s) { G[s] = function () { var e = new ne, t = fr.call(arguments, 0); return t.splice(s === "staggerFromTo" ? 5 : 4, 0, 0), e[s].apply(e, t) } }); var vr = function (e, t, i) { return e[t] = i }, Yn = function (e, t, i) { return e[t](i) }, oa = function (e, t, i, r) { return e[t](r.fp, i) }, aa = function (e, t, i) { return e.setAttribute(t, i) }, wr = function (e, t) { return V(e[t]) ? Yn : tr(e[t]) && e.setAttribute ? aa : vr }, Qn = function (e, t) { return t.set(t.t, t.p, Math.round((t.s + t.c * e) * 1e6) / 1e6, t) }, la = function (e, t) { return t.set(t.t, t.p, !!(t.s + t.c * e), t) }, Zn = function (e, t) { var i = t._pt, r = ""; if (!e && t.b) r = t.b; else if (e === 1 && t.e) r = t.e; else { for (; i;)r = i.p + (i.m ? i.m(i.s + i.c * e) : Math.round((i.s + i.c * e) * 1e4) / 1e4) + r, i = i._next; r += t.c } t.set(t.t, t.p, r, t) }, br = function (e, t) { for (var i = t._pt; i;)i.r(e, i.d), i = i._next }, ca = function (e, t, i, r) { for (var n = this._pt, o; n;)o = n._next, n.p === r && n.modifier(e, t, i), n = o }, ha = function (e) { for (var t = this._pt, i, r; t;)r = t._next, t.p === e && !t.op || t.op === e ? ki(this, t, "_pt") : t.dep || (i = 1), t = r; return !i }, ua = function (e, t, i, r) { r.mSet(e, t, r.m.call(r.tween, i, r.mt), r) }, es = function (e) { for (var t = e._pt, i, r, n, o; t;) { for (i = t._next, r = n; r && r.pr > t.pr;)r = r._next; (t._prev = r ? r._prev : o) ? t._prev._next = t : n = t, (t._next = r) ? r._prev = t : o = t, t = i } e._pt = n }, se = function () { function s(t, i, r, n, o, a, l, c, h) { this.t = i, this.s = n, this.c = o, this.p = r, this.r = a || Qn, this.d = l || this, this.set = c || vr, this.pr = h || 0, this._next = t, t && (t._prev = this) } var e = s.prototype; return e.modifier = function (i, r, n) { this.mSet = this.mSet || this.set, this.set = ua, this.m = i, this.mt = n, this.tween = r }, s }(); ie(hr + "parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger", function (s) { return ar[s] = 1 }), he.TweenMax = he.TweenLite = G, he.TimelineLite = he.TimelineMax = ne, N = new ne({ sortChildren: !1, defaults: xt, autoRemoveChildren: !0, id: "root", smoothChildTiming: !0 }), ce.stringFilter = Fn; var Oi = { registerPlugin: function () { for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)t[i] = arguments[i]; t.forEach(function (r) { return Jo(r) }) }, timeline: function (e) { return new ne(e) }, getTweensOf: function (e, t) { return N.getTweensOf(e, t) }, getProperty: function (e, t, i, r) { W(e) && (e = _e(e)[0]); var n = rt(e || {}).get, o = i ? Tn : xn; return i === "native" && (i = ""), e && (t ? o((ue[t] && ue[t].get || n)(e, t, i, r)) : function (a, l, c) { return o((ue[a] && ue[a].get || n)(e, a, l, c)) }) }, quickSetter: function (e, t, i) { if (e = _e(e), e.length > 1) { var r = e.map(function (h) { return Pe.quickSetter(h, t, i) }), n = r.length; return function (h) { for (var u = n; u--;)r[u](h) } } e = e[0] || {}; var o = ue[t], a = rt(e), l = a.harness && (a.harness.aliases || {})[t] || t, c = o ? function (h) { var u = new o; Ct._pt = 0, u.init(e, i ? h + i : h, Ct, 0, [e]), u.render(1, u), Ct._pt && br(1, Ct) } : a.set(e, l); return o ? c : function (h) { return c(e, l, i ? h + i : h, a, 1) } }, isTweening: function (e) { return N.getTweensOf(e, !0).length > 0 }, defaults: function (e) { return e && e.ease && (e.ease = st(e.ease, xt.ease)), kn(xt, e || {}) }, config: function (e) { return kn(ce, e || {}) }, registerEffect: function (e) { var t = e.name, i = e.effect, r = e.plugins, n = e.defaults, o = e.extendTimeline; (r || "").split(",").forEach(function (a) { return a && !ue[a] && !he[a] && bi(t + " effect requires " + a + " plugin.") }), cr[t] = function (a, l, c) { return i(_e(a), ge(l || {}, n), c) }, o && (ne.prototype[t] = function (a, l, c) { return this.add(cr[t](a, Ie(l) ? l : (c = l) && {}, this), c) }) }, registerEase: function (e, t) { j[e] = st(t) }, parseEase: function (e, t) { return arguments.length ? st(e, t) : j }, getById: function (e) { return N.getById(e) }, exportRoot: function (e, t) { e === void 0 && (e = {}); var i = new ne(e), r, n; for (i.smoothChildTiming = te(e.smoothChildTiming), N.remove(i), i._dp = 0, i._time = i._tTime = N._time, r = N._first; r;)n = r._next, (t || !(!r._dur && r instanceof G && r.vars.onComplete === r._targets[0])) && Ee(i, r, r._start - r._delay), r = n; return Ee(N, i, 0), i }, utils: { wrap: Wo, wrapYoyo: Vo, distribute: $n, random: Mn, snap: jn, normalize: Ho, getUnit: re, clamp: Uo, splitColor: zn, toArray: _e, selector: Bo, mapRange: qn, pipe: No, unitize: Fo, interpolate: Go, shuffle: In }, install: _n, effects: cr, ticker: ve, updateRoot: ne.updateRoot, plugins: ue, globalTimeline: N, core: { PropTween: se, globals: yn, Tween: G, Timeline: ne, Animation: Yt, getCache: rt, _removeLinkedListItem: ki, suppressOverwrites: function (e) { return Zi = e } } }; ie("to,from,fromTo,delayedCall,set,killTweensOf", function (s) { return Oi[s] = G[s] }), ve.add(ne.updateRoot), Ct = Oi.to({}, { duration: 0 }); var da = function (e, t) { for (var i = e._pt; i && i.p !== t && i.op !== t && i.fp !== t;)i = i._next; return i }, fa = function (e, t) { var i = e._targets, r, n, o; for (r in t) for (n = i.length; n--;)o = e._ptLookup[n][r], o && (o = o.d) && (o._pt && (o = da(o, r)), o && o.modifier && o.modifier(t[r], e, i[n], r)) }, Sr = function (e, t) { return { name: e, rawVars: 1, init: function (r, n, o) { o._onInit = function (a) { var l, c; if (W(n) && (l = {}, ie(n, function (h) { return l[h] = 1 }), n = l), t) { l = {}; for (c in n) l[c] = t(n[c]); n = l } fa(a, n) } } } }, Pe = Oi.registerPlugin({ name: "attr", init: function (e, t, i, r, n) { var o, a; for (o in t) a = this.add(e, "setAttribute", (e.getAttribute(o) || 0) + "", t[o], r, n, 0, 0, o), a && (a.op = o), this._props.push(o) } }, { name: "endArray", init: function (e, t) { for (var i = t.length; i--;)this.add(e, i, e[i] || 0, t[i]) } }, Sr("roundProps", pr), Sr("modifiers"), Sr("snap", jn)) || Oi; G.version = ne.version = Pe.version = "3.9.1", mn = 1, un() && Ot(), j.Power0, j.Power1, j.Power2, j.Power3, j.Power4, j.Linear, j.Quad, j.Cubic, j.Quart, j.Quint, j.Strong, j.Elastic, j.Back, j.SteppedEase, j.Bounce, j.Sine, j.Expo, j.Circ;/*!
 * CSSPlugin 3.9.1
 * https://greensock.com
 *
 * Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ts, Be, At, xr, at, is, pa = function () { return typeof window != "undefined" }, Ne = {}, lt = 180 / Math.PI, Rt = Math.PI / 180, Lt = Math.atan2, rs = 1e8, ns = /([A-Z])/g, ga = /(?:left|right|width|margin|padding|x)/i, ma = /[\s,\(]\S/, Fe = { autoAlpha: "opacity,visibility", scale: "scaleX,scaleY", alpha: "opacity" }, ss = function (e, t) { return t.set(t.t, t.p, Math.round((t.s + t.c * e) * 1e4) / 1e4 + t.u, t) }, _a = function (e, t) { return t.set(t.t, t.p, e === 1 ? t.e : Math.round((t.s + t.c * e) * 1e4) / 1e4 + t.u, t) }, ya = function (e, t) { return t.set(t.t, t.p, e ? Math.round((t.s + t.c * e) * 1e4) / 1e4 + t.u : t.b, t) }, va = function (e, t) { var i = t.s + t.c * e; t.set(t.t, t.p, ~~(i + (i < 0 ? -.5 : .5)) + t.u, t) }, os = function (e, t) { return t.set(t.t, t.p, e ? t.e : t.b, t) }, as = function (e, t) { return t.set(t.t, t.p, e !== 1 ? t.b : t.e, t) }, wa = function (e, t, i) { return e.style[t] = i }, ba = function (e, t, i) { return e.style.setProperty(t, i) }, Sa = function (e, t, i) { return e._gsap[t] = i }, xa = function (e, t, i) { return e._gsap.scaleX = e._gsap.scaleY = i }, Ta = function (e, t, i, r, n) { var o = e._gsap; o.scaleX = o.scaleY = i, o.renderTransform(n, o) }, ka = function (e, t, i, r, n) { var o = e._gsap; o[t] = i, o.renderTransform(n, o) }, K = "transform", He = K + "Origin", ls, Tr = function (e, t) { var i = Be.createElementNS ? Be.createElementNS((t || "http://www.w3.org/1999/xhtml").replace(/^https/, "http"), e) : Be.createElement(e); return i.style ? i : Be.createElement(e) }, je = function s(e, t, i) { var r = getComputedStyle(e); return r[t] || r.getPropertyValue(t.replace(ns, "-$1").toLowerCase()) || r.getPropertyValue(t) || !i && s(e, It(t) || t, 1) || "" }, cs = "O,Moz,ms,Ms,Webkit".split(","), It = function (e, t, i) { var r = t || at, n = r.style, o = 5; if (e in n && !i) return e; for (e = e.charAt(0).toUpperCase() + e.substr(1); o-- && !(cs[o] + e in n);); return o < 0 ? null : (o === 3 ? "ms" : o >= 0 ? cs[o] : "") + e }, kr = function () { pa() && window.document && (ts = window, Be = ts.document, At = Be.documentElement, at = Tr("div") || { style: {} }, Tr("div"), K = It(K), He = K + "Origin", at.style.cssText = "border-width:0;line-height:0;position:absolute;padding:0", ls = !!It("perspective"), xr = 1) }, Er = function s(e) { var t = Tr("svg", this.ownerSVGElement && this.ownerSVGElement.getAttribute("xmlns") || "http://www.w3.org/2000/svg"), i = this.parentNode, r = this.nextSibling, n = this.style.cssText, o; if (At.appendChild(t), t.appendChild(this), this.style.display = "block", e) try { o = this.getBBox(), this._gsapBBox = this.getBBox, this.getBBox = s } catch { } else this._gsapBBox && (o = this._gsapBBox()); return i && (r ? i.insertBefore(this, r) : i.appendChild(this)), At.removeChild(t), this.style.cssText = n, o }, hs = function (e, t) { for (var i = t.length; i--;)if (e.hasAttribute(t[i])) return e.getAttribute(t[i]) }, us = function (e) { var t; try { t = e.getBBox() } catch { t = Er.call(e, !0) } return t && (t.width || t.height) || e.getBBox === Er || (t = Er.call(e, !0)), t && !t.width && !t.x && !t.y ? { x: +hs(e, ["x", "cx", "x1"]) || 0, y: +hs(e, ["y", "cy", "y1"]) || 0, width: 0, height: 0 } : t }, ds = function (e) { return !!(e.getCTM && (!e.parentNode || e.ownerSVGElement) && us(e)) }, Zt = function (e, t) { if (t) { var i = e.style; t in Ne && t !== He && (t = K), i.removeProperty ? ((t.substr(0, 2) === "ms" || t.substr(0, 6) === "webkit") && (t = "-" + t), i.removeProperty(t.replace(ns, "-$1").toLowerCase())) : i.removeAttribute(t) } }, We = function (e, t, i, r, n, o) { var a = new se(e._pt, t, i, 0, 1, o ? as : os); return e._pt = a, a.b = r, a.e = n, e._props.push(i), a }, fs = { deg: 1, rad: 1, turn: 1 }, Ve = function s(e, t, i, r) { var n = parseFloat(i) || 0, o = (i + "").trim().substr((n + "").length) || "px", a = at.style, l = ga.test(t), c = e.tagName.toLowerCase() === "svg", h = (c ? "client" : "offset") + (l ? "Width" : "Height"), u = 100, d = r === "px", p = r === "%", g, f, m, _; return r === o || !n || fs[r] || fs[o] ? n : (o !== "px" && !d && (n = s(e, t, i, "px")), _ = e.getCTM && ds(e), (p || o === "%") && (Ne[t] || ~t.indexOf("adius")) ? (g = _ ? e.getBBox()[l ? "width" : "height"] : e[h], F(p ? n / g * u : n / 100 * g)) : (a[l ? "width" : "height"] = u + (d ? o : r), f = ~t.indexOf("adius") || r === "em" && e.appendChild && !c ? e : e.parentNode, _ && (f = (e.ownerSVGElement || {}).parentNode), (!f || f === Be || !f.appendChild) && (f = Be.body), m = f._gsap, m && p && m.width && l && m.time === ve.time ? F(n / m.width * u) : ((p || o === "%") && (a.position = je(e, "position")), f === e && (a.position = "static"), f.appendChild(at), g = at[h], f.removeChild(at), a.position = "absolute", l && p && (m = rt(f), m.time = ve.time, m.width = f[h]), F(d ? g * n / u : g && n ? u / g * n : 0)))) }, ct = function (e, t, i, r) { var n; return xr || kr(), t in Fe && t !== "transform" && (t = Fe[t], ~t.indexOf(",") && (t = t.split(",")[0])), Ne[t] && t !== "transform" ? (n = ti(e, r), n = t !== "transformOrigin" ? n[t] : n.svg ? n.origin : Ri(je(e, He)) + " " + n.zOrigin + "px") : (n = e.style[t], (!n || n === "auto" || r || ~(n + "").indexOf("calc(")) && (n = Ai[t] && Ai[t](e, t, i) || je(e, t) || bn(e, t) || (t === "opacity" ? 1 : 0))), i && !~(n + "").trim().indexOf(" ") ? Ve(e, t, n, i) + i : n }, Ea = function (e, t, i, r) { if (!i || i === "none") { var n = It(t, e, 1), o = n && je(e, n, 1); o && o !== i ? (t = n, i = o) : t === "borderColor" && (i = je(e, "borderTopColor")) } var a = new se(this._pt, e.style, t, 0, 1, Zn), l = 0, c = 0, h, u, d, p, g, f, m, _, y, v, b, w, S; if (a.b = i, a.e = r, i += "", r += "", r === "auto" && (e.style[t] = r, r = je(e, t) || r, e.style[t] = i), h = [i, r], Fn(h), i = h[0], r = h[1], d = i.match(Tt) || [], S = r.match(Tt) || [], S.length) { for (; u = Tt.exec(r);)m = u[0], y = r.substring(l, u.index), g ? g = (g + 1) % 5 : (y.substr(-5) === "rgba(" || y.substr(-5) === "hsla(") && (g = 1), m !== (f = d[c++] || "") && (p = parseFloat(f) || 0, b = f.substr((p + "").length), w = m.charAt(1) === "=" ? +(m.charAt(0) + "1") : 0, w && (m = m.substr(2)), _ = parseFloat(m), v = m.substr((_ + "").length), l = Tt.lastIndex - v.length, v || (v = v || ce.units[t] || b, l === r.length && (r += v, a.e += v)), b !== v && (p = Ve(e, t, f, v) || 0), a._pt = { _next: a._pt, p: y || c === 1 ? y : ",", s: p, c: w ? w * _ : _ - p, m: g && g < 4 || t === "zIndex" ? Math.round : 0 }); a.c = l < r.length ? r.substring(l, r.length) : "" } else a.r = t === "display" && r === "none" ? as : os; return pn.test(r) && (a.e = 0), this._pt = a, a }, ps = { top: "0%", bottom: "100%", left: "0%", right: "100%", center: "50%" }, Pa = function (e) { var t = e.split(" "), i = t[0], r = t[1] || "50%"; return (i === "top" || i === "bottom" || r === "left" || r === "right") && (e = i, i = r, r = e), t[0] = ps[i] || i, t[1] = ps[r] || r, t.join(" ") }, Ca = function (e, t) { if (t.tween && t.tween._time === t.tween._dur) { var i = t.t, r = i.style, n = t.u, o = i._gsap, a, l, c; if (n === "all" || n === !0) r.cssText = "", l = 1; else for (n = n.split(","), c = n.length; --c > -1;)a = n[c], Ne[a] && (l = 1, a = a === "transformOrigin" ? He : K), Zt(i, a); l && (Zt(i, K), o && (o.svg && i.removeAttribute("transform"), ti(i, 1), o.uncache = 1)) } }, Ai = { clearProps: function (e, t, i, r, n) { if (n.data !== "isFromStart") { var o = e._pt = new se(e._pt, t, i, 0, 0, Ca); return o.u = r, o.pr = -10, o.tween = n, e._props.push(i), 1 } } }, ei = [1, 0, 0, 1, 0, 0], gs = {}, ms = function (e) { return e === "matrix(1, 0, 0, 1, 0, 0)" || e === "none" || !e }, _s = function (e) { var t = je(e, K); return ms(t) ? ei : t.substr(7).match(fn).map(F) }, Pr = function (e, t) { var i = e._gsap || rt(e), r = e.style, n = _s(e), o, a, l, c; return i.svg && e.getAttribute("transform") ? (l = e.transform.baseVal.consolidate().matrix, n = [l.a, l.b, l.c, l.d, l.e, l.f], n.join(",") === "1,0,0,1,0,0" ? ei : n) : (n === ei && !e.offsetParent && e !== At && !i.svg && (l = r.display, r.display = "block", o = e.parentNode, (!o || !e.offsetParent) && (c = 1, a = e.nextSibling, At.appendChild(e)), n = _s(e), l ? r.display = l : Zt(e, "display"), c && (a ? o.insertBefore(e, a) : o ? o.appendChild(e) : At.removeChild(e))), t && n.length > 6 ? [n[0], n[1], n[4], n[5], n[12], n[13]] : n) }, Cr = function (e, t, i, r, n, o) { var a = e._gsap, l = n || Pr(e, !0), c = a.xOrigin || 0, h = a.yOrigin || 0, u = a.xOffset || 0, d = a.yOffset || 0, p = l[0], g = l[1], f = l[2], m = l[3], _ = l[4], y = l[5], v = t.split(" "), b = parseFloat(v[0]) || 0, w = parseFloat(v[1]) || 0, S, T, k, x; i ? l !== ei && (T = p * m - g * f) && (k = b * (m / T) + w * (-f / T) + (f * y - m * _) / T, x = b * (-g / T) + w * (p / T) - (p * y - g * _) / T, b = k, w = x) : (S = us(e), b = S.x + (~v[0].indexOf("%") ? b / 100 * S.width : b), w = S.y + (~(v[1] || v[0]).indexOf("%") ? w / 100 * S.height : w)), r || r !== !1 && a.smooth ? (_ = b - c, y = w - h, a.xOffset = u + (_ * p + y * f) - _, a.yOffset = d + (_ * g + y * m) - y) : a.xOffset = a.yOffset = 0, a.xOrigin = b, a.yOrigin = w, a.smooth = !!r, a.origin = t, a.originIsAbsolute = !!i, e.style[He] = "0px 0px", o && (We(o, a, "xOrigin", c, b), We(o, a, "yOrigin", h, w), We(o, a, "xOffset", u, a.xOffset), We(o, a, "yOffset", d, a.yOffset)), e.setAttribute("data-svg-origin", b + " " + w) }, ti = function (e, t) { var i = e._gsap || new Gn(e); if ("x" in i && !t && !i.uncache) return i; var r = e.style, n = i.scaleX < 0, o = "px", a = "deg", l = je(e, He) || "0", c, h, u, d, p, g, f, m, _, y, v, b, w, S, T, k, x, E, O, P, A, C, R, I, B, Z, D, ee, X, _i, H, be; return c = h = u = g = f = m = _ = y = v = 0, d = p = 1, i.svg = !!(e.getCTM && ds(e)), S = Pr(e, i.svg), i.svg && (I = (!i.uncache || l === "0px 0px") && !t && e.getAttribute("data-svg-origin"), Cr(e, I || l, !!I || i.originIsAbsolute, i.smooth !== !1, S)), b = i.xOrigin || 0, w = i.yOrigin || 0, S !== ei && (E = S[0], O = S[1], P = S[2], A = S[3], c = C = S[4], h = R = S[5], S.length === 6 ? (d = Math.sqrt(E * E + O * O), p = Math.sqrt(A * A + P * P), g = E || O ? Lt(O, E) * lt : 0, _ = P || A ? Lt(P, A) * lt + g : 0, _ && (p *= Math.abs(Math.cos(_ * Rt))), i.svg && (c -= b - (b * E + w * P), h -= w - (b * O + w * A))) : (be = S[6], _i = S[7], D = S[8], ee = S[9], X = S[10], H = S[11], c = S[12], h = S[13], u = S[14], T = Lt(be, X), f = T * lt, T && (k = Math.cos(-T), x = Math.sin(-T), I = C * k + D * x, B = R * k + ee * x, Z = be * k + X * x, D = C * -x + D * k, ee = R * -x + ee * k, X = be * -x + X * k, H = _i * -x + H * k, C = I, R = B, be = Z), T = Lt(-P, X), m = T * lt, T && (k = Math.cos(-T), x = Math.sin(-T), I = E * k - D * x, B = O * k - ee * x, Z = P * k - X * x, H = A * x + H * k, E = I, O = B, P = Z), T = Lt(O, E), g = T * lt, T && (k = Math.cos(T), x = Math.sin(T), I = E * k + O * x, B = C * k + R * x, O = O * k - E * x, R = R * k - C * x, E = I, C = B), f && Math.abs(f) + Math.abs(g) > 359.9 && (f = g = 0, m = 180 - m), d = F(Math.sqrt(E * E + O * O + P * P)), p = F(Math.sqrt(R * R + be * be)), T = Lt(C, R), _ = Math.abs(T) > 2e-4 ? T * lt : 0, v = H ? 1 / (H < 0 ? -H : H) : 0), i.svg && (I = e.getAttribute("transform"), i.forceCSS = e.setAttribute("transform", "") || !ms(je(e, K)), I && e.setAttribute("transform", I))), Math.abs(_) > 90 && Math.abs(_) < 270 && (n ? (d *= -1, _ += g <= 0 ? 180 : -180, g += g <= 0 ? 180 : -180) : (p *= -1, _ += _ <= 0 ? 180 : -180)), i.x = c - ((i.xPercent = c && (i.xPercent || (Math.round(e.offsetWidth / 2) === Math.round(-c) ? -50 : 0))) ? e.offsetWidth * i.xPercent / 100 : 0) + o, i.y = h - ((i.yPercent = h && (i.yPercent || (Math.round(e.offsetHeight / 2) === Math.round(-h) ? -50 : 0))) ? e.offsetHeight * i.yPercent / 100 : 0) + o, i.z = u + o, i.scaleX = F(d), i.scaleY = F(p), i.rotation = F(g) + a, i.rotationX = F(f) + a, i.rotationY = F(m) + a, i.skewX = _ + a, i.skewY = y + a, i.transformPerspective = v + o, (i.zOrigin = parseFloat(l.split(" ")[2]) || 0) && (r[He] = Ri(l)), i.xOffset = i.yOffset = 0, i.force3D = ce.force3D, i.renderTransform = i.svg ? Aa : ls ? ys : Oa, i.uncache = 0, i }, Ri = function (e) { return (e = e.split(" "))[0] + " " + e[1] }, Or = function (e, t, i) { var r = re(t); return F(parseFloat(t) + parseFloat(Ve(e, "x", i + "px", r))) + r }, Oa = function (e, t) { t.z = "0px", t.rotationY = t.rotationX = "0deg", t.force3D = 0, ys(e, t) }, ht = "0deg", ii = "0px", ut = ") ", ys = function (e, t) { var i = t || this, r = i.xPercent, n = i.yPercent, o = i.x, a = i.y, l = i.z, c = i.rotation, h = i.rotationY, u = i.rotationX, d = i.skewX, p = i.skewY, g = i.scaleX, f = i.scaleY, m = i.transformPerspective, _ = i.force3D, y = i.target, v = i.zOrigin, b = "", w = _ === "auto" && e && e !== 1 || _ === !0; if (v && (u !== ht || h !== ht)) { var S = parseFloat(h) * Rt, T = Math.sin(S), k = Math.cos(S), x; S = parseFloat(u) * Rt, x = Math.cos(S), o = Or(y, o, T * x * -v), a = Or(y, a, -Math.sin(S) * -v), l = Or(y, l, k * x * -v + v) } m !== ii && (b += "perspective(" + m + ut), (r || n) && (b += "translate(" + r + "%, " + n + "%) "), (w || o !== ii || a !== ii || l !== ii) && (b += l !== ii || w ? "translate3d(" + o + ", " + a + ", " + l + ") " : "translate(" + o + ", " + a + ut), c !== ht && (b += "rotate(" + c + ut), h !== ht && (b += "rotateY(" + h + ut), u !== ht && (b += "rotateX(" + u + ut), (d !== ht || p !== ht) && (b += "skew(" + d + ", " + p + ut), (g !== 1 || f !== 1) && (b += "scale(" + g + ", " + f + ut), y.style[K] = b || "translate(0, 0)" }, Aa = function (e, t) { var i = t || this, r = i.xPercent, n = i.yPercent, o = i.x, a = i.y, l = i.rotation, c = i.skewX, h = i.skewY, u = i.scaleX, d = i.scaleY, p = i.target, g = i.xOrigin, f = i.yOrigin, m = i.xOffset, _ = i.yOffset, y = i.forceCSS, v = parseFloat(o), b = parseFloat(a), w, S, T, k, x; l = parseFloat(l), c = parseFloat(c), h = parseFloat(h), h && (h = parseFloat(h), c += h, l += h), l || c ? (l *= Rt, c *= Rt, w = Math.cos(l) * u, S = Math.sin(l) * u, T = Math.sin(l - c) * -d, k = Math.cos(l - c) * d, c && (h *= Rt, x = Math.tan(c - h), x = Math.sqrt(1 + x * x), T *= x, k *= x, h && (x = Math.tan(h), x = Math.sqrt(1 + x * x), w *= x, S *= x)), w = F(w), S = F(S), T = F(T), k = F(k)) : (w = u, k = d, S = T = 0), (v && !~(o + "").indexOf("px") || b && !~(a + "").indexOf("px")) && (v = Ve(p, "x", o, "px"), b = Ve(p, "y", a, "px")), (g || f || m || _) && (v = F(v + g - (g * w + f * T) + m), b = F(b + f - (g * S + f * k) + _)), (r || n) && (x = p.getBBox(), v = F(v + r / 100 * x.width), b = F(b + n / 100 * x.height)), x = "matrix(" + w + "," + S + "," + T + "," + k + "," + v + "," + b + ")", p.setAttribute("transform", x), y && (p.style[K] = x) }, Ra = function (e, t, i, r, n, o) { var a = 360, l = W(n), c = parseFloat(n) * (l && ~n.indexOf("rad") ? lt : 1), h = o ? c * o : c - r, u = r + h + "deg", d, p; return l && (d = n.split("_")[1], d === "short" && (h %= a, h !== h % (a / 2) && (h += h < 0 ? a : -a)), d === "cw" && h < 0 ? h = (h + a * rs) % a - ~~(h / a) * a : d === "ccw" && h > 0 && (h = (h - a * rs) % a - ~~(h / a) * a)), e._pt = p = new se(e._pt, t, i, r, h, _a), p.e = u, p.u = "deg", e._props.push(i), p }, vs = function (e, t) { for (var i in t) e[i] = t[i]; return e }, La = function (e, t, i) { var r = vs({}, i._gsap), n = "perspective,force3D,transformOrigin,svgOrigin", o = i.style, a, l, c, h, u, d, p, g; r.svg ? (c = i.getAttribute("transform"), i.setAttribute("transform", ""), o[K] = t, a = ti(i, 1), Zt(i, K), i.setAttribute("transform", c)) : (c = getComputedStyle(i)[K], o[K] = t, a = ti(i, 1), o[K] = c); for (l in Ne) c = r[l], h = a[l], c !== h && n.indexOf(l) < 0 && (p = re(c), g = re(h), u = p !== g ? Ve(i, l, c, g) : parseFloat(c), d = parseFloat(h), e._pt = new se(e._pt, a, l, u, d - u, ss), e._pt.u = g || 0, e._props.push(l)); vs(a, r) }; ie("padding,margin,Width,Radius", function (s, e) { var t = "Top", i = "Right", r = "Bottom", n = "Left", o = (e < 3 ? [t, i, r, n] : [t + n, t + i, r + i, r + n]).map(function (a) { return e < 2 ? s + a : "border" + a + s }); Ai[e > 1 ? "border" + s : s] = function (a, l, c, h, u) { var d, p; if (arguments.length < 4) return d = o.map(function (g) { return ct(a, g, c) }), p = d.join(" "), p.split(d[0]).length === 5 ? d[0] : p; d = (h + "").split(" "), p = {}, o.forEach(function (g, f) { return p[g] = d[f] = d[f] || d[(f - 1) / 2 | 0] }), a.init(l, p, u) } }); var ws = { name: "css", register: kr, targetTest: function (e) { return e.style && e.nodeType }, init: function (e, t, i, r, n) { var o = this._props, a = e.style, l = i.vars.startAt, c, h, u, d, p, g, f, m, _, y, v, b, w, S, T; xr || kr(); for (f in t) if (f !== "autoRound" && (h = t[f], !(ue[f] && Jn(f, t, i, r, e, n)))) { if (p = typeof h, g = Ai[f], p === "function" && (h = h.call(i, r, e, n), p = typeof h), p === "string" && ~h.indexOf("random(") && (h = Jt(h)), g) g(this, e, f, h, i) && (T = 1); else if (f.substr(0, 2) === "--") c = (getComputedStyle(e).getPropertyValue(f) + "").trim(), h += "", Ue.lastIndex = 0, Ue.test(c) || (m = re(c), _ = re(h)), _ ? m !== _ && (c = Ve(e, f, c, _) + _) : m && (h += m), this.add(a, "setProperty", c, h, r, n, 0, 0, f), o.push(f); else if (p !== "undefined") { if (l && f in l ? (c = typeof l[f] == "function" ? l[f].call(i, r, e, n) : l[f], W(c) && ~c.indexOf("random(") && (c = Jt(c)), re(c + "") || (c += ce.units[f] || re(ct(e, f)) || ""), (c + "").charAt(1) === "=" && (c = ct(e, f))) : c = ct(e, f), d = parseFloat(c), y = p === "string" && h.charAt(1) === "=" ? +(h.charAt(0) + "1") : 0, y && (h = h.substr(2)), u = parseFloat(h), f in Fe && (f === "autoAlpha" && (d === 1 && ct(e, "visibility") === "hidden" && u && (d = 0), We(this, a, "visibility", d ? "inherit" : "hidden", u ? "inherit" : "hidden", !u)), f !== "scale" && f !== "transform" && (f = Fe[f], ~f.indexOf(",") && (f = f.split(",")[0]))), v = f in Ne, v) { if (b || (w = e._gsap, w.renderTransform && !t.parseTransform || ti(e, t.parseTransform), S = t.smoothOrigin !== !1 && w.smooth, b = this._pt = new se(this._pt, a, K, 0, 1, w.renderTransform, w, 0, -1), b.dep = 1), f === "scale") this._pt = new se(this._pt, w, "scaleY", w.scaleY, (y ? y * u : u - w.scaleY) || 0), o.push("scaleY", f), f += "X"; else if (f === "transformOrigin") { h = Pa(h), w.svg ? Cr(e, h, 0, S, 0, this) : (_ = parseFloat(h.split(" ")[2]) || 0, _ !== w.zOrigin && We(this, w, "zOrigin", w.zOrigin, _), We(this, a, f, Ri(c), Ri(h))); continue } else if (f === "svgOrigin") { Cr(e, h, 1, S, 0, this); continue } else if (f in gs) { Ra(this, w, f, d, h, y); continue } else if (f === "smoothOrigin") { We(this, w, "smooth", w.smooth, h); continue } else if (f === "force3D") { w[f] = h; continue } else if (f === "transform") { La(this, h, e); continue } } else f in a || (f = It(f) || f); if (v || (u || u === 0) && (d || d === 0) && !ma.test(h) && f in a) m = (c + "").substr((d + "").length), u || (u = 0), _ = re(h) || (f in ce.units ? ce.units[f] : m), m !== _ && (d = Ve(e, f, c, _)), this._pt = new se(this._pt, v ? w : a, f, d, y ? y * u : u - d, !v && (_ === "px" || f === "zIndex") && t.autoRound !== !1 ? va : ss), this._pt.u = _ || 0, m !== _ && _ !== "%" && (this._pt.b = c, this._pt.r = ya); else if (f in a) Ea.call(this, e, f, c, h); else if (f in e) this.add(e, f, c || e[f], h, r, n); else { or(f, h); continue } o.push(f) } } T && es(this) }, get: ct, aliases: Fe, getSetter: function (e, t, i) { var r = Fe[t]; return r && r.indexOf(",") < 0 && (t = r), t in Ne && t !== He && (e._gsap.x || ct(e, "x")) ? i && is === i ? t === "scale" ? xa : Sa : (is = i || {}) && (t === "scale" ? Ta : ka) : e.style && !tr(e.style[t]) ? wa : ~t.indexOf("-") ? ba : wr(e, t) }, core: { _removeProperty: Zt, _getMatrix: Pr } }; Pe.utils.checkPrefix = It, function (s, e, t, i) { var r = ie(s + "," + e + "," + t, function (n) { Ne[n] = 1 }); ie(e, function (n) { ce.units[n] = "deg", gs[n] = 1 }), Fe[r[13]] = s + "," + e, ie(i, function (n) { var o = n.split(":"); Fe[o[1]] = r[o[0]] }) }("x,y,z,scale,scaleX,scaleY,xPercent,yPercent", "rotation,rotationX,rotationY,skewX,skewY", "transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective", "0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"), ie("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective", function (s) { ce.units[s] = "px" }), Pe.registerPlugin(ws); var M = Pe.registerPlugin(ws) || Pe; M.core.Tween;/*!
 * paths 3.9.1
 * https://greensock.com
 *
 * Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ia = /[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig, $a = /[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig, ja = Math.PI / 180, Li = Math.sin, Ii = Math.cos, ri = Math.abs, ni = Math.sqrt, Ma = function (e) { return typeof e == "number" }, bs = 1e5, Ge = function (e) { return Math.round(e * bs) / bs || 0 }; function Da(s, e, t, i, r, n, o) { for (var a = s.length, l, c, h, u, d; --a > -1;)for (l = s[a], c = l.length, h = 0; h < c; h += 2)u = l[h], d = l[h + 1], l[h] = u * e + d * i + n, l[h + 1] = u * t + d * r + o; return s._dirty = 1, s } function qa(s, e, t, i, r, n, o, a, l) { if (!(s === a && e === l)) { t = ri(t), i = ri(i); var c = r % 360 * ja, h = Ii(c), u = Li(c), d = Math.PI, p = d * 2, g = (s - a) / 2, f = (e - l) / 2, m = h * g + u * f, _ = -u * g + h * f, y = m * m, v = _ * _, b = y / (t * t) + v / (i * i); b > 1 && (t = ni(b) * t, i = ni(b) * i); var w = t * t, S = i * i, T = (w * S - w * v - S * y) / (w * v + S * y); T < 0 && (T = 0); var k = (n === o ? -1 : 1) * ni(T), x = k * (t * _ / i), E = k * -(i * m / t), O = (s + a) / 2, P = (e + l) / 2, A = O + (h * x - u * E), C = P + (u * x + h * E), R = (m - x) / t, I = (_ - E) / i, B = (-m - x) / t, Z = (-_ - E) / i, D = R * R + I * I, ee = (I < 0 ? -1 : 1) * Math.acos(R / ni(D)), X = (R * Z - I * B < 0 ? -1 : 1) * Math.acos((R * B + I * Z) / ni(D * (B * B + Z * Z))); isNaN(X) && (X = d), !o && X > 0 ? X -= p : o && X < 0 && (X += p), ee %= p, X %= p; var _i = Math.ceil(ri(X) / (p / 4)), H = [], be = X / _i, Qi = 4 / 3 * Li(be / 2) / (1 + Ii(be / 2)), Hh = h * t, Wh = u * t, Vh = u * -i, Gh = h * i, fe; for (fe = 0; fe < _i; fe++)r = ee + fe * be, m = Ii(r), _ = Li(r), R = Ii(r += be), I = Li(r), H.push(m - Qi * _, _ + Qi * m, R + Qi * I, I - Qi * R, R, I); for (fe = 0; fe < H.length; fe += 2)m = H[fe], _ = H[fe + 1], H[fe] = m * Hh + _ * Vh + A, H[fe + 1] = m * Wh + _ * Gh + C; return H[fe - 2] = a, H[fe - 1] = l, H } } function Ua(s) { var e = (s + "").replace($a, function (x) { var E = +x; return E < 1e-4 && E > -1e-4 ? 0 : E }).match(Ia) || [], t = [], i = 0, r = 0, n = 2 / 3, o = e.length, a = 0, l = "ERROR: malformed path: " + s, c, h, u, d, p, g, f, m, _, y, v, b, w, S, T, k = function (E, O, P, A) { y = (P - E) / 3, v = (A - O) / 3, f.push(E + y, O + v, P - y, A - v, P, A) }; if (!s || !isNaN(e[0]) || isNaN(e[1])) return console.log(l), t; for (c = 0; c < o; c++)if (w = p, isNaN(e[c]) ? (p = e[c].toUpperCase(), g = p !== e[c]) : c--, u = +e[c + 1], d = +e[c + 2], g && (u += i, d += r), c || (m = u, _ = d), p === "M") f && (f.length < 8 ? t.length -= 1 : a += f.length), i = m = u, r = _ = d, f = [u, d], t.push(f), c += 2, p = "L"; else if (p === "C") f || (f = [0, 0]), g || (i = r = 0), f.push(u, d, i + e[c + 3] * 1, r + e[c + 4] * 1, i += e[c + 5] * 1, r += e[c + 6] * 1), c += 6; else if (p === "S") y = i, v = r, (w === "C" || w === "S") && (y += i - f[f.length - 4], v += r - f[f.length - 3]), g || (i = r = 0), f.push(y, v, u, d, i += e[c + 3] * 1, r += e[c + 4] * 1), c += 4; else if (p === "Q") y = i + (u - i) * n, v = r + (d - r) * n, g || (i = r = 0), i += e[c + 3] * 1, r += e[c + 4] * 1, f.push(y, v, i + (u - i) * n, r + (d - r) * n, i, r), c += 4; else if (p === "T") y = i - f[f.length - 4], v = r - f[f.length - 3], f.push(i + y, r + v, u + (i + y * 1.5 - u) * n, d + (r + v * 1.5 - d) * n, i = u, r = d), c += 2; else if (p === "H") k(i, r, i = u, r), c += 1; else if (p === "V") k(i, r, i, r = u + (g ? r - i : 0)), c += 1; else if (p === "L" || p === "Z") p === "Z" && (u = m, d = _, f.closed = !0), (p === "L" || ri(i - u) > .5 || ri(r - d) > .5) && (k(i, r, u, d), p === "L" && (c += 2)), i = u, r = d; else if (p === "A") { if (S = e[c + 4], T = e[c + 5], y = e[c + 6], v = e[c + 7], h = 7, S.length > 1 && (S.length < 3 ? (v = y, y = T, h--) : (v = T, y = S.substr(2), h -= 2), T = S.charAt(1), S = S.charAt(0)), b = qa(i, r, +e[c + 1], +e[c + 2], +e[c + 3], +S, +T, (g ? i : 0) + y * 1, (g ? r : 0) + v * 1), c += h, b) for (h = 0; h < b.length; h++)f.push(b[h]); i = f[f.length - 2], r = f[f.length - 1] } else console.log(l); return c = f.length, c < 6 ? (t.pop(), c = 0) : f[0] === f[c - 2] && f[1] === f[c - 1] && (f.closed = !0), t.totalPoints = a + c, t } function za(s) { Ma(s[0]) && (s = [s]); var e = "", t = s.length, i, r, n, o; for (r = 0; r < t; r++) { for (o = s[r], e += "M" + Ge(o[0]) + "," + Ge(o[1]) + " C", i = o.length, n = 2; n < i; n++)e += Ge(o[n++]) + "," + Ge(o[n++]) + " " + Ge(o[n++]) + "," + Ge(o[n++]) + " " + Ge(o[n++]) + "," + Ge(o[n]) + " "; o.closed && (e += "z") } return e }/*!
 * CustomEase 3.9.1
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var oe, Ss, xs = function () { return oe || typeof window != "undefined" && (oe = window.gsap) && oe.registerPlugin && oe }, Ts = function () { oe = xs(), oe ? (oe.registerEase("_CE", dt.create), Ss = 1) : console.warn("Please gsap.registerPlugin(CustomEase)") }, Ba = 1e20, $i = function (e) { return ~~(e * 1e3 + (e < 0 ? -.5 : .5)) / 1e3 }, Na = /[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi, Fa = /[cLlsSaAhHvVtTqQ]/g, Ha = function (e) { var t = e.length, i = Ba, r; for (r = 1; r < t; r += 6)+e[r] < i && (i = +e[r]); return i }, Wa = function (e, t, i) { !i && i !== 0 && (i = Math.max(+e[e.length - 1], +e[1])); var r = +e[0] * -1, n = -i, o = e.length, a = 1 / (+e[o - 2] + r), l = -t || (Math.abs(+e[o - 1] - +e[1]) < .01 * (+e[o - 2] - +e[0]) ? Ha(e) + n : +e[o - 1] + n), c; for (l ? l = 1 / l : l = -a, c = 0; c < o; c += 2)e[c] = (+e[c] + r) * a, e[c + 1] = (+e[c + 1] + n) * l }, Va = function s(e, t, i, r, n, o, a, l, c, h, u) { var d = (e + i) / 2, p = (t + r) / 2, g = (i + n) / 2, f = (r + o) / 2, m = (n + a) / 2, _ = (o + l) / 2, y = (d + g) / 2, v = (p + f) / 2, b = (g + m) / 2, w = (f + _) / 2, S = (y + b) / 2, T = (v + w) / 2, k = a - e, x = l - t, E = Math.abs((i - a) * x - (r - l) * k), O = Math.abs((n - a) * x - (o - l) * k), P; return h || (h = [{ x: e, y: t }, { x: a, y: l }], u = 1), h.splice(u || h.length - 1, 0, { x: S, y: T }), (E + O) * (E + O) > c * (k * k + x * x) && (P = h.length, s(e, t, d, p, y, v, S, T, c, h, u), s(S, T, b, w, m, _, a, l, c, h, u + 1 + (h.length - P))), h }, dt = function () { function s(t, i, r) { Ss || Ts(), this.id = t, this.setData(i, r) } var e = s.prototype; return e.setData = function (i, r) { r = r || {}, i = i || "0,0,1,1"; var n = i.match(Na), o = 1, a = [], l = [], c = r.precision || 1, h = c <= 1, u, d, p, g, f, m, _, y, v; if (this.data = i, (Fa.test(i) || ~i.indexOf("M") && i.indexOf("C") < 0) && (n = Ua(i)[0]), u = n.length, u === 4) n.unshift(0, 0), n.push(1, 1), u = 8; else if ((u - 2) % 6) throw "Invalid CustomEase"; for ((+n[0] != 0 || +n[u - 2] != 1) && Wa(n, r.height, r.originY), this.segment = n, g = 2; g < u; g += 6)d = { x: +n[g - 2], y: +n[g - 1] }, p = { x: +n[g + 4], y: +n[g + 5] }, a.push(d, p), Va(d.x, d.y, +n[g], +n[g + 1], +n[g + 2], +n[g + 3], p.x, p.y, 1 / (c * 2e5), a, a.length - 1); for (u = a.length, g = 0; g < u; g++)_ = a[g], y = a[g - 1] || _, (_.x > y.x || y.y !== _.y && y.x === _.x || _ === y) && _.x <= 1 ? (y.cx = _.x - y.x, y.cy = _.y - y.y, y.n = _, y.nx = _.x, h && g > 1 && Math.abs(y.cy / y.cx - a[g - 2].cy / a[g - 2].cx) > 2 && (h = 0), y.cx < o && (y.cx ? o = y.cx : (y.cx = .001, g === u - 1 && (y.x -= .001, o = Math.min(o, .001), h = 0)))) : (a.splice(g--, 1), u--); if (u = 1 / o + 1 | 0, f = 1 / u, m = 0, _ = a[0], h) { for (g = 0; g < u; g++)v = g * f, _.nx < v && (_ = a[++m]), d = _.y + (v - _.x) / _.cx * _.cy, l[g] = { x: v, cx: f, y: d, cy: 0, nx: 9 }, g && (l[g - 1].cy = d - l[g - 1].y); l[u - 1].cy = a[a.length - 1].y - d } else { for (g = 0; g < u; g++)_.nx < g * f && (_ = a[++m]), l[g] = _; m < a.length - 1 && (l[g - 1] = a[a.length - 2]) } return this.ease = function (b) { var w = l[b * u | 0] || l[u - 1]; return w.nx < b && (w = w.n), w.y + (b - w.x) / w.cx * w.cy }, this.ease.custom = this, this.id && oe && oe.registerEase(this.id, this.ease), this }, e.getSVGData = function (i) { return s.getSVGData(this, i) }, s.create = function (i, r, n) { return new s(i, r, n).ease }, s.register = function (i) { oe = i, Ts() }, s.get = function (i) { return oe.parseEase(i) }, s.getSVGData = function (i, r) { r = r || {}; var n = r.width || 100, o = r.height || 100, a = r.x || 0, l = (r.y || 0) + o, c = oe.utils.toArray(r.path)[0], h, u, d, p, g, f, m, _, y, v; if (r.invert && (o = -o, l = 0), typeof i == "string" && (i = oe.parseEase(i)), i.custom && (i = i.custom), i instanceof s) h = za(Da([i.segment], n, 0, 0, -o, a, l)); else { for (h = [a, l], m = Math.max(5, (r.precision || 1) * 200), p = 1 / m, m += 2, _ = 5 / m, y = $i(a + p * n), v = $i(l + i(p) * -o), u = (v - l) / (y - a), d = 2; d < m; d++)g = $i(a + d * p * n), f = $i(l + i(d * p) * -o), (Math.abs((f - v) / (g - y) - u) > _ || d === m - 1) && (h.push(y, v), u = (f - v) / (g - y)), y = g, v = f; h = "M" + h.join(",") } return c && c.setAttribute("d", h), h }, s }(); xs() && oe.registerPlugin(dt), dt.version = "3.9.1"; let si = null; function Ga() { const s = document.querySelector(".scan"); if (!!s) return si && si.kill(), si = M.timeline({ repeat: -1, repeatDelay: 10, delay: 4 }), si.fromTo(s, { top: "0%" }, { top: "100%", duration: 4, ease: "none" }), si } M.registerPlugin(dt), dt.create("serpeasing", "M0,0 C0.37,0.01 0.01,0.99 1,1"); function Ja() { const s = document.querySelector(".loader"), e = document.querySelector(".loader-wrap"), t = document.querySelector(".scan.is-loader-1"), i = document.querySelector(".progress-amount"), r = document.querySelectorAll(".loader_log"), n = [".loader_logos", ".loader_logs", ".loader_progress"], o = [".logo-2", ".logo-3", ".logo-4", ".logo-5", ".logo-6"]; if (!s) return; const a = 1.5, l = a / o.length, c = a / r.length, h = M.timeline(); return h.set(s, { display: "flex", height: "120svh" }, 0), h.set(n, { display: "block", opacity: 1 }, 0), o.forEach((u, d) => { h.set(u, { display: "block" }, d * l) }), r.forEach((u, d) => { h.set(u, { display: "block" }, d * c) }), h.to(i, { innerText: 100, duration: a, roundProps: "innerText", onUpdate: function () { const u = this.targets()[0].innerText; this.targets()[0].innerText = `[ ${u}% ]` }, ease: "none" }, 0), t && M.to(t, { y: "120svh", duration: 2.2, ease: "serpeasing" }), h.to(e, { height: 0, duration: 1.8, ease: "serpeasing", onComplete: () => { document.body.style.overflow = "", s && s.remove() } }), h } let Je = null, Ar = null; function ks() { if (Ar) return Ar; const s = { snakeHeadImg: null, snakeTailImg: null }, t = getComputedStyle(document.documentElement).getPropertyValue("--base-colors--serp-red").trim(), i = document.querySelector(".snake-head"); if (i) { const n = i.cloneNode(!0); n.removeAttribute("style"), n.setAttribute("width", "100%"), n.setAttribute("height", "100%"), n.setAttribute("viewBox", "0 0 7 7"); const o = n.getElementsByTagName("*"); for (let u of o) u.setAttribute("fill", t); n.setAttribute("fill", t); const a = new XMLSerializer().serializeToString(n), c = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(a)}`, h = new Image; h.src = c, s.snakeHeadImg = h } const r = document.querySelector(".snake-tail"); if (r) { const n = r.cloneNode(!0); n.removeAttribute("style"), n.setAttribute("width", "100%"), n.setAttribute("height", "100%"), n.setAttribute("viewBox", "0 0 7 7"); const o = n.getElementsByTagName("*"); for (let u of o) u.setAttribute("fill", t); n.setAttribute("fill", t); const a = new XMLSerializer().serializeToString(n), c = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(a)}`, h = new Image; h.src = c, s.snakeTailImg = h } return Ar = s, s } class Rr { constructor(e) { if (Je) return console.warn("Game instance already exists, use SnakeGame.initialize() instead"), Je; this.container = e, this.canvas = null, this.ctx = null, this.snake = null, this.direction = null, this.food = null, this.interval = null, this.animationFrameId = null, this.resizeObserver = null, this.resizeTimeout = null, this.score = 0, this.bestScore = this.loadBestScore(), this.directionQueue = []; const t = ks(); this.snakeHeadImg = t.snakeHeadImg, this.snakeTailImg = t.snakeTailImg, this.cellMinSize = 20, this.gridSize = 0, this.cellWidth = 0, this.cellHeight = 0, this.totalRows = 0, this.gameSpeed = this.isMobileOrTablet() ? 170 : 100, this.lostScreen = document.querySelector(".game_lost"), this.restartBtn = document.getElementById("restart"), this.scoreElement = document.getElementById("score"), this.bestScoreElement = document.getElementById("best-score"), this.gameControls = document.querySelector(".game-controls"); const i = getComputedStyle(document.documentElement); this.serpRed = i.getPropertyValue("--base-colors--serp-red").trim(), this.black = i.getPropertyValue("--base-colors--black").trim(), this.initialize(), this.updateScore(), this.updateBestScore() } static initialize() { var i; if (((i = document.querySelector('[data-barba="container"]')) == null ? void 0 : i.dataset.barbaNamespace) !== "home") return null; const t = document.querySelector(".game_inner"); return t ? Je ? (Je.container = t, Je.initialize(), Je) : (Je = new Rr(t), Je) : null } initialize() { const e = this.container.querySelector(".score-display"); e && e.remove(); const t = document.createElement("div"); t.className = "score-display", t.style.position = "absolute", t.style.top = "10px", t.style.right = "10px", t.style.color = "var(--base-colors--serp-red)", t.style.fontFamily = "ABC Monument Grotesk Mono", t.style.fontSize = "0.75rem", t.style.textTransform = "uppercase", t.style.zIndex = "1", this.container.appendChild(t); const i = this.container.querySelector(".game-canvas"); i && i.remove(), this.canvas = document.createElement("canvas"), this.canvas.className = "game-canvas", this.canvas.id = "game-canvas", this.canvas.style.display = "block", this.canvas.style.width = "100%", this.canvas.style.height = "100%", this.container.appendChild(this.canvas), this.ctx = this.canvas.getContext("2d"), this.setupEventListeners(), this.bestScoreElement = document.getElementById("best-score"), this.bestScoreElement && this.updateBestScore(), this.resizeCanvas(), this.startGame() } setupEventListeners() { this.resizeObserver = new ResizeObserver(() => { clearTimeout(this.resizeTimeout), this.resizeTimeout = setTimeout(() => this.resizeCanvas(), 100) }), this.resizeObserver.observe(this.container), window.addEventListener("resize", () => { clearTimeout(this.resizeTimeout), this.resizeTimeout = setTimeout(() => this.resizeCanvas(), 100) }); const e = document.querySelectorAll(".game-controls_arrow"), t = i => { const r = { "is--up": -this.gridSize, "is--down": this.gridSize, "is--left": -1, "is--right": 1 }; for (const n of i.classList) if (r[n] !== void 0) { const o = r[n], a = this.directionQueue.length > 0 ? this.directionQueue[this.directionQueue.length - 1] : this.direction; o !== a && (this.directionQueue.push(o), this.directionQueue.length > 2 && (this.directionQueue = this.directionQueue.slice(-2))); break } }; e.forEach(i => { i.addEventListener("click", () => t(i)) }), this.mobileControls = e, this.handleMobileControl = t, this.isMobileOrTablet() && this.gameControls && (this.gameControls.style.display = "flex"), document.addEventListener("keydown", i => { let r; const n = i.key; switch (["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"].includes(n) && i.preventDefault(), n) { case "ArrowUp": r = -this.gridSize; break; case "ArrowDown": r = this.gridSize; break; case "ArrowLeft": r = -1; break; case "ArrowRight": r = 1; break; default: return }const o = this.directionQueue.length > 0 ? this.directionQueue[this.directionQueue.length - 1] : this.direction; r !== o && (this.directionQueue.push(r), this.directionQueue.length > 2 && (this.directionQueue = this.directionQueue.slice(-2))) }), this.restartBtn && this.restartBtn.addEventListener("click", () => { this.isMobileOrTablet() && (this.restartBtn && (this.restartBtn.style.display = "none"), this.gameControls && (this.gameControls.style.display = "flex")), this.startGame() }) } resizeCanvas() { const e = this.container.getBoundingClientRect(); this.canvas.width = e.width, this.canvas.height = e.height; const t = { cols: Math.floor(e.width / this.cellMinSize) }; t.cellWidth = e.width / t.cols, t.rows = Math.floor(e.height / t.cellWidth), t.cellHeight = e.height / t.rows, t.ratio = Math.abs(t.cellWidth - t.cellHeight); const i = { rows: Math.floor(e.height / this.cellMinSize) }; i.cellHeight = e.height / i.rows, i.cols = Math.floor(e.width / i.cellHeight), i.cellWidth = e.width / i.cols, i.ratio = Math.abs(i.cellWidth - i.cellHeight); const r = t.ratio < i.ratio ? t : i; this.gridSize = r.cols, this.totalRows = r.rows, this.cellWidth = r.cellWidth, this.cellHeight = r.cellHeight; const n = this.isMobileOrTablet() ? 170 : 100; if (this.gameSpeed = n, this.food !== null) { const o = this.food % this.gridSize, a = Math.floor(this.food / this.gridSize); (o < 0 || o >= this.gridSize || a < 0 || a >= this.totalRows) && this.placeFood() } if (this.snake) { clearInterval(this.interval); const a = this.snake.map(l => ({ x: l % this.gridSize, y: Math.floor(l / this.gridSize) })).filter(l => l.y < this.totalRows); a.length < this.snake.length ? this.startGame() : (this.snake = a.map(l => l.y * this.gridSize + l.x), this.draw(), this.interval = setInterval(() => this.move(), this.gameSpeed)) } } startGame() { this.animationFrameId && cancelAnimationFrame(this.animationFrameId), this.interval && clearInterval(this.interval); const e = Math.floor(this.gridSize / 2), i = Math.floor(this.totalRows / 2) * this.gridSize + e; this.snake = [i, i - 1, i - 2], this.direction = 1, this.directionQueue = [], this.score = 0, this.gameSpeed = this.isMobileOrTablet() ? 170 : 100, this.updateScore(), this.updateBestScore(), typeof St == "function" && St(), this.placeFood(), (isNaN(this.food) || this.food < 0 || this.food >= this.gridSize * this.totalRows) && this.placeFood(), this.lostScreen && (this.lostScreen.style.display = "none"), this.draw(), this.interval = setInterval(() => this.move(), this.gameSpeed) } draw() { if (this.ctx.fillStyle = this.black, this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height), this.snake.forEach((e, t) => { const i = e % this.gridSize * this.cellWidth, r = Math.floor(e / this.gridSize) * this.cellHeight; if (t === 0 && this.snakeHeadImg) { this.ctx.save(); const n = i + this.cellWidth / 2, o = r + this.cellHeight / 2; this.ctx.translate(n, o); let a = 0; switch (this.direction) { case 1: a = 90; break; case -1: a = -90; break; case this.gridSize: a = 180; break; case -this.gridSize: a = 0; break }this.ctx.rotate(a * Math.PI / 180); const l = Math.min(this.cellWidth, this.cellHeight), c = this.direction === 1 || this.direction === -1 ? l : this.cellWidth, h = this.direction === 1 || this.direction === -1 ? this.cellHeight : l; this.ctx.drawImage(this.snakeHeadImg, -c / 2, -h / 2, c, h), this.ctx.restore() } else if (t === this.snake.length - 1 && this.snakeTailImg) { this.ctx.save(); let n = 0; if (this.snake.length > 1) { const l = this.snake[this.snake.length - 1], c = this.snake[this.snake.length - 2]; let h = c - l; c % this.gridSize == 0 && l % this.gridSize == this.gridSize - 1 ? h = 1 : c % this.gridSize == this.gridSize - 1 && l % this.gridSize == 0 ? h = -1 : c < this.gridSize && l >= this.gridSize * (this.totalRows - 1) ? h = this.gridSize : c >= this.gridSize * (this.totalRows - 1) && l < this.gridSize && (h = -this.gridSize), h === 1 ? n = 90 : h === -1 ? n = -90 : h === this.gridSize ? n = 180 : h === -this.gridSize && (n = 0) } const o = i + this.cellWidth / 2, a = r + this.cellHeight / 2; this.ctx.translate(o, a), this.ctx.rotate(n * Math.PI / 180), this.ctx.drawImage(this.snakeTailImg, -this.cellWidth / 2, -this.cellHeight / 2, this.cellWidth, this.cellHeight), this.ctx.restore() } else this.ctx.fillStyle = this.serpRed, this.ctx.fillRect(i, r, this.cellWidth, this.cellHeight) }), this.food !== null) { const e = this.food % this.gridSize, t = Math.floor(this.food / this.gridSize), i = e * this.cellWidth, r = t * this.cellHeight; let n = Math.min(this.cellWidth, this.cellHeight) * .8; n < 12 && (n = 12), this.ctx.font = `${n}px "Press Start 2P", Impact, sans-serif`, this.ctx.fillStyle = this.serpRed, this.ctx.textAlign = "center", this.ctx.textBaseline = "middle", e >= 0 && e < this.gridSize && t >= 0 && t < this.totalRows && this.ctx.fillText("$", i + this.cellWidth / 2, r + this.cellHeight / 2) } } move() { if (this.directionQueue.length > 0) { const i = this.directionQueue.shift(); (i === 1 && this.direction !== -1 || i === -1 && this.direction !== 1 || i === this.gridSize && this.direction !== -this.gridSize || i === -this.gridSize && this.direction !== this.gridSize) && (this.direction = i) } let e = this.snake[0], t; if (this.direction === 1 && e % this.gridSize == this.gridSize - 1 ? t = e - (this.gridSize - 1) : this.direction === -1 && e % this.gridSize == 0 ? t = e + (this.gridSize - 1) : this.direction === -this.gridSize && e < this.gridSize ? t = e + this.gridSize * (this.totalRows - 1) : this.direction === this.gridSize && e >= this.gridSize * (this.totalRows - 1) ? t = e - this.gridSize * (this.totalRows - 1) : t = e + this.direction, this.snake.includes(t)) { this.endGame(); return } this.snake.unshift(t), t === this.food ? (this.score++, this.updateScore(), this.placeFood()) : this.snake.pop(), this.draw() } placeFood() { if (this.gridSize <= 0 || this.totalRows <= 0) return; let e, t = 0; const i = 100; do { const r = Math.floor(Math.random() * this.totalRows), n = Math.floor(Math.random() * this.gridSize); if (e = r * this.gridSize + n, t++, t >= i) return } while (this.snake.includes(e)); this.food = e } endGame() { clearInterval(this.interval), cancelAnimationFrame(this.animationFrameId), this.lostScreen && (this.lostScreen.style.display = "flex"), this.isMobileOrTablet() ? (this.gameControls && (this.gameControls.style.display = "none"), this.restartBtn && (this.restartBtn.style.display = "flex")) : (this.gameControls && (this.gameControls.style.display = "none"), this.restartBtn && (this.restartBtn.style.display = "flex")) } updateScore() { this.scoreElement && (this.scoreElement.textContent = this.score), this.score > this.bestScore && (this.bestScore = this.score, this.saveBestScore(this.score), this.updateBestScore()) } updateBestScore() { if (this.bestScoreElement) { this.bestScoreElement.textContent = this.bestScore, M.set(this.bestScoreElement, { display: "inline-block", opacity: 1, visibility: "visible" }); const e = this.bestScoreElement.parentElement; e && M.set(e, { display: "flex", opacity: 1, visibility: "visible" }) } } loadBestScore() { const e = localStorage.getItem("snakeBestScore"); if (!e) return 0; try { const t = parseInt(e); if (!isNaN(t)) return this.saveBestScore(t), t; const { score: i, timestamp: r } = JSON.parse(e); return (Date.now() - r) / (1e3 * 60 * 60) > 24 ? (localStorage.removeItem("snakeBestScore"), 0) : i } catch { return localStorage.removeItem("snakeBestScore"), 0 } } saveBestScore(e) { const t = { score: e, timestamp: Date.now() }; localStorage.setItem("snakeBestScore", JSON.stringify(t)) } isMobileOrTablet() { return window.innerWidth < 992 } cleanup() { this.interval && clearInterval(this.interval), this.animationFrameId && cancelAnimationFrame(this.animationFrameId), this.resizeObserver && this.resizeObserver.disconnect(), this.mobileControls && this.mobileControls.forEach(t => { t.removeEventListener("click", () => this.handleMobileControl(t)) }), window.removeEventListener("resize", () => this.resizeCanvas()); const e = this.container.querySelector(".score-display"); e && e.parentNode && e.remove() } } document.addEventListener("DOMContentLoaded", ks); function Lr() { return Rr.initialize() } const Ka = s => { let e; return s ? e = s : typeof fetch == "undefined" ? e = (...t) => Promise.resolve().then(function () { return jt }).then(({ default: i }) => i(...t)) : e = fetch, (...t) => e(...t) }; class Ir extends Error { constructor(e, t = "FunctionsError", i) { super(e); this.name = t, this.context = i } } class Xa extends Ir { constructor(e) { super("Failed to send a request to the Edge Function", "FunctionsFetchError", e) } } class Ya extends Ir { constructor(e) { super("Relay Error invoking the Edge Function", "FunctionsRelayError", e) } } class Qa extends Ir { constructor(e) { super("Edge Function returned a non-2xx status code", "FunctionsHttpError", e) } } var $r; (function (s) { s.Any = "any", s.ApNortheast1 = "ap-northeast-1", s.ApNortheast2 = "ap-northeast-2", s.ApSouth1 = "ap-south-1", s.ApSoutheast1 = "ap-southeast-1", s.ApSoutheast2 = "ap-southeast-2", s.CaCentral1 = "ca-central-1", s.EuCentral1 = "eu-central-1", s.EuWest1 = "eu-west-1", s.EuWest2 = "eu-west-2", s.EuWest3 = "eu-west-3", s.SaEast1 = "sa-east-1", s.UsEast1 = "us-east-1", s.UsWest1 = "us-west-1", s.UsWest2 = "us-west-2" })($r || ($r = {})); var Za = globalThis && globalThis.__awaiter || function (s, e, t, i) { function r(n) { return n instanceof t ? n : new t(function (o) { o(n) }) } return new (t || (t = Promise))(function (n, o) { function a(h) { try { c(i.next(h)) } catch (u) { o(u) } } function l(h) { try { c(i.throw(h)) } catch (u) { o(u) } } function c(h) { h.done ? n(h.value) : r(h.value).then(a, l) } c((i = i.apply(s, e || [])).next()) }) }; class el { constructor(e, { headers: t = {}, customFetch: i, region: r = $r.Any } = {}) { this.url = e, this.headers = t, this.region = r, this.fetch = Ka(i) } setAuth(e) { this.headers.Authorization = `Bearer ${e}` } invoke(e, t = {}) { var i; return Za(this, void 0, void 0, function* () { try { const { headers: r, method: n, body: o } = t; let a = {}, { region: l } = t; l || (l = this.region), l && l !== "any" && (a["x-region"] = l); let c; o && (r && !Object.prototype.hasOwnProperty.call(r, "Content-Type") || !r) && (typeof Blob != "undefined" && o instanceof Blob || o instanceof ArrayBuffer ? (a["Content-Type"] = "application/octet-stream", c = o) : typeof o == "string" ? (a["Content-Type"] = "text/plain", c = o) : typeof FormData != "undefined" && o instanceof FormData ? c = o : (a["Content-Type"] = "application/json", c = JSON.stringify(o))); const h = yield this.fetch(`${this.url}/${e}`, { method: n || "POST", headers: Object.assign(Object.assign(Object.assign({}, a), this.headers), r), body: c }).catch(g => { throw new Xa(g) }), u = h.headers.get("x-relay-error"); if (u && u === "true") throw new Ya(h); if (!h.ok) throw new Qa(h); let d = ((i = h.headers.get("Content-Type")) !== null && i !== void 0 ? i : "text/plain").split(";")[0].trim(), p; return d === "application/json" ? p = yield h.json() : d === "application/octet-stream" ? p = yield h.blob() : d === "text/event-stream" ? p = h : d === "multipart/form-data" ? p = yield h.formData() : p = yield h.text(), { data: p, error: null } } catch (r) { return { data: null, error: r } } }) } } var we = typeof globalThis != "undefined" ? globalThis : typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : {}; function tl(s) { if (s.__esModule) return s; var e = Object.defineProperty({}, "__esModule", { value: !0 }); return Object.keys(s).forEach(function (t) { var i = Object.getOwnPropertyDescriptor(s, t); Object.defineProperty(e, t, i.get ? i : { enumerable: !0, get: function () { return s[t] } }) }), e } var ae = {}, jr = {}, ji = {}, oi = {}, Mi = {}, Di = {}, il = function () { if (typeof self != "undefined") return self; if (typeof window != "undefined") return window; if (typeof global != "undefined") return global; throw new Error("unable to locate global object") }, $t = il(); const rl = $t.fetch; var Es = $t.fetch.bind($t); const Ps = $t.Headers, nl = $t.Request, sl = $t.Response; var jt = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", fetch: rl, default: Es, Headers: Ps, Request: nl, Response: sl }), ol = tl(jt), qi = {}; Object.defineProperty(qi, "__esModule", { value: !0 }); class al extends Error { constructor(e) { super(e.message); this.name = "PostgrestError", this.details = e.details, this.hint = e.hint, this.code = e.code } } qi.default = al; var Cs = we && we.__importDefault || function (s) { return s && s.__esModule ? s : { default: s } }; Object.defineProperty(Di, "__esModule", { value: !0 }); const ll = Cs(ol), cl = Cs(qi); class hl { constructor(e) { this.shouldThrowOnError = !1, this.method = e.method, this.url = e.url, this.headers = e.headers, this.schema = e.schema, this.body = e.body, this.shouldThrowOnError = e.shouldThrowOnError, this.signal = e.signal, this.isMaybeSingle = e.isMaybeSingle, e.fetch ? this.fetch = e.fetch : typeof fetch == "undefined" ? this.fetch = ll.default : this.fetch = fetch } throwOnError() { return this.shouldThrowOnError = !0, this } setHeader(e, t) { return this.headers = Object.assign({}, this.headers), this.headers[e] = t, this } then(e, t) { this.schema === void 0 || (["GET", "HEAD"].includes(this.method) ? this.headers["Accept-Profile"] = this.schema : this.headers["Content-Profile"] = this.schema), this.method !== "GET" && this.method !== "HEAD" && (this.headers["Content-Type"] = "application/json"); let r = this.fetch(this.url.toString(), { method: this.method, headers: this.headers, body: JSON.stringify(this.body), signal: this.signal }).then(async n => { var o, a, l; let c = null, h = null, u = null, d = n.status, p = n.statusText; if (n.ok) { if (this.method !== "HEAD") { const _ = await n.text(); _ === "" || (this.headers.Accept === "text/csv" || this.headers.Accept && this.headers.Accept.includes("application/vnd.pgrst.plan+text") ? h = _ : h = JSON.parse(_)) } const f = (o = this.headers.Prefer) === null || o === void 0 ? void 0 : o.match(/count=(exact|planned|estimated)/), m = (a = n.headers.get("content-range")) === null || a === void 0 ? void 0 : a.split("/"); f && m && m.length > 1 && (u = parseInt(m[1])), this.isMaybeSingle && this.method === "GET" && Array.isArray(h) && (h.length > 1 ? (c = { code: "PGRST116", details: `Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`, hint: null, message: "JSON object requested, multiple (or no) rows returned" }, h = null, u = null, d = 406, p = "Not Acceptable") : h.length === 1 ? h = h[0] : h = null) } else { const f = await n.text(); try { c = JSON.parse(f), Array.isArray(c) && n.status === 404 && (h = [], c = null, d = 200, p = "OK") } catch { n.status === 404 && f === "" ? (d = 204, p = "No Content") : c = { message: f } } if (c && this.isMaybeSingle && ((l = c == null ? void 0 : c.details) === null || l === void 0 ? void 0 : l.includes("0 rows")) && (c = null, d = 200, p = "OK"), c && this.shouldThrowOnError) throw new cl.default(c) } return { error: c, data: h, count: u, status: d, statusText: p } }); return this.shouldThrowOnError || (r = r.catch(n => { var o, a, l; return { error: { message: `${(o = n == null ? void 0 : n.name) !== null && o !== void 0 ? o : "FetchError"}: ${n == null ? void 0 : n.message}`, details: `${(a = n == null ? void 0 : n.stack) !== null && a !== void 0 ? a : ""}`, hint: "", code: `${(l = n == null ? void 0 : n.code) !== null && l !== void 0 ? l : ""}` }, data: null, count: null, status: 0, statusText: "" } })), r.then(e, t) } returns() { return this } overrideTypes() { return this } } Di.default = hl; var ul = we && we.__importDefault || function (s) { return s && s.__esModule ? s : { default: s } }; Object.defineProperty(Mi, "__esModule", { value: !0 }); const dl = ul(Di); class fl extends dl.default { select(e) { let t = !1; const i = (e != null ? e : "*").split("").map(r => /\s/.test(r) && !t ? "" : (r === '"' && (t = !t), r)).join(""); return this.url.searchParams.set("select", i), this.headers.Prefer && (this.headers.Prefer += ","), this.headers.Prefer += "return=representation", this } order(e, { ascending: t = !0, nullsFirst: i, foreignTable: r, referencedTable: n = r } = {}) { const o = n ? `${n}.order` : "order", a = this.url.searchParams.get(o); return this.url.searchParams.set(o, `${a ? `${a},` : ""}${e}.${t ? "asc" : "desc"}${i === void 0 ? "" : i ? ".nullsfirst" : ".nullslast"}`), this } limit(e, { foreignTable: t, referencedTable: i = t } = {}) { const r = typeof i == "undefined" ? "limit" : `${i}.limit`; return this.url.searchParams.set(r, `${e}`), this } range(e, t, { foreignTable: i, referencedTable: r = i } = {}) { const n = typeof r == "undefined" ? "offset" : `${r}.offset`, o = typeof r == "undefined" ? "limit" : `${r}.limit`; return this.url.searchParams.set(n, `${e}`), this.url.searchParams.set(o, `${t - e + 1}`), this } abortSignal(e) { return this.signal = e, this } single() { return this.headers.Accept = "application/vnd.pgrst.object+json", this } maybeSingle() { return this.method === "GET" ? this.headers.Accept = "application/json" : this.headers.Accept = "application/vnd.pgrst.object+json", this.isMaybeSingle = !0, this } csv() { return this.headers.Accept = "text/csv", this } geojson() { return this.headers.Accept = "application/geo+json", this } explain({ analyze: e = !1, verbose: t = !1, settings: i = !1, buffers: r = !1, wal: n = !1, format: o = "text" } = {}) { var a; const l = [e ? "analyze" : null, t ? "verbose" : null, i ? "settings" : null, r ? "buffers" : null, n ? "wal" : null].filter(Boolean).join("|"), c = (a = this.headers.Accept) !== null && a !== void 0 ? a : "application/json"; return this.headers.Accept = `application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`, o === "json" ? this : this } rollback() { var e; return ((e = this.headers.Prefer) !== null && e !== void 0 ? e : "").trim().length > 0 ? this.headers.Prefer += ",tx=rollback" : this.headers.Prefer = "tx=rollback", this } returns() { return this } } Mi.default = fl; var pl = we && we.__importDefault || function (s) { return s && s.__esModule ? s : { default: s } }; Object.defineProperty(oi, "__esModule", { value: !0 }); const gl = pl(Mi); class ml extends gl.default { eq(e, t) { return this.url.searchParams.append(e, `eq.${t}`), this } neq(e, t) { return this.url.searchParams.append(e, `neq.${t}`), this } gt(e, t) { return this.url.searchParams.append(e, `gt.${t}`), this } gte(e, t) { return this.url.searchParams.append(e, `gte.${t}`), this } lt(e, t) { return this.url.searchParams.append(e, `lt.${t}`), this } lte(e, t) { return this.url.searchParams.append(e, `lte.${t}`), this } like(e, t) { return this.url.searchParams.append(e, `like.${t}`), this } likeAllOf(e, t) { return this.url.searchParams.append(e, `like(all).{${t.join(",")}}`), this } likeAnyOf(e, t) { return this.url.searchParams.append(e, `like(any).{${t.join(",")}}`), this } ilike(e, t) { return this.url.searchParams.append(e, `ilike.${t}`), this } ilikeAllOf(e, t) { return this.url.searchParams.append(e, `ilike(all).{${t.join(",")}}`), this } ilikeAnyOf(e, t) { return this.url.searchParams.append(e, `ilike(any).{${t.join(",")}}`), this } is(e, t) { return this.url.searchParams.append(e, `is.${t}`), this } in(e, t) { const i = Array.from(new Set(t)).map(r => typeof r == "string" && new RegExp("[,()]").test(r) ? `"${r}"` : `${r}`).join(","); return this.url.searchParams.append(e, `in.(${i})`), this } contains(e, t) { return typeof t == "string" ? this.url.searchParams.append(e, `cs.${t}`) : Array.isArray(t) ? this.url.searchParams.append(e, `cs.{${t.join(",")}}`) : this.url.searchParams.append(e, `cs.${JSON.stringify(t)}`), this } containedBy(e, t) { return typeof t == "string" ? this.url.searchParams.append(e, `cd.${t}`) : Array.isArray(t) ? this.url.searchParams.append(e, `cd.{${t.join(",")}}`) : this.url.searchParams.append(e, `cd.${JSON.stringify(t)}`), this } rangeGt(e, t) { return this.url.searchParams.append(e, `sr.${t}`), this } rangeGte(e, t) { return this.url.searchParams.append(e, `nxl.${t}`), this } rangeLt(e, t) { return this.url.searchParams.append(e, `sl.${t}`), this } rangeLte(e, t) { return this.url.searchParams.append(e, `nxr.${t}`), this } rangeAdjacent(e, t) { return this.url.searchParams.append(e, `adj.${t}`), this } overlaps(e, t) { return typeof t == "string" ? this.url.searchParams.append(e, `ov.${t}`) : this.url.searchParams.append(e, `ov.{${t.join(",")}}`), this } textSearch(e, t, { config: i, type: r } = {}) { let n = ""; r === "plain" ? n = "pl" : r === "phrase" ? n = "ph" : r === "websearch" && (n = "w"); const o = i === void 0 ? "" : `(${i})`; return this.url.searchParams.append(e, `${n}fts${o}.${t}`), this } match(e) { return Object.entries(e).forEach(([t, i]) => { this.url.searchParams.append(t, `eq.${i}`) }), this } not(e, t, i) { return this.url.searchParams.append(e, `not.${t}.${i}`), this } or(e, { foreignTable: t, referencedTable: i = t } = {}) { const r = i ? `${i}.or` : "or"; return this.url.searchParams.append(r, `(${e})`), this } filter(e, t, i) { return this.url.searchParams.append(e, `${t}.${i}`), this } } oi.default = ml; var _l = we && we.__importDefault || function (s) { return s && s.__esModule ? s : { default: s } }; Object.defineProperty(ji, "__esModule", { value: !0 }); const ai = _l(oi); class yl { constructor(e, { headers: t = {}, schema: i, fetch: r }) { this.url = e, this.headers = t, this.schema = i, this.fetch = r } select(e, { head: t = !1, count: i } = {}) { const r = t ? "HEAD" : "GET"; let n = !1; const o = (e != null ? e : "*").split("").map(a => /\s/.test(a) && !n ? "" : (a === '"' && (n = !n), a)).join(""); return this.url.searchParams.set("select", o), i && (this.headers.Prefer = `count=${i}`), new ai.default({ method: r, url: this.url, headers: this.headers, schema: this.schema, fetch: this.fetch, allowEmpty: !1 }) } insert(e, { count: t, defaultToNull: i = !0 } = {}) { const r = "POST", n = []; if (this.headers.Prefer && n.push(this.headers.Prefer), t && n.push(`count=${t}`), i || n.push("missing=default"), this.headers.Prefer = n.join(","), Array.isArray(e)) { const o = e.reduce((a, l) => a.concat(Object.keys(l)), []); if (o.length > 0) { const a = [...new Set(o)].map(l => `"${l}"`); this.url.searchParams.set("columns", a.join(",")) } } return new ai.default({ method: r, url: this.url, headers: this.headers, schema: this.schema, body: e, fetch: this.fetch, allowEmpty: !1 }) } upsert(e, { onConflict: t, ignoreDuplicates: i = !1, count: r, defaultToNull: n = !0 } = {}) { const o = "POST", a = [`resolution=${i ? "ignore" : "merge"}-duplicates`]; if (t !== void 0 && this.url.searchParams.set("on_conflict", t), this.headers.Prefer && a.push(this.headers.Prefer), r && a.push(`count=${r}`), n || a.push("missing=default"), this.headers.Prefer = a.join(","), Array.isArray(e)) { const l = e.reduce((c, h) => c.concat(Object.keys(h)), []); if (l.length > 0) { const c = [...new Set(l)].map(h => `"${h}"`); this.url.searchParams.set("columns", c.join(",")) } } return new ai.default({ method: o, url: this.url, headers: this.headers, schema: this.schema, body: e, fetch: this.fetch, allowEmpty: !1 }) } update(e, { count: t } = {}) { const i = "PATCH", r = []; return this.headers.Prefer && r.push(this.headers.Prefer), t && r.push(`count=${t}`), this.headers.Prefer = r.join(","), new ai.default({ method: i, url: this.url, headers: this.headers, schema: this.schema, body: e, fetch: this.fetch, allowEmpty: !1 }) } delete({ count: e } = {}) { const t = "DELETE", i = []; return e && i.push(`count=${e}`), this.headers.Prefer && i.unshift(this.headers.Prefer), this.headers.Prefer = i.join(","), new ai.default({ method: t, url: this.url, headers: this.headers, schema: this.schema, fetch: this.fetch, allowEmpty: !1 }) } } ji.default = yl; var Ui = {}, zi = {}; Object.defineProperty(zi, "__esModule", { value: !0 }), zi.version = void 0, zi.version = "0.0.0-automated", Object.defineProperty(Ui, "__esModule", { value: !0 }), Ui.DEFAULT_HEADERS = void 0; const vl = zi; Ui.DEFAULT_HEADERS = { "X-Client-Info": `postgrest-js/${vl.version}` }; var Os = we && we.__importDefault || function (s) { return s && s.__esModule ? s : { default: s } }; Object.defineProperty(jr, "__esModule", { value: !0 }); const wl = Os(ji), bl = Os(oi), Sl = Ui; class Mr { constructor(e, { headers: t = {}, schema: i, fetch: r } = {}) { this.url = e, this.headers = Object.assign(Object.assign({}, Sl.DEFAULT_HEADERS), t), this.schemaName = i, this.fetch = r } from(e) { const t = new URL(`${this.url}/${e}`); return new wl.default(t, { headers: Object.assign({}, this.headers), schema: this.schemaName, fetch: this.fetch }) } schema(e) { return new Mr(this.url, { headers: this.headers, schema: e, fetch: this.fetch }) } rpc(e, t = {}, { head: i = !1, get: r = !1, count: n } = {}) { let o; const a = new URL(`${this.url}/rpc/${e}`); let l; i || r ? (o = i ? "HEAD" : "GET", Object.entries(t).filter(([h, u]) => u !== void 0).map(([h, u]) => [h, Array.isArray(u) ? `{${u.join(",")}}` : `${u}`]).forEach(([h, u]) => { a.searchParams.append(h, u) })) : (o = "POST", l = t); const c = Object.assign({}, this.headers); return n && (c.Prefer = `count=${n}`), new bl.default({ method: o, url: a, headers: c, schema: this.schemaName, body: l, fetch: this.fetch, allowEmpty: !1 }) } } jr.default = Mr; var Mt = we && we.__importDefault || function (s) { return s && s.__esModule ? s : { default: s } }; Object.defineProperty(ae, "__esModule", { value: !0 }), ae.PostgrestError = ae.PostgrestBuilder = ae.PostgrestTransformBuilder = ae.PostgrestFilterBuilder = ae.PostgrestQueryBuilder = ae.PostgrestClient = void 0; const As = Mt(jr); ae.PostgrestClient = As.default; const Rs = Mt(ji); ae.PostgrestQueryBuilder = Rs.default; const Ls = Mt(oi); ae.PostgrestFilterBuilder = Ls.default; const Is = Mt(Mi); ae.PostgrestTransformBuilder = Is.default; const $s = Mt(Di); ae.PostgrestBuilder = $s.default; const js = Mt(qi); ae.PostgrestError = js.default; var xl = ae.default = { PostgrestClient: As.default, PostgrestQueryBuilder: Rs.default, PostgrestFilterBuilder: Ls.default, PostgrestTransformBuilder: Is.default, PostgrestBuilder: $s.default, PostgrestError: js.default }; const { PostgrestClient: Tl, PostgrestQueryBuilder: Jh, PostgrestFilterBuilder: Kh, PostgrestTransformBuilder: Xh, PostgrestBuilder: Yh, PostgrestError: Qh } = xl, kl = { "X-Client-Info": "realtime-js/2.11.2" }, El = "1.0.0", Ms = 1e4, Pl = 1e3; var Dt; (function (s) { s[s.connecting = 0] = "connecting", s[s.open = 1] = "open", s[s.closing = 2] = "closing", s[s.closed = 3] = "closed" })(Dt || (Dt = {})); var de; (function (s) { s.closed = "closed", s.errored = "errored", s.joined = "joined", s.joining = "joining", s.leaving = "leaving" })(de || (de = {})); var Se; (function (s) { s.close = "phx_close", s.error = "phx_error", s.join = "phx_join", s.reply = "phx_reply", s.leave = "phx_leave", s.access_token = "access_token" })(Se || (Se = {})); var Dr; (function (s) { s.websocket = "websocket" })(Dr || (Dr = {})); var ft; (function (s) { s.Connecting = "connecting", s.Open = "open", s.Closing = "closing", s.Closed = "closed" })(ft || (ft = {})); class Cl { constructor() { this.HEADER_LENGTH = 1 } decode(e, t) { return e.constructor === ArrayBuffer ? t(this._binaryDecode(e)) : t(typeof e == "string" ? JSON.parse(e) : {}) } _binaryDecode(e) { const t = new DataView(e), i = new TextDecoder; return this._decodeBroadcast(e, t, i) } _decodeBroadcast(e, t, i) { const r = t.getUint8(1), n = t.getUint8(2); let o = this.HEADER_LENGTH + 2; const a = i.decode(e.slice(o, o + r)); o = o + r; const l = i.decode(e.slice(o, o + n)); o = o + n; const c = JSON.parse(i.decode(e.slice(o, e.byteLength))); return { ref: null, topic: a, event: l, payload: c } } } class Ds { constructor(e, t) { this.callback = e, this.timerCalc = t, this.timer = void 0, this.tries = 0, this.callback = e, this.timerCalc = t } reset() { this.tries = 0, clearTimeout(this.timer) } scheduleTimeout() { clearTimeout(this.timer), this.timer = setTimeout(() => { this.tries = this.tries + 1, this.callback() }, this.timerCalc(this.tries + 1)) } } var z; (function (s) { s.abstime = "abstime", s.bool = "bool", s.date = "date", s.daterange = "daterange", s.float4 = "float4", s.float8 = "float8", s.int2 = "int2", s.int4 = "int4", s.int4range = "int4range", s.int8 = "int8", s.int8range = "int8range", s.json = "json", s.jsonb = "jsonb", s.money = "money", s.numeric = "numeric", s.oid = "oid", s.reltime = "reltime", s.text = "text", s.time = "time", s.timestamp = "timestamp", s.timestamptz = "timestamptz", s.timetz = "timetz", s.tsrange = "tsrange", s.tstzrange = "tstzrange" })(z || (z = {})); const qs = (s, e, t = {}) => { var i; const r = (i = t.skipTypes) !== null && i !== void 0 ? i : []; return Object.keys(e).reduce((n, o) => (n[o] = Ol(o, s, e, r), n), {}) }, Ol = (s, e, t, i) => { const r = e.find(a => a.name === s), n = r == null ? void 0 : r.type, o = t[s]; return n && !i.includes(n) ? Us(n, o) : qr(o) }, Us = (s, e) => { if (s.charAt(0) === "_") { const t = s.slice(1, s.length); return Il(e, t) } switch (s) { case z.bool: return Al(e); case z.float4: case z.float8: case z.int2: case z.int4: case z.int8: case z.numeric: case z.oid: return Rl(e); case z.json: case z.jsonb: return Ll(e); case z.timestamp: return $l(e); case z.abstime: case z.date: case z.daterange: case z.int4range: case z.int8range: case z.money: case z.reltime: case z.text: case z.time: case z.timestamptz: case z.timetz: case z.tsrange: case z.tstzrange: return qr(e); default: return qr(e) } }, qr = s => s, Al = s => { switch (s) { case "t": return !0; case "f": return !1; default: return s } }, Rl = s => { if (typeof s == "string") { const e = parseFloat(s); if (!Number.isNaN(e)) return e } return s }, Ll = s => { if (typeof s == "string") try { return JSON.parse(s) } catch (e) { return console.log(`JSON parse error: ${e}`), s } return s }, Il = (s, e) => { if (typeof s != "string") return s; const t = s.length - 1, i = s[t]; if (s[0] === "{" && i === "}") { let n; const o = s.slice(1, t); try { n = JSON.parse("[" + o + "]") } catch { n = o ? o.split(",") : [] } return n.map(a => Us(e, a)) } return s }, $l = s => typeof s == "string" ? s.replace(" ", "T") : s, zs = s => { let e = s; return e = e.replace(/^ws/i, "http"), e = e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i, ""), e.replace(/\/+$/, "") }; class Ur { constructor(e, t, i = {}, r = Ms) { this.channel = e, this.event = t, this.payload = i, this.timeout = r, this.sent = !1, this.timeoutTimer = void 0, this.ref = "", this.receivedResp = null, this.recHooks = [], this.refEvent = null } resend(e) { this.timeout = e, this._cancelRefEvent(), this.ref = "", this.refEvent = null, this.receivedResp = null, this.sent = !1, this.send() } send() { this._hasReceived("timeout") || (this.startTimeout(), this.sent = !0, this.channel.socket.push({ topic: this.channel.topic, event: this.event, payload: this.payload, ref: this.ref, join_ref: this.channel._joinRef() })) } updatePayload(e) { this.payload = Object.assign(Object.assign({}, this.payload), e) } receive(e, t) { var i; return this._hasReceived(e) && t((i = this.receivedResp) === null || i === void 0 ? void 0 : i.response), this.recHooks.push({ status: e, callback: t }), this } startTimeout() { if (this.timeoutTimer) return; this.ref = this.channel.socket._makeRef(), this.refEvent = this.channel._replyEventName(this.ref); const e = t => { this._cancelRefEvent(), this._cancelTimeout(), this.receivedResp = t, this._matchReceive(t) }; this.channel._on(this.refEvent, {}, e), this.timeoutTimer = setTimeout(() => { this.trigger("timeout", {}) }, this.timeout) } trigger(e, t) { this.refEvent && this.channel._trigger(this.refEvent, { status: e, response: t }) } destroy() { this._cancelRefEvent(), this._cancelTimeout() } _cancelRefEvent() { !this.refEvent || this.channel._off(this.refEvent, {}) } _cancelTimeout() { clearTimeout(this.timeoutTimer), this.timeoutTimer = void 0 } _matchReceive({ status: e, response: t }) { this.recHooks.filter(i => i.status === e).forEach(i => i.callback(t)) } _hasReceived(e) { return this.receivedResp && this.receivedResp.status === e } } var Bs; (function (s) { s.SYNC = "sync", s.JOIN = "join", s.LEAVE = "leave" })(Bs || (Bs = {})); class li { constructor(e, t) { this.channel = e, this.state = {}, this.pendingDiffs = [], this.joinRef = null, this.caller = { onJoin: () => { }, onLeave: () => { }, onSync: () => { } }; const i = (t == null ? void 0 : t.events) || { state: "presence_state", diff: "presence_diff" }; this.channel._on(i.state, {}, r => { const { onJoin: n, onLeave: o, onSync: a } = this.caller; this.joinRef = this.channel._joinRef(), this.state = li.syncState(this.state, r, n, o), this.pendingDiffs.forEach(l => { this.state = li.syncDiff(this.state, l, n, o) }), this.pendingDiffs = [], a() }), this.channel._on(i.diff, {}, r => { const { onJoin: n, onLeave: o, onSync: a } = this.caller; this.inPendingSyncState() ? this.pendingDiffs.push(r) : (this.state = li.syncDiff(this.state, r, n, o), a()) }), this.onJoin((r, n, o) => { this.channel._trigger("presence", { event: "join", key: r, currentPresences: n, newPresences: o }) }), this.onLeave((r, n, o) => { this.channel._trigger("presence", { event: "leave", key: r, currentPresences: n, leftPresences: o }) }), this.onSync(() => { this.channel._trigger("presence", { event: "sync" }) }) } static syncState(e, t, i, r) { const n = this.cloneDeep(e), o = this.transformState(t), a = {}, l = {}; return this.map(n, (c, h) => { o[c] || (l[c] = h) }), this.map(o, (c, h) => { const u = n[c]; if (u) { const d = h.map(m => m.presence_ref), p = u.map(m => m.presence_ref), g = h.filter(m => p.indexOf(m.presence_ref) < 0), f = u.filter(m => d.indexOf(m.presence_ref) < 0); g.length > 0 && (a[c] = g), f.length > 0 && (l[c] = f) } else a[c] = h }), this.syncDiff(n, { joins: a, leaves: l }, i, r) } static syncDiff(e, t, i, r) { const { joins: n, leaves: o } = { joins: this.transformState(t.joins), leaves: this.transformState(t.leaves) }; return i || (i = () => { }), r || (r = () => { }), this.map(n, (a, l) => { var c; const h = (c = e[a]) !== null && c !== void 0 ? c : []; if (e[a] = this.cloneDeep(l), h.length > 0) { const u = e[a].map(p => p.presence_ref), d = h.filter(p => u.indexOf(p.presence_ref) < 0); e[a].unshift(...d) } i(a, h, l) }), this.map(o, (a, l) => { let c = e[a]; if (!c) return; const h = l.map(u => u.presence_ref); c = c.filter(u => h.indexOf(u.presence_ref) < 0), e[a] = c, r(a, c, l), c.length === 0 && delete e[a] }), e } static map(e, t) { return Object.getOwnPropertyNames(e).map(i => t(i, e[i])) } static transformState(e) { return e = this.cloneDeep(e), Object.getOwnPropertyNames(e).reduce((t, i) => { const r = e[i]; return "metas" in r ? t[i] = r.metas.map(n => (n.presence_ref = n.phx_ref, delete n.phx_ref, delete n.phx_ref_prev, n)) : t[i] = r, t }, {}) } static cloneDeep(e) { return JSON.parse(JSON.stringify(e)) } onJoin(e) { this.caller.onJoin = e } onLeave(e) { this.caller.onLeave = e } onSync(e) { this.caller.onSync = e } inPendingSyncState() { return !this.joinRef || this.joinRef !== this.channel._joinRef() } } var Ns; (function (s) { s.ALL = "*", s.INSERT = "INSERT", s.UPDATE = "UPDATE", s.DELETE = "DELETE" })(Ns || (Ns = {})); var Fs; (function (s) { s.BROADCAST = "broadcast", s.PRESENCE = "presence", s.POSTGRES_CHANGES = "postgres_changes", s.SYSTEM = "system" })(Fs || (Fs = {})); var Me; (function (s) { s.SUBSCRIBED = "SUBSCRIBED", s.TIMED_OUT = "TIMED_OUT", s.CLOSED = "CLOSED", s.CHANNEL_ERROR = "CHANNEL_ERROR" })(Me || (Me = {})); class zr { constructor(e, t = { config: {} }, i) { this.topic = e, this.params = t, this.socket = i, this.bindings = {}, this.state = de.closed, this.joinedOnce = !1, this.pushBuffer = [], this.subTopic = e.replace(/^realtime:/i, ""), this.params.config = Object.assign({ broadcast: { ack: !1, self: !1 }, presence: { key: "" }, private: !1 }, t.config), this.timeout = this.socket.timeout, this.joinPush = new Ur(this, Se.join, this.params, this.timeout), this.rejoinTimer = new Ds(() => this._rejoinUntilConnected(), this.socket.reconnectAfterMs), this.joinPush.receive("ok", () => { this.state = de.joined, this.rejoinTimer.reset(), this.pushBuffer.forEach(r => r.send()), this.pushBuffer = [] }), this._onClose(() => { this.rejoinTimer.reset(), this.socket.log("channel", `close ${this.topic} ${this._joinRef()}`), this.state = de.closed, this.socket._remove(this) }), this._onError(r => { this._isLeaving() || this._isClosed() || (this.socket.log("channel", `error ${this.topic}`, r), this.state = de.errored, this.rejoinTimer.scheduleTimeout()) }), this.joinPush.receive("timeout", () => { !this._isJoining() || (this.socket.log("channel", `timeout ${this.topic}`, this.joinPush.timeout), this.state = de.errored, this.rejoinTimer.scheduleTimeout()) }), this._on(Se.reply, {}, (r, n) => { this._trigger(this._replyEventName(n), r) }), this.presence = new li(this), this.broadcastEndpointURL = zs(this.socket.endPoint) + "/api/broadcast", this.private = this.params.config.private || !1 } subscribe(e, t = this.timeout) { var i, r; if (this.socket.isConnected() || this.socket.connect(), this.joinedOnce) throw "tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance"; { const { config: { broadcast: n, presence: o, private: a } } = this.params; this._onError(h => e == null ? void 0 : e(Me.CHANNEL_ERROR, h)), this._onClose(() => e == null ? void 0 : e(Me.CLOSED)); const l = {}, c = { broadcast: n, presence: o, postgres_changes: (r = (i = this.bindings.postgres_changes) === null || i === void 0 ? void 0 : i.map(h => h.filter)) !== null && r !== void 0 ? r : [], private: a }; this.socket.accessTokenValue && (l.access_token = this.socket.accessTokenValue), this.updateJoinPayload(Object.assign({ config: c }, l)), this.joinedOnce = !0, this._rejoin(t), this.joinPush.receive("ok", async ({ postgres_changes: h }) => { var u; if (this.socket.setAuth(), h === void 0) { e == null || e(Me.SUBSCRIBED); return } else { const d = this.bindings.postgres_changes, p = (u = d == null ? void 0 : d.length) !== null && u !== void 0 ? u : 0, g = []; for (let f = 0; f < p; f++) { const m = d[f], { filter: { event: _, schema: y, table: v, filter: b } } = m, w = h && h[f]; if (w && w.event === _ && w.schema === y && w.table === v && w.filter === b) g.push(Object.assign(Object.assign({}, m), { id: w.id })); else { this.unsubscribe(), e == null || e(Me.CHANNEL_ERROR, new Error("mismatch between server and client bindings for postgres changes")); return } } this.bindings.postgres_changes = g, e && e(Me.SUBSCRIBED); return } }).receive("error", h => { e == null || e(Me.CHANNEL_ERROR, new Error(JSON.stringify(Object.values(h).join(", ") || "error"))) }).receive("timeout", () => { e == null || e(Me.TIMED_OUT) }) } return this } presenceState() { return this.presence.state } async track(e, t = {}) { return await this.send({ type: "presence", event: "track", payload: e }, t.timeout || this.timeout) } async untrack(e = {}) { return await this.send({ type: "presence", event: "untrack" }, e) } on(e, t, i) { return this._on(e, t, i) } async send(e, t = {}) { var i, r; if (!this._canPush() && e.type === "broadcast") { const { event: n, payload: o } = e, a = this.socket.accessTokenValue ? `Bearer ${this.socket.accessTokenValue}` : "", l = { method: "POST", headers: { Authorization: a, apikey: this.socket.apiKey ? this.socket.apiKey : "", "Content-Type": "application/json" }, body: JSON.stringify({ messages: [{ topic: this.subTopic, event: n, payload: o, private: this.private }] }) }; try { const c = await this._fetchWithTimeout(this.broadcastEndpointURL, l, (i = t.timeout) !== null && i !== void 0 ? i : this.timeout); return await ((r = c.body) === null || r === void 0 ? void 0 : r.cancel()), c.ok ? "ok" : "error" } catch (c) { return c.name === "AbortError" ? "timed out" : "error" } } else return new Promise(n => { var o, a, l; const c = this._push(e.type, e, t.timeout || this.timeout); e.type === "broadcast" && !((l = (a = (o = this.params) === null || o === void 0 ? void 0 : o.config) === null || a === void 0 ? void 0 : a.broadcast) === null || l === void 0 ? void 0 : l.ack) && n("ok"), c.receive("ok", () => n("ok")), c.receive("error", () => n("error")), c.receive("timeout", () => n("timed out")) }) } updateJoinPayload(e) { this.joinPush.updatePayload(e) } unsubscribe(e = this.timeout) { this.state = de.leaving; const t = () => { this.socket.log("channel", `leave ${this.topic}`), this._trigger(Se.close, "leave", this._joinRef()) }; return this.rejoinTimer.reset(), this.joinPush.destroy(), new Promise(i => { const r = new Ur(this, Se.leave, {}, e); r.receive("ok", () => { t(), i("ok") }).receive("timeout", () => { t(), i("timed out") }).receive("error", () => { i("error") }), r.send(), this._canPush() || r.trigger("ok", {}) }) } async _fetchWithTimeout(e, t, i) { const r = new AbortController, n = setTimeout(() => r.abort(), i), o = await this.socket.fetch(e, Object.assign(Object.assign({}, t), { signal: r.signal })); return clearTimeout(n), o } _push(e, t, i = this.timeout) { if (!this.joinedOnce) throw `tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`; let r = new Ur(this, e, t, i); return this._canPush() ? r.send() : (r.startTimeout(), this.pushBuffer.push(r)), r } _onMessage(e, t, i) { return t } _isMember(e) { return this.topic === e } _joinRef() { return this.joinPush.ref } _trigger(e, t, i) { var r, n; const o = e.toLocaleLowerCase(), { close: a, error: l, leave: c, join: h } = Se; if (i && [a, l, c, h].indexOf(o) >= 0 && i !== this._joinRef()) return; let d = this._onMessage(o, t, i); if (t && !d) throw "channel onMessage callbacks must return the payload, modified or unmodified";["insert", "update", "delete"].includes(o) ? (r = this.bindings.postgres_changes) === null || r === void 0 || r.filter(p => { var g, f, m; return ((g = p.filter) === null || g === void 0 ? void 0 : g.event) === "*" || ((m = (f = p.filter) === null || f === void 0 ? void 0 : f.event) === null || m === void 0 ? void 0 : m.toLocaleLowerCase()) === o }).map(p => p.callback(d, i)) : (n = this.bindings[o]) === null || n === void 0 || n.filter(p => { var g, f, m, _, y, v; if (["broadcast", "presence", "postgres_changes"].includes(o)) if ("id" in p) { const b = p.id, w = (g = p.filter) === null || g === void 0 ? void 0 : g.event; return b && ((f = t.ids) === null || f === void 0 ? void 0 : f.includes(b)) && (w === "*" || (w == null ? void 0 : w.toLocaleLowerCase()) === ((m = t.data) === null || m === void 0 ? void 0 : m.type.toLocaleLowerCase())) } else { const b = (y = (_ = p == null ? void 0 : p.filter) === null || _ === void 0 ? void 0 : _.event) === null || y === void 0 ? void 0 : y.toLocaleLowerCase(); return b === "*" || b === ((v = t == null ? void 0 : t.event) === null || v === void 0 ? void 0 : v.toLocaleLowerCase()) } else return p.type.toLocaleLowerCase() === o }).map(p => { if (typeof d == "object" && "ids" in d) { const g = d.data, { schema: f, table: m, commit_timestamp: _, type: y, errors: v } = g; d = Object.assign(Object.assign({}, { schema: f, table: m, commit_timestamp: _, eventType: y, new: {}, old: {}, errors: v }), this._getPayloadRecords(g)) } p.callback(d, i) }) } _isClosed() { return this.state === de.closed } _isJoined() { return this.state === de.joined } _isJoining() { return this.state === de.joining } _isLeaving() { return this.state === de.leaving } _replyEventName(e) { return `chan_reply_${e}` } _on(e, t, i) { const r = e.toLocaleLowerCase(), n = { type: r, filter: t, callback: i }; return this.bindings[r] ? this.bindings[r].push(n) : this.bindings[r] = [n], this } _off(e, t) { const i = e.toLocaleLowerCase(); return this.bindings[i] = this.bindings[i].filter(r => { var n; return !(((n = r.type) === null || n === void 0 ? void 0 : n.toLocaleLowerCase()) === i && zr.isEqual(r.filter, t)) }), this } static isEqual(e, t) { if (Object.keys(e).length !== Object.keys(t).length) return !1; for (const i in e) if (e[i] !== t[i]) return !1; return !0 } _rejoinUntilConnected() { this.rejoinTimer.scheduleTimeout(), this.socket.isConnected() && this._rejoin() } _onClose(e) { this._on(Se.close, {}, e) } _onError(e) { this._on(Se.error, {}, t => e(t)) } _canPush() { return this.socket.isConnected() && this._isJoined() } _rejoin(e = this.timeout) { this._isLeaving() || (this.socket._leaveOpenTopic(this.topic), this.state = de.joining, this.joinPush.resend(e)) } _getPayloadRecords(e) { const t = { new: {}, old: {} }; return (e.type === "INSERT" || e.type === "UPDATE") && (t.new = qs(e.columns, e.record)), (e.type === "UPDATE" || e.type === "DELETE") && (t.old = qs(e.columns, e.old_record)), t } } const jl = () => { }, Ml = typeof WebSocket != "undefined", Dl = `
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`; class ql { constructor(e, t) { var i; this.accessTokenValue = null, this.apiKey = null, this.channels = [], this.endPoint = "", this.httpEndpoint = "", this.headers = kl, this.params = {}, this.timeout = Ms, this.heartbeatIntervalMs = 3e4, this.heartbeatTimer = void 0, this.pendingHeartbeatRef = null, this.ref = 0, this.logger = jl, this.conn = null, this.sendBuffer = [], this.serializer = new Cl, this.stateChangeCallbacks = { open: [], close: [], error: [], message: [] }, this.accessToken = null, this._resolveFetch = n => { let o; return n ? o = n : typeof fetch == "undefined" ? o = (...a) => Promise.resolve().then(function () { return jt }).then(({ default: l }) => l(...a)) : o = fetch, (...a) => o(...a) }, this.endPoint = `${e}/${Dr.websocket}`, this.httpEndpoint = zs(e), (t == null ? void 0 : t.transport) ? this.transport = t.transport : this.transport = null, (t == null ? void 0 : t.params) && (this.params = t.params), (t == null ? void 0 : t.headers) && (this.headers = Object.assign(Object.assign({}, this.headers), t.headers)), (t == null ? void 0 : t.timeout) && (this.timeout = t.timeout), (t == null ? void 0 : t.logger) && (this.logger = t.logger), (t == null ? void 0 : t.heartbeatIntervalMs) && (this.heartbeatIntervalMs = t.heartbeatIntervalMs); const r = (i = t == null ? void 0 : t.params) === null || i === void 0 ? void 0 : i.apikey; if (r && (this.accessTokenValue = r, this.apiKey = r), this.reconnectAfterMs = (t == null ? void 0 : t.reconnectAfterMs) ? t.reconnectAfterMs : n => [1e3, 2e3, 5e3, 1e4][n - 1] || 1e4, this.encode = (t == null ? void 0 : t.encode) ? t.encode : (n, o) => o(JSON.stringify(n)), this.decode = (t == null ? void 0 : t.decode) ? t.decode : this.serializer.decode.bind(this.serializer), this.reconnectTimer = new Ds(async () => { this.disconnect(), this.connect() }, this.reconnectAfterMs), this.fetch = this._resolveFetch(t == null ? void 0 : t.fetch), t == null ? void 0 : t.worker) { if (typeof window != "undefined" && !window.Worker) throw new Error("Web Worker is not supported"); this.worker = (t == null ? void 0 : t.worker) || !1, this.workerUrl = t == null ? void 0 : t.workerUrl } this.accessToken = (t == null ? void 0 : t.accessToken) || null } connect() { if (!this.conn) { if (this.transport) { this.conn = new this.transport(this.endpointURL(), void 0, { headers: this.headers }); return } if (Ml) { this.conn = new WebSocket(this.endpointURL()), this.setupConnection(); return } this.conn = new Ul(this.endpointURL(), void 0, { close: () => { this.conn = null } }), Promise.resolve().then(function () { return Fh }).then(({ default: e }) => { this.conn = new e(this.endpointURL(), void 0, { headers: this.headers }), this.setupConnection() }) } } endpointURL() { return this._appendParams(this.endPoint, Object.assign({}, this.params, { vsn: El })) } disconnect(e, t) { this.conn && (this.conn.onclose = function () { }, e ? this.conn.close(e, t != null ? t : "") : this.conn.close(), this.conn = null, this.heartbeatTimer && clearInterval(this.heartbeatTimer), this.reconnectTimer.reset()) } getChannels() { return this.channels } async removeChannel(e) { const t = await e.unsubscribe(); return this.channels.length === 0 && this.disconnect(), t } async removeAllChannels() { const e = await Promise.all(this.channels.map(t => t.unsubscribe())); return this.disconnect(), e } log(e, t, i) { this.logger(e, t, i) } connectionState() { switch (this.conn && this.conn.readyState) { case Dt.connecting: return ft.Connecting; case Dt.open: return ft.Open; case Dt.closing: return ft.Closing; default: return ft.Closed } } isConnected() { return this.connectionState() === ft.Open } channel(e, t = { config: {} }) { const i = new zr(`realtime:${e}`, t, this); return this.channels.push(i), i } push(e) { const { topic: t, event: i, payload: r, ref: n } = e, o = () => { this.encode(e, a => { var l; (l = this.conn) === null || l === void 0 || l.send(a) }) }; this.log("push", `${t} ${i} (${n})`, r), this.isConnected() ? o() : this.sendBuffer.push(o) } async setAuth(e = null) { let t = e || this.accessToken && await this.accessToken() || this.accessTokenValue; if (t) { let i = null; try { i = JSON.parse(atob(t.split(".")[1])) } catch { } if (i && i.exp && !(Math.floor(Date.now() / 1e3) - i.exp < 0)) return this.log("auth", `InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`), Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`); this.accessTokenValue = t, this.channels.forEach(r => { t && r.updateJoinPayload({ access_token: t }), r.joinedOnce && r._isJoined() && r._push(Se.access_token, { access_token: t }) }) } } async sendHeartbeat() { var e; if (!!this.isConnected()) { if (this.pendingHeartbeatRef) { this.pendingHeartbeatRef = null, this.log("transport", "heartbeat timeout. Attempting to re-establish connection"), (e = this.conn) === null || e === void 0 || e.close(Pl, "hearbeat timeout"); return } this.pendingHeartbeatRef = this._makeRef(), this.push({ topic: "phoenix", event: "heartbeat", payload: {}, ref: this.pendingHeartbeatRef }), this.setAuth() } } flushSendBuffer() { this.isConnected() && this.sendBuffer.length > 0 && (this.sendBuffer.forEach(e => e()), this.sendBuffer = []) } _makeRef() { let e = this.ref + 1; return e === this.ref ? this.ref = 0 : this.ref = e, this.ref.toString() } _leaveOpenTopic(e) { let t = this.channels.find(i => i.topic === e && (i._isJoined() || i._isJoining())); t && (this.log("transport", `leaving duplicate topic "${e}"`), t.unsubscribe()) } _remove(e) { this.channels = this.channels.filter(t => t._joinRef() !== e._joinRef()) } setupConnection() { this.conn && (this.conn.binaryType = "arraybuffer", this.conn.onopen = () => this._onConnOpen(), this.conn.onerror = e => this._onConnError(e), this.conn.onmessage = e => this._onConnMessage(e), this.conn.onclose = e => this._onConnClose(e)) } _onConnMessage(e) { this.decode(e.data, t => { let { topic: i, event: r, payload: n, ref: o } = t; o && o === this.pendingHeartbeatRef && (this.pendingHeartbeatRef = null), this.log("receive", `${n.status || ""} ${i} ${r} ${o && "(" + o + ")" || ""}`, n), this.channels.filter(a => a._isMember(i)).forEach(a => a._trigger(r, n, o)), this.stateChangeCallbacks.message.forEach(a => a(t)) }) } async _onConnOpen() { if (this.log("transport", `connected to ${this.endpointURL()}`), this.flushSendBuffer(), this.reconnectTimer.reset(), !this.worker) this.heartbeatTimer && clearInterval(this.heartbeatTimer), this.heartbeatTimer = setInterval(() => this.sendHeartbeat(), this.heartbeatIntervalMs); else { this.workerUrl ? this.log("worker", `starting worker for from ${this.workerUrl}`) : this.log("worker", "starting default worker"); const e = this._workerObjectUrl(this.workerUrl); this.workerRef = new Worker(e), this.workerRef.onerror = t => { this.log("worker", "worker error", t.message), this.workerRef.terminate() }, this.workerRef.onmessage = t => { t.data.event === "keepAlive" && this.sendHeartbeat() }, this.workerRef.postMessage({ event: "start", interval: this.heartbeatIntervalMs }) } this.stateChangeCallbacks.open.forEach(e => e()) } _onConnClose(e) { this.log("transport", "close", e), this._triggerChanError(), this.heartbeatTimer && clearInterval(this.heartbeatTimer), this.reconnectTimer.scheduleTimeout(), this.stateChangeCallbacks.close.forEach(t => t(e)) } _onConnError(e) { this.log("transport", e.message), this._triggerChanError(), this.stateChangeCallbacks.error.forEach(t => t(e)) } _triggerChanError() { this.channels.forEach(e => e._trigger(Se.error)) } _appendParams(e, t) { if (Object.keys(t).length === 0) return e; const i = e.match(/\?/) ? "&" : "?", r = new URLSearchParams(t); return `${e}${i}${r}` } _workerObjectUrl(e) { let t; if (e) t = e; else { const i = new Blob([Dl], { type: "application/javascript" }); t = URL.createObjectURL(i) } return t } } class Ul { constructor(e, t, i) { this.binaryType = "arraybuffer", this.onclose = () => { }, this.onerror = () => { }, this.onmessage = () => { }, this.onopen = () => { }, this.readyState = Dt.connecting, this.send = () => { }, this.url = null, this.url = e, this.close = i.close } } class Br extends Error { constructor(e) { super(e); this.__isStorageError = !0, this.name = "StorageError" } } function J(s) { return typeof s == "object" && s !== null && "__isStorageError" in s } class zl extends Br { constructor(e, t) { super(e); this.name = "StorageApiError", this.status = t } toJSON() { return { name: this.name, message: this.message, status: this.status } } } class Nr extends Br { constructor(e, t) { super(e); this.name = "StorageUnknownError", this.originalError = t } } var Bl = globalThis && globalThis.__awaiter || function (s, e, t, i) { function r(n) { return n instanceof t ? n : new t(function (o) { o(n) }) } return new (t || (t = Promise))(function (n, o) { function a(h) { try { c(i.next(h)) } catch (u) { o(u) } } function l(h) { try { c(i.throw(h)) } catch (u) { o(u) } } function c(h) { h.done ? n(h.value) : r(h.value).then(a, l) } c((i = i.apply(s, e || [])).next()) }) }; const Hs = s => { let e; return s ? e = s : typeof fetch == "undefined" ? e = (...t) => Promise.resolve().then(function () { return jt }).then(({ default: i }) => i(...t)) : e = fetch, (...t) => e(...t) }, Nl = () => Bl(void 0, void 0, void 0, function* () { return typeof Response == "undefined" ? (yield Promise.resolve().then(function () { return jt })).Response : Response }), Fr = s => { if (Array.isArray(s)) return s.map(t => Fr(t)); if (typeof s == "function" || s !== Object(s)) return s; const e = {}; return Object.entries(s).forEach(([t, i]) => { const r = t.replace(/([-_][a-z])/gi, n => n.toUpperCase().replace(/[-_]/g, "")); e[r] = Fr(i) }), e }; var pt = globalThis && globalThis.__awaiter || function (s, e, t, i) { function r(n) { return n instanceof t ? n : new t(function (o) { o(n) }) } return new (t || (t = Promise))(function (n, o) { function a(h) { try { c(i.next(h)) } catch (u) { o(u) } } function l(h) { try { c(i.throw(h)) } catch (u) { o(u) } } function c(h) { h.done ? n(h.value) : r(h.value).then(a, l) } c((i = i.apply(s, e || [])).next()) }) }; const Hr = s => s.msg || s.message || s.error_description || s.error || JSON.stringify(s), Fl = (s, e, t) => pt(void 0, void 0, void 0, function* () { const i = yield Nl(); s instanceof i && !(t == null ? void 0 : t.noResolveJson) ? s.json().then(r => { e(new zl(Hr(r), s.status || 500)) }).catch(r => { e(new Nr(Hr(r), r)) }) : e(new Nr(Hr(s), s)) }), Hl = (s, e, t, i) => { const r = { method: s, headers: (e == null ? void 0 : e.headers) || {} }; return s === "GET" ? r : (r.headers = Object.assign({ "Content-Type": "application/json" }, e == null ? void 0 : e.headers), i && (r.body = JSON.stringify(i)), Object.assign(Object.assign({}, r), t)) }; function ci(s, e, t, i, r, n) { return pt(this, void 0, void 0, function* () { return new Promise((o, a) => { s(t, Hl(e, i, r, n)).then(l => { if (!l.ok) throw l; return (i == null ? void 0 : i.noResolveJson) ? l : l.json() }).then(l => o(l)).catch(l => Fl(l, a, i)) }) }) } function Bi(s, e, t, i) { return pt(this, void 0, void 0, function* () { return ci(s, "GET", e, t, i) }) } function Ke(s, e, t, i, r) { return pt(this, void 0, void 0, function* () { return ci(s, "POST", e, i, r, t) }) } function Wl(s, e, t, i, r) { return pt(this, void 0, void 0, function* () { return ci(s, "PUT", e, i, r, t) }) } function Vl(s, e, t, i) { return pt(this, void 0, void 0, function* () { return ci(s, "HEAD", e, Object.assign(Object.assign({}, t), { noResolveJson: !0 }), i) }) } function Ws(s, e, t, i, r) { return pt(this, void 0, void 0, function* () { return ci(s, "DELETE", e, i, r, t) }) } var le = globalThis && globalThis.__awaiter || function (s, e, t, i) { function r(n) { return n instanceof t ? n : new t(function (o) { o(n) }) } return new (t || (t = Promise))(function (n, o) { function a(h) { try { c(i.next(h)) } catch (u) { o(u) } } function l(h) { try { c(i.throw(h)) } catch (u) { o(u) } } function c(h) { h.done ? n(h.value) : r(h.value).then(a, l) } c((i = i.apply(s, e || [])).next()) }) }; const Gl = { limit: 100, offset: 0, sortBy: { column: "name", order: "asc" } }, Vs = { cacheControl: "3600", contentType: "text/plain;charset=UTF-8", upsert: !1 }; class Jl { constructor(e, t = {}, i, r) { this.url = e, this.headers = t, this.bucketId = i, this.fetch = Hs(r) } uploadOrUpdate(e, t, i, r) { return le(this, void 0, void 0, function* () { try { let n; const o = Object.assign(Object.assign({}, Vs), r); let a = Object.assign(Object.assign({}, this.headers), e === "POST" && { "x-upsert": String(o.upsert) }); const l = o.metadata; typeof Blob != "undefined" && i instanceof Blob ? (n = new FormData, n.append("cacheControl", o.cacheControl), l && n.append("metadata", this.encodeMetadata(l)), n.append("", i)) : typeof FormData != "undefined" && i instanceof FormData ? (n = i, n.append("cacheControl", o.cacheControl), l && n.append("metadata", this.encodeMetadata(l))) : (n = i, a["cache-control"] = `max-age=${o.cacheControl}`, a["content-type"] = o.contentType, l && (a["x-metadata"] = this.toBase64(this.encodeMetadata(l)))), (r == null ? void 0 : r.headers) && (a = Object.assign(Object.assign({}, a), r.headers)); const c = this._removeEmptyFolders(t), h = this._getFinalPath(c), u = yield this.fetch(`${this.url}/object/${h}`, Object.assign({ method: e, body: n, headers: a }, (o == null ? void 0 : o.duplex) ? { duplex: o.duplex } : {})), d = yield u.json(); return u.ok ? { data: { path: c, id: d.Id, fullPath: d.Key }, error: null } : { data: null, error: d } } catch (n) { if (J(n)) return { data: null, error: n }; throw n } }) } upload(e, t, i) { return le(this, void 0, void 0, function* () { return this.uploadOrUpdate("POST", e, t, i) }) } uploadToSignedUrl(e, t, i, r) { return le(this, void 0, void 0, function* () { const n = this._removeEmptyFolders(e), o = this._getFinalPath(n), a = new URL(this.url + `/object/upload/sign/${o}`); a.searchParams.set("token", t); try { let l; const c = Object.assign({ upsert: Vs.upsert }, r), h = Object.assign(Object.assign({}, this.headers), { "x-upsert": String(c.upsert) }); typeof Blob != "undefined" && i instanceof Blob ? (l = new FormData, l.append("cacheControl", c.cacheControl), l.append("", i)) : typeof FormData != "undefined" && i instanceof FormData ? (l = i, l.append("cacheControl", c.cacheControl)) : (l = i, h["cache-control"] = `max-age=${c.cacheControl}`, h["content-type"] = c.contentType); const u = yield this.fetch(a.toString(), { method: "PUT", body: l, headers: h }), d = yield u.json(); return u.ok ? { data: { path: n, fullPath: d.Key }, error: null } : { data: null, error: d } } catch (l) { if (J(l)) return { data: null, error: l }; throw l } }) } createSignedUploadUrl(e, t) { return le(this, void 0, void 0, function* () { try { let i = this._getFinalPath(e); const r = Object.assign({}, this.headers); (t == null ? void 0 : t.upsert) && (r["x-upsert"] = "true"); const n = yield Ke(this.fetch, `${this.url}/object/upload/sign/${i}`, {}, { headers: r }), o = new URL(this.url + n.url), a = o.searchParams.get("token"); if (!a) throw new Br("No token returned by API"); return { data: { signedUrl: o.toString(), path: e, token: a }, error: null } } catch (i) { if (J(i)) return { data: null, error: i }; throw i } }) } update(e, t, i) { return le(this, void 0, void 0, function* () { return this.uploadOrUpdate("PUT", e, t, i) }) } move(e, t, i) { return le(this, void 0, void 0, function* () { try { return { data: yield Ke(this.fetch, `${this.url}/object/move`, { bucketId: this.bucketId, sourceKey: e, destinationKey: t, destinationBucket: i == null ? void 0 : i.destinationBucket }, { headers: this.headers }), error: null } } catch (r) { if (J(r)) return { data: null, error: r }; throw r } }) } copy(e, t, i) { return le(this, void 0, void 0, function* () { try { return { data: { path: (yield Ke(this.fetch, `${this.url}/object/copy`, { bucketId: this.bucketId, sourceKey: e, destinationKey: t, destinationBucket: i == null ? void 0 : i.destinationBucket }, { headers: this.headers })).Key }, error: null } } catch (r) { if (J(r)) return { data: null, error: r }; throw r } }) } createSignedUrl(e, t, i) { return le(this, void 0, void 0, function* () { try { let r = this._getFinalPath(e), n = yield Ke(this.fetch, `${this.url}/object/sign/${r}`, Object.assign({ expiresIn: t }, (i == null ? void 0 : i.transform) ? { transform: i.transform } : {}), { headers: this.headers }); const o = (i == null ? void 0 : i.download) ? `&download=${i.download === !0 ? "" : i.download}` : ""; return n = { signedUrl: encodeURI(`${this.url}${n.signedURL}${o}`) }, { data: n, error: null } } catch (r) { if (J(r)) return { data: null, error: r }; throw r } }) } createSignedUrls(e, t, i) { return le(this, void 0, void 0, function* () { try { const r = yield Ke(this.fetch, `${this.url}/object/sign/${this.bucketId}`, { expiresIn: t, paths: e }, { headers: this.headers }), n = (i == null ? void 0 : i.download) ? `&download=${i.download === !0 ? "" : i.download}` : ""; return { data: r.map(o => Object.assign(Object.assign({}, o), { signedUrl: o.signedURL ? encodeURI(`${this.url}${o.signedURL}${n}`) : null })), error: null } } catch (r) { if (J(r)) return { data: null, error: r }; throw r } }) } download(e, t) { return le(this, void 0, void 0, function* () { const r = typeof (t == null ? void 0 : t.transform) != "undefined" ? "render/image/authenticated" : "object", n = this.transformOptsToQueryString((t == null ? void 0 : t.transform) || {}), o = n ? `?${n}` : ""; try { const a = this._getFinalPath(e); return { data: yield (yield Bi(this.fetch, `${this.url}/${r}/${a}${o}`, { headers: this.headers, noResolveJson: !0 })).blob(), error: null } } catch (a) { if (J(a)) return { data: null, error: a }; throw a } }) } info(e) { return le(this, void 0, void 0, function* () { const t = this._getFinalPath(e); try { const i = yield Bi(this.fetch, `${this.url}/object/info/${t}`, { headers: this.headers }); return { data: Fr(i), error: null } } catch (i) { if (J(i)) return { data: null, error: i }; throw i } }) } exists(e) { return le(this, void 0, void 0, function* () { const t = this._getFinalPath(e); try { return yield Vl(this.fetch, `${this.url}/object/${t}`, { headers: this.headers }), { data: !0, error: null } } catch (i) { if (J(i) && i instanceof Nr) { const r = i.originalError; if ([400, 404].includes(r == null ? void 0 : r.status)) return { data: !1, error: i } } throw i } }) } getPublicUrl(e, t) { const i = this._getFinalPath(e), r = [], n = (t == null ? void 0 : t.download) ? `download=${t.download === !0 ? "" : t.download}` : ""; n !== "" && r.push(n); const a = typeof (t == null ? void 0 : t.transform) != "undefined" ? "render/image" : "object", l = this.transformOptsToQueryString((t == null ? void 0 : t.transform) || {}); l !== "" && r.push(l); let c = r.join("&"); return c !== "" && (c = `?${c}`), { data: { publicUrl: encodeURI(`${this.url}/${a}/public/${i}${c}`) } } } remove(e) { return le(this, void 0, void 0, function* () { try { return { data: yield Ws(this.fetch, `${this.url}/object/${this.bucketId}`, { prefixes: e }, { headers: this.headers }), error: null } } catch (t) { if (J(t)) return { data: null, error: t }; throw t } }) } list(e, t, i) { return le(this, void 0, void 0, function* () { try { const r = Object.assign(Object.assign(Object.assign({}, Gl), t), { prefix: e || "" }); return { data: yield Ke(this.fetch, `${this.url}/object/list/${this.bucketId}`, r, { headers: this.headers }, i), error: null } } catch (r) { if (J(r)) return { data: null, error: r }; throw r } }) } encodeMetadata(e) { return JSON.stringify(e) } toBase64(e) { return typeof Buffer != "undefined" ? Buffer.from(e).toString("base64") : btoa(e) } _getFinalPath(e) { return `${this.bucketId}/${e}` } _removeEmptyFolders(e) { return e.replace(/^\/|\/$/g, "").replace(/\/+/g, "/") } transformOptsToQueryString(e) { const t = []; return e.width && t.push(`width=${e.width}`), e.height && t.push(`height=${e.height}`), e.resize && t.push(`resize=${e.resize}`), e.format && t.push(`format=${e.format}`), e.quality && t.push(`quality=${e.quality}`), t.join("&") } } const Kl = { "X-Client-Info": "storage-js/2.7.1" }; var qt = globalThis && globalThis.__awaiter || function (s, e, t, i) { function r(n) { return n instanceof t ? n : new t(function (o) { o(n) }) } return new (t || (t = Promise))(function (n, o) { function a(h) { try { c(i.next(h)) } catch (u) { o(u) } } function l(h) { try { c(i.throw(h)) } catch (u) { o(u) } } function c(h) { h.done ? n(h.value) : r(h.value).then(a, l) } c((i = i.apply(s, e || [])).next()) }) }; class Xl { constructor(e, t = {}, i) { this.url = e, this.headers = Object.assign(Object.assign({}, Kl), t), this.fetch = Hs(i) } listBuckets() { return qt(this, void 0, void 0, function* () { try { return { data: yield Bi(this.fetch, `${this.url}/bucket`, { headers: this.headers }), error: null } } catch (e) { if (J(e)) return { data: null, error: e }; throw e } }) } getBucket(e) { return qt(this, void 0, void 0, function* () { try { return { data: yield Bi(this.fetch, `${this.url}/bucket/${e}`, { headers: this.headers }), error: null } } catch (t) { if (J(t)) return { data: null, error: t }; throw t } }) } createBucket(e, t = { public: !1 }) { return qt(this, void 0, void 0, function* () { try { return { data: yield Ke(this.fetch, `${this.url}/bucket`, { id: e, name: e, public: t.public, file_size_limit: t.fileSizeLimit, allowed_mime_types: t.allowedMimeTypes }, { headers: this.headers }), error: null } } catch (i) { if (J(i)) return { data: null, error: i }; throw i } }) } updateBucket(e, t) { return qt(this, void 0, void 0, function* () { try { return { data: yield Wl(this.fetch, `${this.url}/bucket/${e}`, { id: e, name: e, public: t.public, file_size_limit: t.fileSizeLimit, allowed_mime_types: t.allowedMimeTypes }, { headers: this.headers }), error: null } } catch (i) { if (J(i)) return { data: null, error: i }; throw i } }) } emptyBucket(e) { return qt(this, void 0, void 0, function* () { try { return { data: yield Ke(this.fetch, `${this.url}/bucket/${e}/empty`, {}, { headers: this.headers }), error: null } } catch (t) { if (J(t)) return { data: null, error: t }; throw t } }) } deleteBucket(e) { return qt(this, void 0, void 0, function* () { try { return { data: yield Ws(this.fetch, `${this.url}/bucket/${e}`, {}, { headers: this.headers }), error: null } } catch (t) { if (J(t)) return { data: null, error: t }; throw t } }) } } class Yl extends Xl { constructor(e, t = {}, i) { super(e, t, i) } from(e) { return new Jl(this.url, this.headers, e, this.fetch) } } const Ql = "2.49.4"; let hi = ""; typeof Deno != "undefined" ? hi = "deno" : typeof document != "undefined" ? hi = "web" : typeof navigator != "undefined" && navigator.product === "ReactNative" ? hi = "react-native" : hi = "node"; const Zl = { headers: { "X-Client-Info": `supabase-js-${hi}/${Ql}` } }, ec = { schema: "public" }, tc = { autoRefreshToken: !0, persistSession: !0, detectSessionInUrl: !0, flowType: "implicit" }, ic = {}; var rc = globalThis && globalThis.__awaiter || function (s, e, t, i) { function r(n) { return n instanceof t ? n : new t(function (o) { o(n) }) } return new (t || (t = Promise))(function (n, o) { function a(h) { try { c(i.next(h)) } catch (u) { o(u) } } function l(h) { try { c(i.throw(h)) } catch (u) { o(u) } } function c(h) { h.done ? n(h.value) : r(h.value).then(a, l) } c((i = i.apply(s, e || [])).next()) }) }; const nc = s => { let e; return s ? e = s : typeof fetch == "undefined" ? e = Es : e = fetch, (...t) => e(...t) }, sc = () => typeof Headers == "undefined" ? Ps : Headers, oc = (s, e, t) => { const i = nc(t), r = sc(); return (n, o) => rc(void 0, void 0, void 0, function* () { var a; const l = (a = yield e()) !== null && a !== void 0 ? a : s; let c = new r(o == null ? void 0 : o.headers); return c.has("apikey") || c.set("apikey", s), c.has("Authorization") || c.set("Authorization", `Bearer ${l}`), i(n, Object.assign(Object.assign({}, o), { headers: c })) }) }; var ac = globalThis && globalThis.__awaiter || function (s, e, t, i) { function r(n) { return n instanceof t ? n : new t(function (o) { o(n) }) } return new (t || (t = Promise))(function (n, o) { function a(h) { try { c(i.next(h)) } catch (u) { o(u) } } function l(h) { try { c(i.throw(h)) } catch (u) { o(u) } } function c(h) { h.done ? n(h.value) : r(h.value).then(a, l) } c((i = i.apply(s, e || [])).next()) }) }; function lc(s) { return s.replace(/\/$/, "") } function cc(s, e) { const { db: t, auth: i, realtime: r, global: n } = s, { db: o, auth: a, realtime: l, global: c } = e, h = { db: Object.assign(Object.assign({}, o), t), auth: Object.assign(Object.assign({}, a), i), realtime: Object.assign(Object.assign({}, l), r), global: Object.assign(Object.assign({}, c), n), accessToken: () => ac(this, void 0, void 0, function* () { return "" }) }; return s.accessToken ? h.accessToken = s.accessToken : delete h.accessToken, h } const Gs = "2.69.1", Ut = 30 * 1e3, Wr = 3, Vr = Wr * Ut, hc = "http://localhost:9999", uc = "supabase.auth.token", dc = { "X-Client-Info": `gotrue-js/${Gs}` }, Gr = "X-Supabase-Api-Version", Js = { "2024-01-01": { timestamp: Date.parse("2024-01-01T00:00:00.0Z"), name: "2024-01-01" } }, fc = /^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i, pc = 6e5; class Jr extends Error { constructor(e, t, i) { super(e); this.__isAuthError = !0, this.name = "AuthError", this.status = t, this.code = i } } function L(s) { return typeof s == "object" && s !== null && "__isAuthError" in s } class gc extends Jr { constructor(e, t, i) { super(e, t, i); this.name = "AuthApiError", this.status = t, this.code = i } } function mc(s) { return L(s) && s.name === "AuthApiError" } class Ks extends Jr { constructor(e, t) { super(e); this.name = "AuthUnknownError", this.originalError = t } } class Xe extends Jr { constructor(e, t, i, r) { super(e, i, r); this.name = t, this.status = i } } class Ye extends Xe { constructor() { super("Auth session missing!", "AuthSessionMissingError", 400, void 0) } } function _c(s) { return L(s) && s.name === "AuthSessionMissingError" } class Kr extends Xe { constructor() { super("Auth session or user missing", "AuthInvalidTokenResponseError", 500, void 0) } } class Ni extends Xe { constructor(e) { super(e, "AuthInvalidCredentialsError", 400, void 0) } } class Fi extends Xe { constructor(e, t = null) { super(e, "AuthImplicitGrantRedirectError", 500, void 0); this.details = null, this.details = t } toJSON() { return { name: this.name, message: this.message, status: this.status, details: this.details } } } function yc(s) { return L(s) && s.name === "AuthImplicitGrantRedirectError" } class Xs extends Xe { constructor(e, t = null) { super(e, "AuthPKCEGrantCodeExchangeError", 500, void 0); this.details = null, this.details = t } toJSON() { return { name: this.name, message: this.message, status: this.status, details: this.details } } } class Xr extends Xe { constructor(e, t) { super(e, "AuthRetryableFetchError", t, void 0) } } function Yr(s) { return L(s) && s.name === "AuthRetryableFetchError" } class Ys extends Xe { constructor(e, t, i) { super(e, "AuthWeakPasswordError", t, "weak_password"); this.reasons = i } } class ui extends Xe { constructor(e) { super(e, "AuthInvalidJwtError", 400, "invalid_jwt") } } const Qs = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""), Zs = ` 	
\r=`.split(""), vc = (() => { const s = new Array(128); for (let e = 0; e < s.length; e += 1)s[e] = -1; for (let e = 0; e < Zs.length; e += 1)s[Zs[e].charCodeAt(0)] = -2; for (let e = 0; e < Qs.length; e += 1)s[Qs[e].charCodeAt(0)] = e; return s })(); function eo(s, e, t) { const i = vc[s]; if (i > -1) for (e.queue = e.queue << 6 | i, e.queuedBits += 6; e.queuedBits >= 8;)t(e.queue >> e.queuedBits - 8 & 255), e.queuedBits -= 8; else { if (i === -2) return; throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`) } } function to(s) { const e = [], t = o => { e.push(String.fromCodePoint(o)) }, i = { utf8seq: 0, codepoint: 0 }, r = { queue: 0, queuedBits: 0 }, n = o => { Sc(o, i, t) }; for (let o = 0; o < s.length; o += 1)eo(s.charCodeAt(o), r, n); return e.join("") } function wc(s, e) { if (s <= 127) { e(s); return } else if (s <= 2047) { e(192 | s >> 6), e(128 | s & 63); return } else if (s <= 65535) { e(224 | s >> 12), e(128 | s >> 6 & 63), e(128 | s & 63); return } else if (s <= 1114111) { e(240 | s >> 18), e(128 | s >> 12 & 63), e(128 | s >> 6 & 63), e(128 | s & 63); return } throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`) } function bc(s, e) { for (let t = 0; t < s.length; t += 1) { let i = s.charCodeAt(t); if (i > 55295 && i <= 56319) { const r = (i - 55296) * 1024 & 65535; i = (s.charCodeAt(t + 1) - 56320 & 65535 | r) + 65536, t += 1 } wc(i, e) } } function Sc(s, e, t) { if (e.utf8seq === 0) { if (s <= 127) { t(s); return } for (let i = 1; i < 6; i += 1)if ((s >> 7 - i & 1) == 0) { e.utf8seq = i; break } if (e.utf8seq === 2) e.codepoint = s & 31; else if (e.utf8seq === 3) e.codepoint = s & 15; else if (e.utf8seq === 4) e.codepoint = s & 7; else throw new Error("Invalid UTF-8 sequence"); e.utf8seq -= 1 } else if (e.utf8seq > 0) { if (s <= 127) throw new Error("Invalid UTF-8 sequence"); e.codepoint = e.codepoint << 6 | s & 63, e.utf8seq -= 1, e.utf8seq === 0 && t(e.codepoint) } } function xc(s) { const e = [], t = { queue: 0, queuedBits: 0 }, i = r => { e.push(r) }; for (let r = 0; r < s.length; r += 1)eo(s.charCodeAt(r), t, i); return new Uint8Array(e) } function Tc(s) { const e = []; return bc(s, t => e.push(t)), new Uint8Array(e) } function kc(s) { return Math.round(Date.now() / 1e3) + s } function Ec() { return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (s) { const e = Math.random() * 16 | 0; return (s == "x" ? e : e & 3 | 8).toString(16) }) } const Ce = () => typeof window != "undefined" && typeof document != "undefined", gt = { tested: !1, writable: !1 }, di = () => { if (!Ce()) return !1; try { if (typeof globalThis.localStorage != "object") return !1 } catch { return !1 } if (gt.tested) return gt.writable; const s = `lswt-${Math.random()}${Math.random()}`; try { globalThis.localStorage.setItem(s, s), globalThis.localStorage.removeItem(s), gt.tested = !0, gt.writable = !0 } catch { gt.tested = !0, gt.writable = !1 } return gt.writable }; function Pc(s) { const e = {}, t = new URL(s); if (t.hash && t.hash[0] === "#") try { new URLSearchParams(t.hash.substring(1)).forEach((r, n) => { e[n] = r }) } catch { } return t.searchParams.forEach((i, r) => { e[r] = i }), e } const io = s => { let e; return s ? e = s : typeof fetch == "undefined" ? e = (...t) => Promise.resolve().then(function () { return jt }).then(({ default: i }) => i(...t)) : e = fetch, (...t) => e(...t) }, Cc = s => typeof s == "object" && s !== null && "status" in s && "ok" in s && "json" in s && typeof s.json == "function", ro = async (s, e, t) => { await s.setItem(e, JSON.stringify(t)) }, Hi = async (s, e) => { const t = await s.getItem(e); if (!t) return null; try { return JSON.parse(t) } catch { return t } }, Wi = async (s, e) => { await s.removeItem(e) }; class Vi { constructor() { this.promise = new Vi.promiseConstructor((e, t) => { this.resolve = e, this.reject = t }) } } Vi.promiseConstructor = Promise; function Qr(s) { const e = s.split("."); if (e.length !== 3) throw new ui("Invalid JWT structure"); for (let i = 0; i < e.length; i++)if (!fc.test(e[i])) throw new ui("JWT not in base64url format"); return { header: JSON.parse(to(e[0])), payload: JSON.parse(to(e[1])), signature: xc(e[2]), raw: { header: e[0], payload: e[1] } } } async function Oc(s) { return await new Promise(e => { setTimeout(() => e(null), s) }) } function Ac(s, e) { return new Promise((i, r) => { (async () => { for (let n = 0; n < 1 / 0; n++)try { const o = await s(n); if (!e(n, null, o)) { i(o); return } } catch (o) { if (!e(n, o)) { r(o); return } } })() }) } function Rc(s) { return ("0" + s.toString(16)).substr(-2) } function Lc() { const s = 56, e = new Uint32Array(s); if (typeof crypto == "undefined") { const t = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~", i = t.length; let r = ""; for (let n = 0; n < s; n++)r += t.charAt(Math.floor(Math.random() * i)); return r } return crypto.getRandomValues(e), Array.from(e, Rc).join("") } async function Ic(s) { const t = new TextEncoder().encode(s), i = await crypto.subtle.digest("SHA-256", t), r = new Uint8Array(i); return Array.from(r).map(n => String.fromCharCode(n)).join("") } async function $c(s) { if (!(typeof crypto != "undefined" && typeof crypto.subtle != "undefined" && typeof TextEncoder != "undefined")) return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."), s; const t = await Ic(s); return btoa(t).replace(/\+/g, "-").replace(/\//g, "_").replace(/=+$/, "") } async function zt(s, e, t = !1) { const i = Lc(); let r = i; t && (r += "/PASSWORD_RECOVERY"), await ro(s, `${e}-code-verifier`, r); const n = await $c(i); return [n, i === n ? "plain" : "s256"] } const jc = /^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i; function Mc(s) { const e = s.headers.get(Gr); if (!e || !e.match(jc)) return null; try { return new Date(`${e}T00:00:00.0Z`) } catch { return null } } function Dc(s) { if (!s) throw new Error("Missing exp claim"); const e = Math.floor(Date.now() / 1e3); if (s <= e) throw new Error("JWT has expired") } function qc(s) { switch (s) { case "RS256": return { name: "RSASSA-PKCS1-v1_5", hash: { name: "SHA-256" } }; case "ES256": return { name: "ECDSA", namedCurve: "P-256", hash: { name: "SHA-256" } }; default: throw new Error("Invalid alg claim") } } var Uc = globalThis && globalThis.__rest || function (s, e) { var t = {}; for (var i in s) Object.prototype.hasOwnProperty.call(s, i) && e.indexOf(i) < 0 && (t[i] = s[i]); if (s != null && typeof Object.getOwnPropertySymbols == "function") for (var r = 0, i = Object.getOwnPropertySymbols(s); r < i.length; r++)e.indexOf(i[r]) < 0 && Object.prototype.propertyIsEnumerable.call(s, i[r]) && (t[i[r]] = s[i[r]]); return t }; const mt = s => s.msg || s.message || s.error_description || s.error || JSON.stringify(s), zc = [502, 503, 504]; async function no(s) { var e; if (!Cc(s)) throw new Xr(mt(s), 0); if (zc.includes(s.status)) throw new Xr(mt(s), s.status); let t; try { t = await s.json() } catch (n) { throw new Ks(mt(n), n) } let i; const r = Mc(s); if (r && r.getTime() >= Js["2024-01-01"].timestamp && typeof t == "object" && t && typeof t.code == "string" ? i = t.code : typeof t == "object" && t && typeof t.error_code == "string" && (i = t.error_code), i) { if (i === "weak_password") throw new Ys(mt(t), s.status, ((e = t.weak_password) === null || e === void 0 ? void 0 : e.reasons) || []); if (i === "session_not_found") throw new Ye } else if (typeof t == "object" && t && typeof t.weak_password == "object" && t.weak_password && Array.isArray(t.weak_password.reasons) && t.weak_password.reasons.length && t.weak_password.reasons.reduce((n, o) => n && typeof o == "string", !0)) throw new Ys(mt(t), s.status, t.weak_password.reasons); throw new gc(mt(t), s.status || 500, i) } const Bc = (s, e, t, i) => { const r = { method: s, headers: (e == null ? void 0 : e.headers) || {} }; return s === "GET" ? r : (r.headers = Object.assign({ "Content-Type": "application/json;charset=UTF-8" }, e == null ? void 0 : e.headers), r.body = JSON.stringify(i), Object.assign(Object.assign({}, r), t)) }; async function $(s, e, t, i) { var r; const n = Object.assign({}, i == null ? void 0 : i.headers); n[Gr] || (n[Gr] = Js["2024-01-01"].name), (i == null ? void 0 : i.jwt) && (n.Authorization = `Bearer ${i.jwt}`); const o = (r = i == null ? void 0 : i.query) !== null && r !== void 0 ? r : {}; (i == null ? void 0 : i.redirectTo) && (o.redirect_to = i.redirectTo); const a = Object.keys(o).length ? "?" + new URLSearchParams(o).toString() : "", l = await Nc(s, e, t + a, { headers: n, noResolveJson: i == null ? void 0 : i.noResolveJson }, {}, i == null ? void 0 : i.body); return (i == null ? void 0 : i.xform) ? i == null ? void 0 : i.xform(l) : { data: Object.assign({}, l), error: null } } async function Nc(s, e, t, i, r, n) { const o = Bc(e, i, r, n); let a; try { a = await s(t, Object.assign({}, o)) } catch (l) { throw console.error(l), new Xr(mt(l), 0) } if (a.ok || await no(a), i == null ? void 0 : i.noResolveJson) return a; try { return await a.json() } catch (l) { await no(l) } } function Qe(s) { var e; let t = null; Vc(s) && (t = Object.assign({}, s), s.expires_at || (t.expires_at = kc(s.expires_in))); const i = (e = s.user) !== null && e !== void 0 ? e : s; return { data: { session: t, user: i }, error: null } } function so(s) { const e = Qe(s); return !e.error && s.weak_password && typeof s.weak_password == "object" && Array.isArray(s.weak_password.reasons) && s.weak_password.reasons.length && s.weak_password.message && typeof s.weak_password.message == "string" && s.weak_password.reasons.reduce((t, i) => t && typeof i == "string", !0) && (e.data.weak_password = s.weak_password), e } function Ze(s) { var e; return { data: { user: (e = s.user) !== null && e !== void 0 ? e : s }, error: null } } function Fc(s) { return { data: s, error: null } } function Hc(s) { const { action_link: e, email_otp: t, hashed_token: i, redirect_to: r, verification_type: n } = s, o = Uc(s, ["action_link", "email_otp", "hashed_token", "redirect_to", "verification_type"]), a = { action_link: e, email_otp: t, hashed_token: i, redirect_to: r, verification_type: n }, l = Object.assign({}, o); return { data: { properties: a, user: l }, error: null } } function Wc(s) { return s } function Vc(s) { return s.access_token && s.refresh_token && s.expires_in } var Gc = globalThis && globalThis.__rest || function (s, e) { var t = {}; for (var i in s) Object.prototype.hasOwnProperty.call(s, i) && e.indexOf(i) < 0 && (t[i] = s[i]); if (s != null && typeof Object.getOwnPropertySymbols == "function") for (var r = 0, i = Object.getOwnPropertySymbols(s); r < i.length; r++)e.indexOf(i[r]) < 0 && Object.prototype.propertyIsEnumerable.call(s, i[r]) && (t[i[r]] = s[i[r]]); return t }; class Jc { constructor({ url: e = "", headers: t = {}, fetch: i }) { this.url = e, this.headers = t, this.fetch = io(i), this.mfa = { listFactors: this._listFactors.bind(this), deleteFactor: this._deleteFactor.bind(this) } } async signOut(e, t = "global") { try { return await $(this.fetch, "POST", `${this.url}/logout?scope=${t}`, { headers: this.headers, jwt: e, noResolveJson: !0 }), { data: null, error: null } } catch (i) { if (L(i)) return { data: null, error: i }; throw i } } async inviteUserByEmail(e, t = {}) { try { return await $(this.fetch, "POST", `${this.url}/invite`, { body: { email: e, data: t.data }, headers: this.headers, redirectTo: t.redirectTo, xform: Ze }) } catch (i) { if (L(i)) return { data: { user: null }, error: i }; throw i } } async generateLink(e) { try { const { options: t } = e, i = Gc(e, ["options"]), r = Object.assign(Object.assign({}, i), t); return "newEmail" in i && (r.new_email = i == null ? void 0 : i.newEmail, delete r.newEmail), await $(this.fetch, "POST", `${this.url}/admin/generate_link`, { body: r, headers: this.headers, xform: Hc, redirectTo: t == null ? void 0 : t.redirectTo }) } catch (t) { if (L(t)) return { data: { properties: null, user: null }, error: t }; throw t } } async createUser(e) { try { return await $(this.fetch, "POST", `${this.url}/admin/users`, { body: e, headers: this.headers, xform: Ze }) } catch (t) { if (L(t)) return { data: { user: null }, error: t }; throw t } } async listUsers(e) { var t, i, r, n, o, a, l; try { const c = { nextPage: null, lastPage: 0, total: 0 }, h = await $(this.fetch, "GET", `${this.url}/admin/users`, { headers: this.headers, noResolveJson: !0, query: { page: (i = (t = e == null ? void 0 : e.page) === null || t === void 0 ? void 0 : t.toString()) !== null && i !== void 0 ? i : "", per_page: (n = (r = e == null ? void 0 : e.perPage) === null || r === void 0 ? void 0 : r.toString()) !== null && n !== void 0 ? n : "" }, xform: Wc }); if (h.error) throw h.error; const u = await h.json(), d = (o = h.headers.get("x-total-count")) !== null && o !== void 0 ? o : 0, p = (l = (a = h.headers.get("link")) === null || a === void 0 ? void 0 : a.split(",")) !== null && l !== void 0 ? l : []; return p.length > 0 && (p.forEach(g => { const f = parseInt(g.split(";")[0].split("=")[1].substring(0, 1)), m = JSON.parse(g.split(";")[1].split("=")[1]); c[`${m}Page`] = f }), c.total = parseInt(d)), { data: Object.assign(Object.assign({}, u), c), error: null } } catch (c) { if (L(c)) return { data: { users: [] }, error: c }; throw c } } async getUserById(e) { try { return await $(this.fetch, "GET", `${this.url}/admin/users/${e}`, { headers: this.headers, xform: Ze }) } catch (t) { if (L(t)) return { data: { user: null }, error: t }; throw t } } async updateUserById(e, t) { try { return await $(this.fetch, "PUT", `${this.url}/admin/users/${e}`, { body: t, headers: this.headers, xform: Ze }) } catch (i) { if (L(i)) return { data: { user: null }, error: i }; throw i } } async deleteUser(e, t = !1) { try { return await $(this.fetch, "DELETE", `${this.url}/admin/users/${e}`, { headers: this.headers, body: { should_soft_delete: t }, xform: Ze }) } catch (i) { if (L(i)) return { data: { user: null }, error: i }; throw i } } async _listFactors(e) { try { const { data: t, error: i } = await $(this.fetch, "GET", `${this.url}/admin/users/${e.userId}/factors`, { headers: this.headers, xform: r => ({ data: { factors: r }, error: null }) }); return { data: t, error: i } } catch (t) { if (L(t)) return { data: null, error: t }; throw t } } async _deleteFactor(e) { try { return { data: await $(this.fetch, "DELETE", `${this.url}/admin/users/${e.userId}/factors/${e.id}`, { headers: this.headers }), error: null } } catch (t) { if (L(t)) return { data: null, error: t }; throw t } } } const Kc = { getItem: s => di() ? globalThis.localStorage.getItem(s) : null, setItem: (s, e) => { !di() || globalThis.localStorage.setItem(s, e) }, removeItem: s => { !di() || globalThis.localStorage.removeItem(s) } }; function oo(s = {}) { return { getItem: e => s[e] || null, setItem: (e, t) => { s[e] = t }, removeItem: e => { delete s[e] } } } function Xc() { if (typeof globalThis != "object") try { Object.defineProperty(Object.prototype, "__magic__", { get: function () { return this }, configurable: !0 }), __magic__.globalThis = __magic__, delete Object.prototype.__magic__ } catch { typeof self != "undefined" && (self.globalThis = self) } } const Bt = { debug: !!(globalThis && di() && globalThis.localStorage && globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug") === "true") }; class ao extends Error { constructor(e) { super(e); this.isAcquireTimeout = !0 } } class Yc extends ao { } async function Qc(s, e, t) { Bt.debug && console.log("@supabase/gotrue-js: navigatorLock: acquire lock", s, e); const i = new globalThis.AbortController; return e > 0 && setTimeout(() => { i.abort(), Bt.debug && console.log("@supabase/gotrue-js: navigatorLock acquire timed out", s) }, e), await Promise.resolve().then(() => globalThis.navigator.locks.request(s, e === 0 ? { mode: "exclusive", ifAvailable: !0 } : { mode: "exclusive", signal: i.signal }, async r => { if (r) { Bt.debug && console.log("@supabase/gotrue-js: navigatorLock: acquired", s, r.name); try { return await t() } finally { Bt.debug && console.log("@supabase/gotrue-js: navigatorLock: released", s, r.name) } } else { if (e === 0) throw Bt.debug && console.log("@supabase/gotrue-js: navigatorLock: not immediately available", s), new Yc(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`); if (Bt.debug) try { const n = await globalThis.navigator.locks.query(); console.log("@supabase/gotrue-js: Navigator LockManager state", JSON.stringify(n, null, "  ")) } catch (n) { console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state", n) } return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"), await t() } })) } Xc(); const Zc = { url: hc, storageKey: uc, autoRefreshToken: !0, persistSession: !0, detectSessionInUrl: !0, headers: dc, flowType: "implicit", debug: !1, hasCustomAuthorizationHeader: !1 }; async function lo(s, e, t) { return await t() } class fi { constructor(e) { var t, i; this.memoryStorage = null, this.stateChangeEmitters = new Map, this.autoRefreshTicker = null, this.visibilityChangedCallback = null, this.refreshingDeferred = null, this.initializePromise = null, this.detectSessionInUrl = !0, this.hasCustomAuthorizationHeader = !1, this.suppressGetSessionWarning = !1, this.lockAcquired = !1, this.pendingInLock = [], this.broadcastChannel = null, this.logger = console.log, this.instanceID = fi.nextInstanceID, fi.nextInstanceID += 1, this.instanceID > 0 && Ce() && console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key."); const r = Object.assign(Object.assign({}, Zc), e); if (this.logDebugMessages = !!r.debug, typeof r.debug == "function" && (this.logger = r.debug), this.persistSession = r.persistSession, this.storageKey = r.storageKey, this.autoRefreshToken = r.autoRefreshToken, this.admin = new Jc({ url: r.url, headers: r.headers, fetch: r.fetch }), this.url = r.url, this.headers = r.headers, this.fetch = io(r.fetch), this.lock = r.lock || lo, this.detectSessionInUrl = r.detectSessionInUrl, this.flowType = r.flowType, this.hasCustomAuthorizationHeader = r.hasCustomAuthorizationHeader, r.lock ? this.lock = r.lock : Ce() && ((t = globalThis == null ? void 0 : globalThis.navigator) === null || t === void 0 ? void 0 : t.locks) ? this.lock = Qc : this.lock = lo, this.jwks = { keys: [] }, this.jwks_cached_at = Number.MIN_SAFE_INTEGER, this.mfa = { verify: this._verify.bind(this), enroll: this._enroll.bind(this), unenroll: this._unenroll.bind(this), challenge: this._challenge.bind(this), listFactors: this._listFactors.bind(this), challengeAndVerify: this._challengeAndVerify.bind(this), getAuthenticatorAssuranceLevel: this._getAuthenticatorAssuranceLevel.bind(this) }, this.persistSession ? r.storage ? this.storage = r.storage : di() ? this.storage = Kc : (this.memoryStorage = {}, this.storage = oo(this.memoryStorage)) : (this.memoryStorage = {}, this.storage = oo(this.memoryStorage)), Ce() && globalThis.BroadcastChannel && this.persistSession && this.storageKey) { try { this.broadcastChannel = new globalThis.BroadcastChannel(this.storageKey) } catch (n) { console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available", n) } (i = this.broadcastChannel) === null || i === void 0 || i.addEventListener("message", async n => { this._debug("received broadcast notification from other tab or client", n), await this._notifyAllSubscribers(n.data.event, n.data.session, !1) }) } this.initialize() } _debug(...e) { return this.logDebugMessages && this.logger(`GoTrueClient@${this.instanceID} (${Gs}) ${new Date().toISOString()}`, ...e), this } async initialize() { return this.initializePromise ? await this.initializePromise : (this.initializePromise = (async () => await this._acquireLock(-1, async () => await this._initialize()))(), await this.initializePromise) } async _initialize() { var e; try { const t = Pc(window.location.href); let i = "none"; if (this._isImplicitGrantCallback(t) ? i = "implicit" : await this._isPKCECallback(t) && (i = "pkce"), Ce() && this.detectSessionInUrl && i !== "none") { const { data: r, error: n } = await this._getSessionFromURL(t, i); if (n) { if (this._debug("#_initialize()", "error detecting session from URL", n), yc(n)) { const l = (e = n.details) === null || e === void 0 ? void 0 : e.code; if (l === "identity_already_exists" || l === "identity_not_found" || l === "single_identity_not_deletable") return { error: n } } return await this._removeSession(), { error: n } } const { session: o, redirectType: a } = r; return this._debug("#_initialize()", "detected session in URL", o, "redirect type", a), await this._saveSession(o), setTimeout(async () => { a === "recovery" ? await this._notifyAllSubscribers("PASSWORD_RECOVERY", o) : await this._notifyAllSubscribers("SIGNED_IN", o) }, 0), { error: null } } return await this._recoverAndRefresh(), { error: null } } catch (t) { return L(t) ? { error: t } : { error: new Ks("Unexpected error during initialization", t) } } finally { await this._handleVisibilityChange(), this._debug("#_initialize()", "end") } } async signInAnonymously(e) { var t, i, r; try { const n = await $(this.fetch, "POST", `${this.url}/signup`, { headers: this.headers, body: { data: (i = (t = e == null ? void 0 : e.options) === null || t === void 0 ? void 0 : t.data) !== null && i !== void 0 ? i : {}, gotrue_meta_security: { captcha_token: (r = e == null ? void 0 : e.options) === null || r === void 0 ? void 0 : r.captchaToken } }, xform: Qe }), { data: o, error: a } = n; if (a || !o) return { data: { user: null, session: null }, error: a }; const l = o.session, c = o.user; return o.session && (await this._saveSession(o.session), await this._notifyAllSubscribers("SIGNED_IN", l)), { data: { user: c, session: l }, error: null } } catch (n) { if (L(n)) return { data: { user: null, session: null }, error: n }; throw n } } async signUp(e) { var t, i, r; try { let n; if ("email" in e) { const { email: h, password: u, options: d } = e; let p = null, g = null; this.flowType === "pkce" && ([p, g] = await zt(this.storage, this.storageKey)), n = await $(this.fetch, "POST", `${this.url}/signup`, { headers: this.headers, redirectTo: d == null ? void 0 : d.emailRedirectTo, body: { email: h, password: u, data: (t = d == null ? void 0 : d.data) !== null && t !== void 0 ? t : {}, gotrue_meta_security: { captcha_token: d == null ? void 0 : d.captchaToken }, code_challenge: p, code_challenge_method: g }, xform: Qe }) } else if ("phone" in e) { const { phone: h, password: u, options: d } = e; n = await $(this.fetch, "POST", `${this.url}/signup`, { headers: this.headers, body: { phone: h, password: u, data: (i = d == null ? void 0 : d.data) !== null && i !== void 0 ? i : {}, channel: (r = d == null ? void 0 : d.channel) !== null && r !== void 0 ? r : "sms", gotrue_meta_security: { captcha_token: d == null ? void 0 : d.captchaToken } }, xform: Qe }) } else throw new Ni("You must provide either an email or phone number and a password"); const { data: o, error: a } = n; if (a || !o) return { data: { user: null, session: null }, error: a }; const l = o.session, c = o.user; return o.session && (await this._saveSession(o.session), await this._notifyAllSubscribers("SIGNED_IN", l)), { data: { user: c, session: l }, error: null } } catch (n) { if (L(n)) return { data: { user: null, session: null }, error: n }; throw n } } async signInWithPassword(e) { try { let t; if ("email" in e) { const { email: n, password: o, options: a } = e; t = await $(this.fetch, "POST", `${this.url}/token?grant_type=password`, { headers: this.headers, body: { email: n, password: o, gotrue_meta_security: { captcha_token: a == null ? void 0 : a.captchaToken } }, xform: so }) } else if ("phone" in e) { const { phone: n, password: o, options: a } = e; t = await $(this.fetch, "POST", `${this.url}/token?grant_type=password`, { headers: this.headers, body: { phone: n, password: o, gotrue_meta_security: { captcha_token: a == null ? void 0 : a.captchaToken } }, xform: so }) } else throw new Ni("You must provide either an email or phone number and a password"); const { data: i, error: r } = t; return r ? { data: { user: null, session: null }, error: r } : !i || !i.session || !i.user ? { data: { user: null, session: null }, error: new Kr } : (i.session && (await this._saveSession(i.session), await this._notifyAllSubscribers("SIGNED_IN", i.session)), { data: Object.assign({ user: i.user, session: i.session }, i.weak_password ? { weakPassword: i.weak_password } : null), error: r }) } catch (t) { if (L(t)) return { data: { user: null, session: null }, error: t }; throw t } } async signInWithOAuth(e) { var t, i, r, n; return await this._handleProviderSignIn(e.provider, { redirectTo: (t = e.options) === null || t === void 0 ? void 0 : t.redirectTo, scopes: (i = e.options) === null || i === void 0 ? void 0 : i.scopes, queryParams: (r = e.options) === null || r === void 0 ? void 0 : r.queryParams, skipBrowserRedirect: (n = e.options) === null || n === void 0 ? void 0 : n.skipBrowserRedirect }) } async exchangeCodeForSession(e) { return await this.initializePromise, this._acquireLock(-1, async () => this._exchangeCodeForSession(e)) } async _exchangeCodeForSession(e) { const t = await Hi(this.storage, `${this.storageKey}-code-verifier`), [i, r] = (t != null ? t : "").split("/"); try { const { data: n, error: o } = await $(this.fetch, "POST", `${this.url}/token?grant_type=pkce`, { headers: this.headers, body: { auth_code: e, code_verifier: i }, xform: Qe }); if (await Wi(this.storage, `${this.storageKey}-code-verifier`), o) throw o; return !n || !n.session || !n.user ? { data: { user: null, session: null, redirectType: null }, error: new Kr } : (n.session && (await this._saveSession(n.session), await this._notifyAllSubscribers("SIGNED_IN", n.session)), { data: Object.assign(Object.assign({}, n), { redirectType: r != null ? r : null }), error: o }) } catch (n) { if (L(n)) return { data: { user: null, session: null, redirectType: null }, error: n }; throw n } } async signInWithIdToken(e) { try { const { options: t, provider: i, token: r, access_token: n, nonce: o } = e, a = await $(this.fetch, "POST", `${this.url}/token?grant_type=id_token`, { headers: this.headers, body: { provider: i, id_token: r, access_token: n, nonce: o, gotrue_meta_security: { captcha_token: t == null ? void 0 : t.captchaToken } }, xform: Qe }), { data: l, error: c } = a; return c ? { data: { user: null, session: null }, error: c } : !l || !l.session || !l.user ? { data: { user: null, session: null }, error: new Kr } : (l.session && (await this._saveSession(l.session), await this._notifyAllSubscribers("SIGNED_IN", l.session)), { data: l, error: c }) } catch (t) { if (L(t)) return { data: { user: null, session: null }, error: t }; throw t } } async signInWithOtp(e) { var t, i, r, n, o; try { if ("email" in e) { const { email: a, options: l } = e; let c = null, h = null; this.flowType === "pkce" && ([c, h] = await zt(this.storage, this.storageKey)); const { error: u } = await $(this.fetch, "POST", `${this.url}/otp`, { headers: this.headers, body: { email: a, data: (t = l == null ? void 0 : l.data) !== null && t !== void 0 ? t : {}, create_user: (i = l == null ? void 0 : l.shouldCreateUser) !== null && i !== void 0 ? i : !0, gotrue_meta_security: { captcha_token: l == null ? void 0 : l.captchaToken }, code_challenge: c, code_challenge_method: h }, redirectTo: l == null ? void 0 : l.emailRedirectTo }); return { data: { user: null, session: null }, error: u } } if ("phone" in e) { const { phone: a, options: l } = e, { data: c, error: h } = await $(this.fetch, "POST", `${this.url}/otp`, { headers: this.headers, body: { phone: a, data: (r = l == null ? void 0 : l.data) !== null && r !== void 0 ? r : {}, create_user: (n = l == null ? void 0 : l.shouldCreateUser) !== null && n !== void 0 ? n : !0, gotrue_meta_security: { captcha_token: l == null ? void 0 : l.captchaToken }, channel: (o = l == null ? void 0 : l.channel) !== null && o !== void 0 ? o : "sms" } }); return { data: { user: null, session: null, messageId: c == null ? void 0 : c.message_id }, error: h } } throw new Ni("You must provide either an email or phone number.") } catch (a) { if (L(a)) return { data: { user: null, session: null }, error: a }; throw a } } async verifyOtp(e) { var t, i; try { let r, n; "options" in e && (r = (t = e.options) === null || t === void 0 ? void 0 : t.redirectTo, n = (i = e.options) === null || i === void 0 ? void 0 : i.captchaToken); const { data: o, error: a } = await $(this.fetch, "POST", `${this.url}/verify`, { headers: this.headers, body: Object.assign(Object.assign({}, e), { gotrue_meta_security: { captcha_token: n } }), redirectTo: r, xform: Qe }); if (a) throw a; if (!o) throw new Error("An error occurred on token verification."); const l = o.session, c = o.user; return (l == null ? void 0 : l.access_token) && (await this._saveSession(l), await this._notifyAllSubscribers(e.type == "recovery" ? "PASSWORD_RECOVERY" : "SIGNED_IN", l)), { data: { user: c, session: l }, error: null } } catch (r) { if (L(r)) return { data: { user: null, session: null }, error: r }; throw r } } async signInWithSSO(e) { var t, i, r; try { let n = null, o = null; return this.flowType === "pkce" && ([n, o] = await zt(this.storage, this.storageKey)), await $(this.fetch, "POST", `${this.url}/sso`, { body: Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, "providerId" in e ? { provider_id: e.providerId } : null), "domain" in e ? { domain: e.domain } : null), { redirect_to: (i = (t = e.options) === null || t === void 0 ? void 0 : t.redirectTo) !== null && i !== void 0 ? i : void 0 }), ((r = e == null ? void 0 : e.options) === null || r === void 0 ? void 0 : r.captchaToken) ? { gotrue_meta_security: { captcha_token: e.options.captchaToken } } : null), { skip_http_redirect: !0, code_challenge: n, code_challenge_method: o }), headers: this.headers, xform: Fc }) } catch (n) { if (L(n)) return { data: null, error: n }; throw n } } async reauthenticate() { return await this.initializePromise, await this._acquireLock(-1, async () => await this._reauthenticate()) } async _reauthenticate() { try { return await this._useSession(async e => { const { data: { session: t }, error: i } = e; if (i) throw i; if (!t) throw new Ye; const { error: r } = await $(this.fetch, "GET", `${this.url}/reauthenticate`, { headers: this.headers, jwt: t.access_token }); return { data: { user: null, session: null }, error: r } }) } catch (e) { if (L(e)) return { data: { user: null, session: null }, error: e }; throw e } } async resend(e) { try { const t = `${this.url}/resend`; if ("email" in e) { const { email: i, type: r, options: n } = e, { error: o } = await $(this.fetch, "POST", t, { headers: this.headers, body: { email: i, type: r, gotrue_meta_security: { captcha_token: n == null ? void 0 : n.captchaToken } }, redirectTo: n == null ? void 0 : n.emailRedirectTo }); return { data: { user: null, session: null }, error: o } } else if ("phone" in e) { const { phone: i, type: r, options: n } = e, { data: o, error: a } = await $(this.fetch, "POST", t, { headers: this.headers, body: { phone: i, type: r, gotrue_meta_security: { captcha_token: n == null ? void 0 : n.captchaToken } } }); return { data: { user: null, session: null, messageId: o == null ? void 0 : o.message_id }, error: a } } throw new Ni("You must provide either an email or phone number and a type") } catch (t) { if (L(t)) return { data: { user: null, session: null }, error: t }; throw t } } async getSession() { return await this.initializePromise, await this._acquireLock(-1, async () => this._useSession(async t => t)) } async _acquireLock(e, t) { this._debug("#_acquireLock", "begin", e); try { if (this.lockAcquired) { const i = this.pendingInLock.length ? this.pendingInLock[this.pendingInLock.length - 1] : Promise.resolve(), r = (async () => (await i, await t()))(); return this.pendingInLock.push((async () => { try { await r } catch { } })()), r } return await this.lock(`lock:${this.storageKey}`, e, async () => { this._debug("#_acquireLock", "lock acquired for storage key", this.storageKey); try { this.lockAcquired = !0; const i = t(); for (this.pendingInLock.push((async () => { try { await i } catch { } })()), await i; this.pendingInLock.length;) { const r = [...this.pendingInLock]; await Promise.all(r), this.pendingInLock.splice(0, r.length) } return await i } finally { this._debug("#_acquireLock", "lock released for storage key", this.storageKey), this.lockAcquired = !1 } }) } finally { this._debug("#_acquireLock", "end") } } async _useSession(e) { this._debug("#_useSession", "begin"); try { const t = await this.__loadSession(); return await e(t) } finally { this._debug("#_useSession", "end") } } async __loadSession() { this._debug("#__loadSession()", "begin"), this.lockAcquired || this._debug("#__loadSession()", "used outside of an acquired lock!", new Error().stack); try { let e = null; const t = await Hi(this.storage, this.storageKey); if (this._debug("#getSession()", "session from storage", t), t !== null && (this._isValidSession(t) ? e = t : (this._debug("#getSession()", "session from storage is not valid"), await this._removeSession())), !e) return { data: { session: null }, error: null }; const i = e.expires_at ? e.expires_at * 1e3 - Date.now() < Vr : !1; if (this._debug("#__loadSession()", `session has${i ? "" : " not"} expired`, "expires_at", e.expires_at), !i) { if (this.storage.isServer) { let o = this.suppressGetSessionWarning; e = new Proxy(e, { get: (l, c, h) => (!o && c === "user" && (console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."), o = !0, this.suppressGetSessionWarning = !0), Reflect.get(l, c, h)) }) } return { data: { session: e }, error: null } } const { session: r, error: n } = await this._callRefreshToken(e.refresh_token); return n ? { data: { session: null }, error: n } : { data: { session: r }, error: null } } finally { this._debug("#__loadSession()", "end") } } async getUser(e) { return e ? await this._getUser(e) : (await this.initializePromise, await this._acquireLock(-1, async () => await this._getUser())) } async _getUser(e) { try { return e ? await $(this.fetch, "GET", `${this.url}/user`, { headers: this.headers, jwt: e, xform: Ze }) : await this._useSession(async t => { var i, r, n; const { data: o, error: a } = t; if (a) throw a; return !((i = o.session) === null || i === void 0 ? void 0 : i.access_token) && !this.hasCustomAuthorizationHeader ? { data: { user: null }, error: new Ye } : await $(this.fetch, "GET", `${this.url}/user`, { headers: this.headers, jwt: (n = (r = o.session) === null || r === void 0 ? void 0 : r.access_token) !== null && n !== void 0 ? n : void 0, xform: Ze }) }) } catch (t) { if (L(t)) return _c(t) && (await this._removeSession(), await Wi(this.storage, `${this.storageKey}-code-verifier`)), { data: { user: null }, error: t }; throw t } } async updateUser(e, t = {}) { return await this.initializePromise, await this._acquireLock(-1, async () => await this._updateUser(e, t)) } async _updateUser(e, t = {}) { try { return await this._useSession(async i => { const { data: r, error: n } = i; if (n) throw n; if (!r.session) throw new Ye; const o = r.session; let a = null, l = null; this.flowType === "pkce" && e.email != null && ([a, l] = await zt(this.storage, this.storageKey)); const { data: c, error: h } = await $(this.fetch, "PUT", `${this.url}/user`, { headers: this.headers, redirectTo: t == null ? void 0 : t.emailRedirectTo, body: Object.assign(Object.assign({}, e), { code_challenge: a, code_challenge_method: l }), jwt: o.access_token, xform: Ze }); if (h) throw h; return o.user = c.user, await this._saveSession(o), await this._notifyAllSubscribers("USER_UPDATED", o), { data: { user: o.user }, error: null } }) } catch (i) { if (L(i)) return { data: { user: null }, error: i }; throw i } } async setSession(e) { return await this.initializePromise, await this._acquireLock(-1, async () => await this._setSession(e)) } async _setSession(e) { try { if (!e.access_token || !e.refresh_token) throw new Ye; const t = Date.now() / 1e3; let i = t, r = !0, n = null; const { payload: o } = Qr(e.access_token); if (o.exp && (i = o.exp, r = i <= t), r) { const { session: a, error: l } = await this._callRefreshToken(e.refresh_token); if (l) return { data: { user: null, session: null }, error: l }; if (!a) return { data: { user: null, session: null }, error: null }; n = a } else { const { data: a, error: l } = await this._getUser(e.access_token); if (l) throw l; n = { access_token: e.access_token, refresh_token: e.refresh_token, user: a.user, token_type: "bearer", expires_in: i - t, expires_at: i }, await this._saveSession(n), await this._notifyAllSubscribers("SIGNED_IN", n) } return { data: { user: n.user, session: n }, error: null } } catch (t) { if (L(t)) return { data: { session: null, user: null }, error: t }; throw t } } async refreshSession(e) { return await this.initializePromise, await this._acquireLock(-1, async () => await this._refreshSession(e)) } async _refreshSession(e) { try { return await this._useSession(async t => { var i; if (!e) { const { data: o, error: a } = t; if (a) throw a; e = (i = o.session) !== null && i !== void 0 ? i : void 0 } if (!(e == null ? void 0 : e.refresh_token)) throw new Ye; const { session: r, error: n } = await this._callRefreshToken(e.refresh_token); return n ? { data: { user: null, session: null }, error: n } : r ? { data: { user: r.user, session: r }, error: null } : { data: { user: null, session: null }, error: null } }) } catch (t) { if (L(t)) return { data: { user: null, session: null }, error: t }; throw t } } async _getSessionFromURL(e, t) { try { if (!Ce()) throw new Fi("No browser detected."); if (e.error || e.error_description || e.error_code) throw new Fi(e.error_description || "Error in URL with unspecified error_description", { error: e.error || "unspecified_error", code: e.error_code || "unspecified_code" }); switch (t) { case "implicit": if (this.flowType === "pkce") throw new Xs("Not a valid PKCE flow url."); break; case "pkce": if (this.flowType === "implicit") throw new Fi("Not a valid implicit grant flow url."); break; default: }if (t === "pkce") { if (this._debug("#_initialize()", "begin", "is PKCE flow", !0), !e.code) throw new Xs("No code detected."); const { data: y, error: v } = await this._exchangeCodeForSession(e.code); if (v) throw v; const b = new URL(window.location.href); return b.searchParams.delete("code"), window.history.replaceState(window.history.state, "", b.toString()), { data: { session: y.session, redirectType: null }, error: null } } const { provider_token: i, provider_refresh_token: r, access_token: n, refresh_token: o, expires_in: a, expires_at: l, token_type: c } = e; if (!n || !a || !o || !c) throw new Fi("No session defined in URL"); const h = Math.round(Date.now() / 1e3), u = parseInt(a); let d = h + u; l && (d = parseInt(l)); const p = d - h; p * 1e3 <= Ut && console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${u}s`); const g = d - u; h - g >= 120 ? console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale", g, d, h) : h - g < 0 && console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew", g, d, h); const { data: f, error: m } = await this._getUser(n); if (m) throw m; const _ = { provider_token: i, provider_refresh_token: r, access_token: n, expires_in: u, expires_at: d, refresh_token: o, token_type: c, user: f.user }; return window.location.hash = "", this._debug("#_getSessionFromURL()", "clearing window.location.hash"), { data: { session: _, redirectType: e.type }, error: null } } catch (i) { if (L(i)) return { data: { session: null, redirectType: null }, error: i }; throw i } } _isImplicitGrantCallback(e) { return Boolean(e.access_token || e.error_description) } async _isPKCECallback(e) { const t = await Hi(this.storage, `${this.storageKey}-code-verifier`); return !!(e.code && t) } async signOut(e = { scope: "global" }) { return await this.initializePromise, await this._acquireLock(-1, async () => await this._signOut(e)) } async _signOut({ scope: e } = { scope: "global" }) { return await this._useSession(async t => { var i; const { data: r, error: n } = t; if (n) return { error: n }; const o = (i = r.session) === null || i === void 0 ? void 0 : i.access_token; if (o) { const { error: a } = await this.admin.signOut(o, e); if (a && !(mc(a) && (a.status === 404 || a.status === 401 || a.status === 403))) return { error: a } } return e !== "others" && (await this._removeSession(), await Wi(this.storage, `${this.storageKey}-code-verifier`)), { error: null } }) } onAuthStateChange(e) { const t = Ec(), i = { id: t, callback: e, unsubscribe: () => { this._debug("#unsubscribe()", "state change callback with id removed", t), this.stateChangeEmitters.delete(t) } }; return this._debug("#onAuthStateChange()", "registered callback with id", t), this.stateChangeEmitters.set(t, i), (async () => { await this.initializePromise, await this._acquireLock(-1, async () => { this._emitInitialSession(t) }) })(), { data: { subscription: i } } } async _emitInitialSession(e) { return await this._useSession(async t => { var i, r; try { const { data: { session: n }, error: o } = t; if (o) throw o; await ((i = this.stateChangeEmitters.get(e)) === null || i === void 0 ? void 0 : i.callback("INITIAL_SESSION", n)), this._debug("INITIAL_SESSION", "callback id", e, "session", n) } catch (n) { await ((r = this.stateChangeEmitters.get(e)) === null || r === void 0 ? void 0 : r.callback("INITIAL_SESSION", null)), this._debug("INITIAL_SESSION", "callback id", e, "error", n), console.error(n) } }) } async resetPasswordForEmail(e, t = {}) { let i = null, r = null; this.flowType === "pkce" && ([i, r] = await zt(this.storage, this.storageKey, !0)); try { return await $(this.fetch, "POST", `${this.url}/recover`, { body: { email: e, code_challenge: i, code_challenge_method: r, gotrue_meta_security: { captcha_token: t.captchaToken } }, headers: this.headers, redirectTo: t.redirectTo }) } catch (n) { if (L(n)) return { data: null, error: n }; throw n } } async getUserIdentities() { var e; try { const { data: t, error: i } = await this.getUser(); if (i) throw i; return { data: { identities: (e = t.user.identities) !== null && e !== void 0 ? e : [] }, error: null } } catch (t) { if (L(t)) return { data: null, error: t }; throw t } } async linkIdentity(e) { var t; try { const { data: i, error: r } = await this._useSession(async n => { var o, a, l, c, h; const { data: u, error: d } = n; if (d) throw d; const p = await this._getUrlForProvider(`${this.url}/user/identities/authorize`, e.provider, { redirectTo: (o = e.options) === null || o === void 0 ? void 0 : o.redirectTo, scopes: (a = e.options) === null || a === void 0 ? void 0 : a.scopes, queryParams: (l = e.options) === null || l === void 0 ? void 0 : l.queryParams, skipBrowserRedirect: !0 }); return await $(this.fetch, "GET", p, { headers: this.headers, jwt: (h = (c = u.session) === null || c === void 0 ? void 0 : c.access_token) !== null && h !== void 0 ? h : void 0 }) }); if (r) throw r; return Ce() && !((t = e.options) === null || t === void 0 ? void 0 : t.skipBrowserRedirect) && window.location.assign(i == null ? void 0 : i.url), { data: { provider: e.provider, url: i == null ? void 0 : i.url }, error: null } } catch (i) { if (L(i)) return { data: { provider: e.provider, url: null }, error: i }; throw i } } async unlinkIdentity(e) { try { return await this._useSession(async t => { var i, r; const { data: n, error: o } = t; if (o) throw o; return await $(this.fetch, "DELETE", `${this.url}/user/identities/${e.identity_id}`, { headers: this.headers, jwt: (r = (i = n.session) === null || i === void 0 ? void 0 : i.access_token) !== null && r !== void 0 ? r : void 0 }) }) } catch (t) { if (L(t)) return { data: null, error: t }; throw t } } async _refreshAccessToken(e) { const t = `#_refreshAccessToken(${e.substring(0, 5)}...)`; this._debug(t, "begin"); try { const i = Date.now(); return await Ac(async r => (r > 0 && await Oc(200 * Math.pow(2, r - 1)), this._debug(t, "refreshing attempt", r), await $(this.fetch, "POST", `${this.url}/token?grant_type=refresh_token`, { body: { refresh_token: e }, headers: this.headers, xform: Qe })), (r, n) => { const o = 200 * Math.pow(2, r); return n && Yr(n) && Date.now() + o - i < Ut }) } catch (i) { if (this._debug(t, "error", i), L(i)) return { data: { session: null, user: null }, error: i }; throw i } finally { this._debug(t, "end") } } _isValidSession(e) { return typeof e == "object" && e !== null && "access_token" in e && "refresh_token" in e && "expires_at" in e } async _handleProviderSignIn(e, t) { const i = await this._getUrlForProvider(`${this.url}/authorize`, e, { redirectTo: t.redirectTo, scopes: t.scopes, queryParams: t.queryParams }); return this._debug("#_handleProviderSignIn()", "provider", e, "options", t, "url", i), Ce() && !t.skipBrowserRedirect && window.location.assign(i), { data: { provider: e, url: i }, error: null } } async _recoverAndRefresh() { var e; const t = "#_recoverAndRefresh()"; this._debug(t, "begin"); try { const i = await Hi(this.storage, this.storageKey); if (this._debug(t, "session from storage", i), !this._isValidSession(i)) { this._debug(t, "session is not valid"), i !== null && await this._removeSession(); return } const r = ((e = i.expires_at) !== null && e !== void 0 ? e : 1 / 0) * 1e3 - Date.now() < Vr; if (this._debug(t, `session has${r ? "" : " not"} expired with margin of ${Vr}s`), r) { if (this.autoRefreshToken && i.refresh_token) { const { error: n } = await this._callRefreshToken(i.refresh_token); n && (console.error(n), Yr(n) || (this._debug(t, "refresh failed with a non-retryable error, removing the session", n), await this._removeSession())) } } else await this._notifyAllSubscribers("SIGNED_IN", i) } catch (i) { this._debug(t, "error", i), console.error(i); return } finally { this._debug(t, "end") } } async _callRefreshToken(e) { var t, i; if (!e) throw new Ye; if (this.refreshingDeferred) return this.refreshingDeferred.promise; const r = `#_callRefreshToken(${e.substring(0, 5)}...)`; this._debug(r, "begin"); try { this.refreshingDeferred = new Vi; const { data: n, error: o } = await this._refreshAccessToken(e); if (o) throw o; if (!n.session) throw new Ye; await this._saveSession(n.session), await this._notifyAllSubscribers("TOKEN_REFRESHED", n.session); const a = { session: n.session, error: null }; return this.refreshingDeferred.resolve(a), a } catch (n) { if (this._debug(r, "error", n), L(n)) { const o = { session: null, error: n }; return Yr(n) || await this._removeSession(), (t = this.refreshingDeferred) === null || t === void 0 || t.resolve(o), o } throw (i = this.refreshingDeferred) === null || i === void 0 || i.reject(n), n } finally { this.refreshingDeferred = null, this._debug(r, "end") } } async _notifyAllSubscribers(e, t, i = !0) { const r = `#_notifyAllSubscribers(${e})`; this._debug(r, "begin", t, `broadcast = ${i}`); try { this.broadcastChannel && i && this.broadcastChannel.postMessage({ event: e, session: t }); const n = [], o = Array.from(this.stateChangeEmitters.values()).map(async a => { try { await a.callback(e, t) } catch (l) { n.push(l) } }); if (await Promise.all(o), n.length > 0) { for (let a = 0; a < n.length; a += 1)console.error(n[a]); throw n[0] } } finally { this._debug(r, "end") } } async _saveSession(e) { this._debug("#_saveSession()", e), this.suppressGetSessionWarning = !0, await ro(this.storage, this.storageKey, e) } async _removeSession() { this._debug("#_removeSession()"), await Wi(this.storage, this.storageKey), await this._notifyAllSubscribers("SIGNED_OUT", null) } _removeVisibilityChangedCallback() { this._debug("#_removeVisibilityChangedCallback()"); const e = this.visibilityChangedCallback; this.visibilityChangedCallback = null; try { e && Ce() && (window == null ? void 0 : window.removeEventListener) && window.removeEventListener("visibilitychange", e) } catch (t) { console.error("removing visibilitychange callback failed", t) } } async _startAutoRefresh() { await this._stopAutoRefresh(), this._debug("#_startAutoRefresh()"); const e = setInterval(() => this._autoRefreshTokenTick(), Ut); this.autoRefreshTicker = e, e && typeof e == "object" && typeof e.unref == "function" ? e.unref() : typeof Deno != "undefined" && typeof Deno.unrefTimer == "function" && Deno.unrefTimer(e), setTimeout(async () => { await this.initializePromise, await this._autoRefreshTokenTick() }, 0) } async _stopAutoRefresh() { this._debug("#_stopAutoRefresh()"); const e = this.autoRefreshTicker; this.autoRefreshTicker = null, e && clearInterval(e) } async startAutoRefresh() { this._removeVisibilityChangedCallback(), await this._startAutoRefresh() } async stopAutoRefresh() { this._removeVisibilityChangedCallback(), await this._stopAutoRefresh() } async _autoRefreshTokenTick() { this._debug("#_autoRefreshTokenTick()", "begin"); try { await this._acquireLock(0, async () => { try { const e = Date.now(); try { return await this._useSession(async t => { const { data: { session: i } } = t; if (!i || !i.refresh_token || !i.expires_at) { this._debug("#_autoRefreshTokenTick()", "no session"); return } const r = Math.floor((i.expires_at * 1e3 - e) / Ut); this._debug("#_autoRefreshTokenTick()", `access token expires in ${r} ticks, a tick lasts ${Ut}ms, refresh threshold is ${Wr} ticks`), r <= Wr && await this._callRefreshToken(i.refresh_token) }) } catch (t) { console.error("Auto refresh tick failed with error. This is likely a transient error.", t) } } finally { this._debug("#_autoRefreshTokenTick()", "end") } }) } catch (e) { if (e.isAcquireTimeout || e instanceof ao) this._debug("auto refresh token tick lock not available"); else throw e } } async _handleVisibilityChange() { if (this._debug("#_handleVisibilityChange()"), !Ce() || !(window == null ? void 0 : window.addEventListener)) return this.autoRefreshToken && this.startAutoRefresh(), !1; try { this.visibilityChangedCallback = async () => await this._onVisibilityChanged(!1), window == null || window.addEventListener("visibilitychange", this.visibilityChangedCallback), await this._onVisibilityChanged(!0) } catch (e) { console.error("_handleVisibilityChange", e) } } async _onVisibilityChanged(e) { const t = `#_onVisibilityChanged(${e})`; this._debug(t, "visibilityState", document.visibilityState), document.visibilityState === "visible" ? (this.autoRefreshToken && this._startAutoRefresh(), e || (await this.initializePromise, await this._acquireLock(-1, async () => { if (document.visibilityState !== "visible") { this._debug(t, "acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"); return } await this._recoverAndRefresh() }))) : document.visibilityState === "hidden" && this.autoRefreshToken && this._stopAutoRefresh() } async _getUrlForProvider(e, t, i) { const r = [`provider=${encodeURIComponent(t)}`]; if ((i == null ? void 0 : i.redirectTo) && r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`), (i == null ? void 0 : i.scopes) && r.push(`scopes=${encodeURIComponent(i.scopes)}`), this.flowType === "pkce") { const [n, o] = await zt(this.storage, this.storageKey), a = new URLSearchParams({ code_challenge: `${encodeURIComponent(n)}`, code_challenge_method: `${encodeURIComponent(o)}` }); r.push(a.toString()) } if (i == null ? void 0 : i.queryParams) { const n = new URLSearchParams(i.queryParams); r.push(n.toString()) } return (i == null ? void 0 : i.skipBrowserRedirect) && r.push(`skip_http_redirect=${i.skipBrowserRedirect}`), `${e}?${r.join("&")}` } async _unenroll(e) { try { return await this._useSession(async t => { var i; const { data: r, error: n } = t; return n ? { data: null, error: n } : await $(this.fetch, "DELETE", `${this.url}/factors/${e.factorId}`, { headers: this.headers, jwt: (i = r == null ? void 0 : r.session) === null || i === void 0 ? void 0 : i.access_token }) }) } catch (t) { if (L(t)) return { data: null, error: t }; throw t } } async _enroll(e) { try { return await this._useSession(async t => { var i, r; const { data: n, error: o } = t; if (o) return { data: null, error: o }; const a = Object.assign({ friendly_name: e.friendlyName, factor_type: e.factorType }, e.factorType === "phone" ? { phone: e.phone } : { issuer: e.issuer }), { data: l, error: c } = await $(this.fetch, "POST", `${this.url}/factors`, { body: a, headers: this.headers, jwt: (i = n == null ? void 0 : n.session) === null || i === void 0 ? void 0 : i.access_token }); return c ? { data: null, error: c } : (e.factorType === "totp" && ((r = l == null ? void 0 : l.totp) === null || r === void 0 ? void 0 : r.qr_code) && (l.totp.qr_code = `data:image/svg+xml;utf-8,${l.totp.qr_code}`), { data: l, error: null }) }) } catch (t) { if (L(t)) return { data: null, error: t }; throw t } } async _verify(e) { return this._acquireLock(-1, async () => { try { return await this._useSession(async t => { var i; const { data: r, error: n } = t; if (n) return { data: null, error: n }; const { data: o, error: a } = await $(this.fetch, "POST", `${this.url}/factors/${e.factorId}/verify`, { body: { code: e.code, challenge_id: e.challengeId }, headers: this.headers, jwt: (i = r == null ? void 0 : r.session) === null || i === void 0 ? void 0 : i.access_token }); return a ? { data: null, error: a } : (await this._saveSession(Object.assign({ expires_at: Math.round(Date.now() / 1e3) + o.expires_in }, o)), await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED", o), { data: o, error: a }) }) } catch (t) { if (L(t)) return { data: null, error: t }; throw t } }) } async _challenge(e) { return this._acquireLock(-1, async () => { try { return await this._useSession(async t => { var i; const { data: r, error: n } = t; return n ? { data: null, error: n } : await $(this.fetch, "POST", `${this.url}/factors/${e.factorId}/challenge`, { body: { channel: e.channel }, headers: this.headers, jwt: (i = r == null ? void 0 : r.session) === null || i === void 0 ? void 0 : i.access_token }) }) } catch (t) { if (L(t)) return { data: null, error: t }; throw t } }) } async _challengeAndVerify(e) { const { data: t, error: i } = await this._challenge({ factorId: e.factorId }); return i ? { data: null, error: i } : await this._verify({ factorId: e.factorId, challengeId: t.id, code: e.code }) } async _listFactors() { const { data: { user: e }, error: t } = await this.getUser(); if (t) return { data: null, error: t }; const i = (e == null ? void 0 : e.factors) || [], r = i.filter(o => o.factor_type === "totp" && o.status === "verified"), n = i.filter(o => o.factor_type === "phone" && o.status === "verified"); return { data: { all: i, totp: r, phone: n }, error: null } } async _getAuthenticatorAssuranceLevel() { return this._acquireLock(-1, async () => await this._useSession(async e => { var t, i; const { data: { session: r }, error: n } = e; if (n) return { data: null, error: n }; if (!r) return { data: { currentLevel: null, nextLevel: null, currentAuthenticationMethods: [] }, error: null }; const { payload: o } = Qr(r.access_token); let a = null; o.aal && (a = o.aal); let l = a; ((i = (t = r.user.factors) === null || t === void 0 ? void 0 : t.filter(u => u.status === "verified")) !== null && i !== void 0 ? i : []).length > 0 && (l = "aal2"); const h = o.amr || []; return { data: { currentLevel: a, nextLevel: l, currentAuthenticationMethods: h }, error: null } })) } async fetchJwk(e, t = { keys: [] }) { let i = t.keys.find(o => o.kid === e); if (i || (i = this.jwks.keys.find(o => o.kid === e), i && this.jwks_cached_at + pc > Date.now())) return i; const { data: r, error: n } = await $(this.fetch, "GET", `${this.url}/.well-known/jwks.json`, { headers: this.headers }); if (n) throw n; if (!r.keys || r.keys.length === 0) throw new ui("JWKS is empty"); if (this.jwks = r, this.jwks_cached_at = Date.now(), i = r.keys.find(o => o.kid === e), !i) throw new ui("No matching signing key found in JWKS"); return i } async getClaims(e, t = { keys: [] }) { try { let i = e; if (!i) { const { data: p, error: g } = await this.getSession(); if (g || !p.session) return { data: null, error: g }; i = p.session.access_token } const { header: r, payload: n, signature: o, raw: { header: a, payload: l } } = Qr(i); if (Dc(n.exp), !r.kid || r.alg === "HS256" || !("crypto" in globalThis && "subtle" in globalThis.crypto)) { const { error: p } = await this.getUser(i); if (p) throw p; return { data: { claims: n, header: r, signature: o }, error: null } } const c = qc(r.alg), h = await this.fetchJwk(r.kid, t), u = await crypto.subtle.importKey("jwk", h, c, !0, ["verify"]); if (!await crypto.subtle.verify(c, u, o, Tc(`${a}.${l}`))) throw new ui("Invalid JWT signature"); return { data: { claims: n, header: r, signature: o }, error: null } } catch (i) { if (L(i)) return { data: null, error: i }; throw i } } } fi.nextInstanceID = 0; const eh = fi; class th extends eh { constructor(e) { super(e) } } var ih = globalThis && globalThis.__awaiter || function (s, e, t, i) { function r(n) { return n instanceof t ? n : new t(function (o) { o(n) }) } return new (t || (t = Promise))(function (n, o) { function a(h) { try { c(i.next(h)) } catch (u) { o(u) } } function l(h) { try { c(i.throw(h)) } catch (u) { o(u) } } function c(h) { h.done ? n(h.value) : r(h.value).then(a, l) } c((i = i.apply(s, e || [])).next()) }) }; class rh { constructor(e, t, i) { var r, n, o; if (this.supabaseUrl = e, this.supabaseKey = t, !e) throw new Error("supabaseUrl is required."); if (!t) throw new Error("supabaseKey is required."); const a = lc(e); this.realtimeUrl = `${a}/realtime/v1`.replace(/^http/i, "ws"), this.authUrl = `${a}/auth/v1`, this.storageUrl = `${a}/storage/v1`, this.functionsUrl = `${a}/functions/v1`; const l = `sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`, c = { db: ec, realtime: ic, auth: Object.assign(Object.assign({}, tc), { storageKey: l }), global: Zl }, h = cc(i != null ? i : {}, c); this.storageKey = (r = h.auth.storageKey) !== null && r !== void 0 ? r : "", this.headers = (n = h.global.headers) !== null && n !== void 0 ? n : {}, h.accessToken ? (this.accessToken = h.accessToken, this.auth = new Proxy({}, { get: (u, d) => { throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`) } })) : this.auth = this._initSupabaseAuthClient((o = h.auth) !== null && o !== void 0 ? o : {}, this.headers, h.global.fetch), this.fetch = oc(t, this._getAccessToken.bind(this), h.global.fetch), this.realtime = this._initRealtimeClient(Object.assign({ headers: this.headers, accessToken: this._getAccessToken.bind(this) }, h.realtime)), this.rest = new Tl(`${a}/rest/v1`, { headers: this.headers, schema: h.db.schema, fetch: this.fetch }), h.accessToken || this._listenForAuthEvents() } get functions() { return new el(this.functionsUrl, { headers: this.headers, customFetch: this.fetch }) } get storage() { return new Yl(this.storageUrl, this.headers, this.fetch) } from(e) { return this.rest.from(e) } schema(e) { return this.rest.schema(e) } rpc(e, t = {}, i = {}) { return this.rest.rpc(e, t, i) } channel(e, t = { config: {} }) { return this.realtime.channel(e, t) } getChannels() { return this.realtime.getChannels() } removeChannel(e) { return this.realtime.removeChannel(e) } removeAllChannels() { return this.realtime.removeAllChannels() } _getAccessToken() { var e, t; return ih(this, void 0, void 0, function* () { if (this.accessToken) return yield this.accessToken(); const { data: i } = yield this.auth.getSession(); return (t = (e = i.session) === null || e === void 0 ? void 0 : e.access_token) !== null && t !== void 0 ? t : null }) } _initSupabaseAuthClient({ autoRefreshToken: e, persistSession: t, detectSessionInUrl: i, storage: r, storageKey: n, flowType: o, lock: a, debug: l }, c, h) { const u = { Authorization: `Bearer ${this.supabaseKey}`, apikey: `${this.supabaseKey}` }; return new th({ url: this.authUrl, headers: Object.assign(Object.assign({}, u), c), storageKey: n, autoRefreshToken: e, persistSession: t, detectSessionInUrl: i, storage: r, flowType: o, lock: a, debug: l, fetch: h, hasCustomAuthorizationHeader: "Authorization" in this.headers }) } _initRealtimeClient(e) { return new ql(this.realtimeUrl, Object.assign(Object.assign({}, e), { params: Object.assign({ apikey: this.supabaseKey }, e == null ? void 0 : e.params) })) } _listenForAuthEvents() { return this.auth.onAuthStateChange((t, i) => { this._handleTokenChanged(t, "CLIENT", i == null ? void 0 : i.access_token) }) } _handleTokenChanged(e, t, i) { (e === "TOKEN_REFRESHED" || e === "SIGNED_IN") && this.changedAccessToken !== i ? this.changedAccessToken = i : e === "SIGNED_OUT" && (this.realtime.setAuth(), t == "STORAGE" && this.auth.signOut(), this.changedAccessToken = void 0) } } const Zr = ((s, e, t) => new rh(s, e, t))("https://lkjbwwgjaxbxltopefax.supabase.co", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxramJ3d2dqYXhieGx0b3BlZmF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyMTgwMzIsImV4cCI6MjA2Mjc5NDAzMn0.g8t2OfOpz6irjCyOKpd1jNSPo6W5ypCRcdiWl4vAnWU"); let xe = nh(), en, Gi = !1; function nh() { return `anon${Math.floor(1e4 + Math.random() * 9e4)}` } function co() { const s = document.querySelector(".welcome"); s && (s.textContent = `Welcome, ${xe} !`) } function ho() { document.querySelectorAll(".commands_item").forEach(i => { const r = i.getAttribute("data-command"), n = i.querySelector(".is--answer"); r && n && r.toLowerCase() !== "help" && (i.getAttribute("data-response") || i.setAttribute("data-response", n.innerHTML)) }); const e = document.querySelector(".commands_call"), t = document.querySelector(".commands_list"); e && (e.style.display = "none"), t && (t.style.display = "none") } function uo(s, e) {
    const t = s.toLowerCase(), i = t.split(" ")[0]; if (!["say", "user"].includes(i)) { const o = document.createElement("span"); o.classList.add("is-answer"), o.innerHTML = `&gt; ${s}`, e.appendChild(o) } if (t === "help") { const o = document.querySelector(".commands_list").querySelectorAll(".commands_item"); o.forEach((a, l) => { setTimeout(() => { const c = document.createElement("div"); c.classList.add("is-answer", "commands_item"), c.style.display = "flex", c.innerHTML = `&gt;&nbsp;${a.innerHTML}`, e.appendChild(c), e.scrollTop = e.scrollHeight, l === o.length - 1 && Te() }, l * 100) }); return } if (t.startsWith("user ")) { const o = s.slice(5).trim(); if (o) { xe = o, localStorage.setItem("username", o); const a = document.querySelector(".input"); a && (a.placeholder = ""), setTimeout(() => { const l = document.createElement("span"); l.classList.add("is-answer"), l.innerHTML = `&gt; Welcome, ${xe} !`, e.appendChild(l), e.scrollTop = e.scrollHeight, setTimeout(() => { const c = document.createElement("span"); c.classList.add("is-answer"), c.innerHTML = "&gt; Here is a list of available commands:", e.appendChild(c), e.scrollTop = e.scrollHeight; const h = document.querySelector(".commands_list").querySelectorAll(".commands_item"); h.forEach((u, d) => { setTimeout(() => { const p = document.createElement("div"); p.classList.add("is-answer", "commands_item"), p.style.display = "flex", p.innerHTML = `&gt;&nbsp;${u.innerHTML}`, e.appendChild(p), e.scrollTop = e.scrollHeight, d === h.length - 1 && (Te(), Gi || (po(), Gi = !0)) }, d * 100 + 100) }) }, 400) }, 100) } else { const a = document.createElement("span"); a.classList.add("is-answer"), a.innerHTML = '&gt; Veuillez entrer un nom apr\xE8s "user"', e.appendChild(a), e.scrollTop = e.scrollHeight, Te() } return } if (t.startsWith("say ")) { const o = s.slice(4).trim(); if (xe = localStorage.getItem("username") || xe, !xe || !o) return; Zr.from("messages").insert([{ user: xe, content: o }]).then(({ error: l }) => { if (l) { const c = document.createElement("div"); c.classList.add("is-answer"), c.textContent = "> Message not sent.", e.appendChild(c) } }); const a = 280; if (o.length > a) { const l = document.createElement("div"); l.classList.add("is-answer"), l.textContent = `> Message too long (${o.length}/${a}). Limit is ${a} characters.`, e.appendChild(l), e.scrollTop = e.scrollHeight; return } return } if (t === "serp") { const o = document.querySelector(".is--ascii"); if (o) { setTimeout(() => { const a = document.createElement("span"); a.classList.add("is-answer"), a.innerHTML = `&gt; ${o.innerHTML}`, e.appendChild(a), e.scrollTop = e.scrollHeight, Te() }, 100); return } } const n = document.querySelector(`.commands_item[data-command="${s}"]`); if (n) {
      const o = n.getAttribute("data-response"); if (o) {
        if (s === "26-7") {
          const l = o.split("---").map(u => u.trim()).filter(Boolean), h = l[Math.floor(Math.random() * l.length)].split(`
`); h.forEach((u, d) => { setTimeout(() => { const p = document.createElement("span"); p.classList.add("is-answer"); const g = u.replace(/\[name\]/gi, xe); p.innerHTML = `&gt; ${g}`, e.appendChild(p), e.scrollTop = e.scrollHeight, d === h.length - 1 && Te() }, d * 100) }); return
        } const a = o.split(`
`); a.forEach((l, c) => { setTimeout(() => { const h = document.createElement("span"); h.classList.add("is-answer"); const u = l.replace(/\[name\]/gi, xe); h.innerHTML = `&gt; ${u}`, e.appendChild(h), e.scrollTop = e.scrollHeight, c === a.length - 1 && Te() }, c * 100) })
      }
    } else setTimeout(() => { const o = document.createElement("span"); o.classList.add("is-answer"), o.innerHTML = `&gt; Command not found: "${s}"`, e.appendChild(o), e.scrollTop = e.scrollHeight, Te() }, 100)
  } function fo(s) { const e = window.getComputedStyle(s), t = e.fontSize, i = e.lineHeight === "normal" ? `${parseInt(t) * 1.2}px` : e.lineHeight, r = s.cloneNode(!0); r.style.position = "absolute", r.style.visibility = "hidden", r.style.width = e.width, r.style.font = e.font, r.style.letterSpacing = e.letterSpacing, r.style.wordSpacing = e.wordSpacing, r.style.lineHeight = i, r.style.maxWidth = e.maxWidth, r.style.fontSize = t, document.body.appendChild(r); const n = r.getBoundingClientRect().height, o = parseFloat(i), a = Math.floor(n / o); return document.body.removeChild(r), a } function _t() { const s = document.querySelector("#target"), e = document.querySelector(".chevrons"); if (s && e) try { const t = fo(s); e.innerHTML = ""; for (let i = 0; i < t; i++) { const r = document.createElement("span"); r.classList.add("chevron"), r.innerHTML = "&gt;", e.appendChild(r) } setTimeout(() => { const i = s.getBoundingClientRect(), r = e.getBoundingClientRect(); if (i.height > r.height) { const n = window.getComputedStyle(e.querySelector(".chevron")), o = parseFloat(n.lineHeight === "normal" ? n.fontSize : n.lineHeight), a = Math.ceil((i.height - r.height) / o); for (let l = 0; l < a; l++) { const c = document.createElement("span"); c.classList.add("chevron"), c.innerHTML = "&gt;", e.appendChild(c) } } }, 50) } catch (t) { console.error("Erreur lors de la mise \xE0 jour des chevrons:", t) } document.querySelectorAll(".is-manifesto-text").forEach(t => { var r; const i = (r = t.closest(".manifesto_inner")) == null ? void 0 : r.querySelector(".chevrons"); if (t && i) try { const n = fo(t); i.innerHTML = ""; for (let o = 0; o < n; o++) { const a = document.createElement("span"); a.classList.add("chevron"), a.innerHTML = "&gt;", i.appendChild(a) } setTimeout(() => { const o = t.getBoundingClientRect(), a = i.getBoundingClientRect(); if (o.height > a.height) { const l = window.getComputedStyle(i.querySelector(".chevron")), c = parseFloat(l.lineHeight === "normal" ? l.fontSize : l.lineHeight), h = Math.ceil((o.height - a.height) / c); for (let u = 0; u < h; u++) { const d = document.createElement("span"); d.classList.add("chevron"), d.innerHTML = "&gt;", i.appendChild(d) } } }, 50) } catch (n) { console.error("Erreur lors de la mise \xE0 jour des chevrons (manifesto):", n) } }) } function Te() { document.querySelectorAll(".is-terminal-text").forEach(s => { const r = s.innerHTML.split("<br>").map(n => n.replace(/&gt;\s*/, "")).map(n => { const o = n.match(/^\s*/)[0], a = n.trim(); return `${o}&gt; ${a}` }); s.innerHTML = r.join("<br>") }), typeof en == "function" && en() } function sh(s) { const e = localStorage.getItem("username"); if (!e) return; const t = document.createElement("span"); t.classList.add("is-answer"), t.innerHTML = `&gt; user ${e}`, s.appendChild(t); const i = document.createElement("span"); i.classList.add("is-answer"), i.innerHTML = `&gt; Welcome, ${e} !`, s.appendChild(i); const r = document.createElement("span"); r.classList.add("is-answer"), r.innerHTML = "&gt; Here is a list of available commands:", s.appendChild(r), document.querySelector(".commands_list").querySelectorAll(".commands_item").forEach(a => { const l = document.createElement("div"); l.classList.add("is-answer", "commands_item"), l.style.display = "flex", l.innerHTML = `&gt;&nbsp;${a.innerHTML}`, s.appendChild(l) }), Gi || (po(), Gi = !0), Te(); const o = document.querySelector(".input"); o && (o.placeholder = "") } function oh() { ho(), co(); const s = document.querySelector(".input"), e = document.querySelector(".terminal_inner"), t = document.querySelector(".button"), i = localStorage.getItem("username"); i ? (xe = i, s.placeholder = "", sh(e)) : s.placeholder = 'Enter "user" + your name', s && e && t && (s.addEventListener("keydown", function (a) { if (a.key === "Enter") { const l = s.value.trim().toLowerCase(); l && (uo(l, e), s.value = "") } }), t.addEventListener("click", function () { const a = s.value.trim().toLowerCase(); a && (uo(a, e), s.value = "") })), en = _t, _t(); const r = new ResizeObserver(() => { _t() }), n = document.querySelector(".terminal_inner"); n && r.observe(n); const o = document.querySelector("#target"); o && r.observe(o), Te(), ah() } async function po() { const s = document.querySelector(".terminal_inner"), { data: e, error: t } = await Zr.from("messages").select("*").order("created_at", { ascending: !1 }).limit(10); if (t) { const r = document.createElement("div"); r.classList.add("is-answer"), r.textContent = "Erreur lors du chargement des messages.", s.appendChild(r), s.scrollTop = s.scrollHeight; return } (e || []).reverse().forEach(r => { const n = document.createElement("div"); n.classList.add("is-answer"), n.innerHTML = `&gt; [${r.user}] ${r.content}`, s.appendChild(n), s.scrollTop = s.scrollHeight }) } function ah() { Zr.channel("public:messages").on("postgres_changes", { event: "INSERT", schema: "public", table: "messages" }, s => { const e = s.new, t = document.querySelector(".terminal_inner"), i = document.createElement("div"); i.classList.add("is-answer"), e.user === xe && i.classList.add("from-me"), i.innerHTML = `&gt; [${e.user}] ${e.content}`, t.appendChild(i), t.scrollTop = t.scrollHeight }).subscribe() } function go(s, e) { for (var t = 0; t < e.length; t++) { var i = e[t]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(s, typeof (r = function (n, o) { if (typeof n != "object" || n === null) return n; var a = n[Symbol.toPrimitive]; if (a !== void 0) { var l = a.call(n, "string"); if (typeof l != "object") return l; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(n) }(i.key)) == "symbol" ? r : String(r), i) } var r } function tn(s, e, t) { return e && go(s.prototype, e), t && go(s, t), Object.defineProperty(s, "prototype", { writable: !1 }), s } function Oe() { return Oe = Object.assign ? Object.assign.bind() : function (s) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (s[i] = t[i]) } return s }, Oe.apply(this, arguments) } function Ji(s, e) { s.prototype = Object.create(e.prototype), s.prototype.constructor = s, pi(s, e) } function rn(s) { return rn = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, rn(s) } function pi(s, e) { return pi = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, i) { return t.__proto__ = i, t }, pi(s, e) } function lh() { if (typeof Reflect == "undefined" || !Reflect.construct || Reflect.construct.sham) return !1; if (typeof Proxy == "function") return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () { })), !0 } catch { return !1 } } function nn(s, e, t) { return nn = lh() ? Reflect.construct.bind() : function (i, r, n) { var o = [null]; o.push.apply(o, r); var a = new (Function.bind.apply(i, o)); return n && pi(a, n.prototype), a }, nn.apply(null, arguments) } function sn(s) { var e = typeof Map == "function" ? new Map : void 0; return sn = function (t) { if (t === null || Function.toString.call(t).indexOf("[native code]") === -1) return t; if (typeof t != "function") throw new TypeError("Super expression must either be null or a function"); if (e !== void 0) { if (e.has(t)) return e.get(t); e.set(t, i) } function i() { return nn(t, arguments, rn(this).constructor) } return i.prototype = Object.create(t.prototype, { constructor: { value: i, enumerable: !1, writable: !0, configurable: !0 } }), pi(i, t) }, sn(s) } function ch(s) { if (s === void 0) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return s } var et, hh = function () { this.before = void 0, this.beforeLeave = void 0, this.leave = void 0, this.afterLeave = void 0, this.beforeEnter = void 0, this.enter = void 0, this.afterEnter = void 0, this.after = void 0 }; (function (s) { s[s.off = 0] = "off", s[s.error = 1] = "error", s[s.warning = 2] = "warning", s[s.info = 3] = "info", s[s.debug = 4] = "debug" })(et || (et = {})); var mo = et.off, yt = function () { function s(t) { this.t = void 0, this.t = t } s.getLevel = function () { return mo }, s.setLevel = function (t) { return mo = et[t] }; var e = s.prototype; return e.error = function () { this.i(console.error, et.error, [].slice.call(arguments)) }, e.warn = function () { this.i(console.warn, et.warning, [].slice.call(arguments)) }, e.info = function () { this.i(console.info, et.info, [].slice.call(arguments)) }, e.debug = function () { this.i(console.log, et.debug, [].slice.call(arguments)) }, e.i = function (t, i, r) { i <= s.getLevel() && t.apply(console, ["[" + this.t + "] "].concat(r)) }, s }(); function Nt(s) { return s.replace(/([.+*?=^!:${}()[\]|/\\])/g, "\\$1") } function _o(s) { return s && s.sensitive ? "" : "i" } var Ae = { container: "container", history: "history", namespace: "namespace", prefix: "data-barba", prevent: "prevent", wrapper: "wrapper" }, vt = new (function () { function s() { this.o = Ae, this.u = void 0, this.h = { after: null, before: null, parent: null } } var e = s.prototype; return e.toString = function (t) { return t.outerHTML }, e.toDocument = function (t) { return this.u || (this.u = new DOMParser), this.u.parseFromString(t, "text/html") }, e.toElement = function (t) { var i = document.createElement("div"); return i.innerHTML = t, i }, e.getHtml = function (t) { return t === void 0 && (t = document), this.toString(t.documentElement) }, e.getWrapper = function (t) { return t === void 0 && (t = document), t.querySelector("[" + this.o.prefix + '="' + this.o.wrapper + '"]') }, e.getContainer = function (t) { return t === void 0 && (t = document), t.querySelector("[" + this.o.prefix + '="' + this.o.container + '"]') }, e.removeContainer = function (t) { document.body.contains(t) && (this.v(t), t.parentNode.removeChild(t)) }, e.addContainer = function (t, i) { var r = this.getContainer() || this.h.before; r ? this.l(t, r) : this.h.after ? this.h.after.parentNode.insertBefore(t, this.h.after) : this.h.parent ? this.h.parent.appendChild(t) : i.appendChild(t) }, e.getSibling = function () { return this.h }, e.getNamespace = function (t) { t === void 0 && (t = document); var i = t.querySelector("[" + this.o.prefix + "-" + this.o.namespace + "]"); return i ? i.getAttribute(this.o.prefix + "-" + this.o.namespace) : null }, e.getHref = function (t) { if (t.tagName && t.tagName.toLowerCase() === "a") { if (typeof t.href == "string") return t.href; var i = t.getAttribute("href") || t.getAttribute("xlink:href"); if (i) return this.resolveUrl(i.baseVal || i) } return null }, e.resolveUrl = function () { var t = [].slice.call(arguments).length; if (t === 0) throw new Error("resolveUrl requires at least one argument; got none."); var i = document.createElement("base"); if (i.href = arguments[0], t === 1) return i.href; var r = document.getElementsByTagName("head")[0]; r.insertBefore(i, r.firstChild); for (var n, o = document.createElement("a"), a = 1; a < t; a++)o.href = arguments[a], i.href = n = o.href; return r.removeChild(i), n }, e.l = function (t, i) { i.parentNode.insertBefore(t, i.nextSibling) }, e.v = function (t) { return this.h = { after: t.nextElementSibling, before: t.previousElementSibling, parent: t.parentElement }, this.h }, s }()), uh = function () { function s() { this.p = void 0, this.m = [], this.P = -1 } var e = s.prototype; return e.init = function (t, i) { this.p = "barba"; var r = { data: {}, ns: i, scroll: { x: window.scrollX, y: window.scrollY }, url: t }; this.P = 0, this.m.push(r); var n = { from: this.p, index: this.P, states: [].concat(this.m) }; window.history && window.history.replaceState(n, "", t) }, e.change = function (t, i, r) { if (r && r.state) { var n = r.state, o = n.index; i = this.g(this.P - o), this.replace(n.states), this.P = o } else this.add(t, i); return i }, e.add = function (t, i, r, n) { var o = r != null ? r : this.R(i), a = { data: n != null ? n : {}, ns: "tmp", scroll: { x: window.scrollX, y: window.scrollY }, url: t }; switch (o) { case "push": this.P = this.size, this.m.push(a); break; case "replace": this.set(this.P, a) }var l = { from: this.p, index: this.P, states: [].concat(this.m) }; switch (o) { case "push": window.history && window.history.pushState(l, "", t); break; case "replace": window.history && window.history.replaceState(l, "", t) } }, e.store = function (t, i) { var r = i || this.P, n = this.get(r); n.data = Oe({}, n.data, t), this.set(r, n); var o = { from: this.p, index: this.P, states: [].concat(this.m) }; window.history.replaceState(o, "") }, e.update = function (t, i) { var r = i || this.P, n = Oe({}, this.get(r), t); this.set(r, n) }, e.remove = function (t) { t ? this.m.splice(t, 1) : this.m.pop(), this.P-- }, e.clear = function () { this.m = [], this.P = -1 }, e.replace = function (t) { this.m = t }, e.get = function (t) { return this.m[t] }, e.set = function (t, i) { return this.m[t] = i }, e.R = function (t) { var i = "push", r = t, n = Ae.prefix + "-" + Ae.history; return r.hasAttribute && r.hasAttribute(n) && (i = r.getAttribute(n)), i }, e.g = function (t) { return Math.abs(t) > 1 ? t > 0 ? "forward" : "back" : t === 0 ? "popstate" : t > 0 ? "back" : "forward" }, tn(s, [{ key: "current", get: function () { return this.m[this.P] } }, { key: "previous", get: function () { return this.P < 1 ? null : this.m[this.P - 1] } }, { key: "size", get: function () { return this.m.length } }]), s }(), yo = new uh, Ki = function (s, e) { try { var t = function () { if (!e.next.html) return Promise.resolve(s).then(function (i) { var r = e.next; if (i) { var n = vt.toElement(i.html); r.namespace = vt.getNamespace(n), r.container = vt.getContainer(n), r.url = i.url, r.html = i.html, yo.update({ ns: r.namespace }); var o = vt.toDocument(i.html); document.title = o.title } }) }(); return Promise.resolve(t && t.then ? t.then(function () { }) : void 0) } catch (i) { return Promise.reject(i) } }, vo = function s(e, t, i) { return e instanceof RegExp ? function (r, n) { if (!n) return r; for (var o = /\((?:\?<(.*?)>)?(?!\?)/g, a = 0, l = o.exec(r.source); l;)n.push({ name: l[1] || a++, prefix: "", suffix: "", modifier: "", pattern: "" }), l = o.exec(r.source); return r }(e, t) : Array.isArray(e) ? function (r, n, o) { var a = r.map(function (l) { return s(l, n, o).source }); return new RegExp("(?:".concat(a.join("|"), ")"), _o(o)) }(e, t, i) : function (r, n, o) { return function (a, l, c) { c === void 0 && (c = {}); for (var h = c.strict, u = h !== void 0 && h, d = c.start, p = d === void 0 || d, g = c.end, f = g === void 0 || g, m = c.encode, _ = m === void 0 ? function (I) { return I } : m, y = c.delimiter, v = y === void 0 ? "/#?" : y, b = c.endsWith, w = "[".concat(Nt(b === void 0 ? "" : b), "]|$"), S = "[".concat(Nt(v), "]"), T = p ? "^" : "", k = 0, x = a; k < x.length; k++) { var E = x[k]; if (typeof E == "string") T += Nt(_(E)); else { var O = Nt(_(E.prefix)), P = Nt(_(E.suffix)); if (E.pattern) if (l && l.push(E), O || P) if (E.modifier === "+" || E.modifier === "*") { var A = E.modifier === "*" ? "?" : ""; T += "(?:".concat(O, "((?:").concat(E.pattern, ")(?:").concat(P).concat(O, "(?:").concat(E.pattern, "))*)").concat(P, ")").concat(A) } else T += "(?:".concat(O, "(").concat(E.pattern, ")").concat(P, ")").concat(E.modifier); else T += E.modifier === "+" || E.modifier === "*" ? "((?:".concat(E.pattern, ")").concat(E.modifier, ")") : "(".concat(E.pattern, ")").concat(E.modifier); else T += "(?:".concat(O).concat(P, ")").concat(E.modifier) } } if (f) u || (T += "".concat(S, "?")), T += c.endsWith ? "(?=".concat(w, ")") : "$"; else { var C = a[a.length - 1], R = typeof C == "string" ? S.indexOf(C[C.length - 1]) > -1 : C === void 0; u || (T += "(?:".concat(S, "(?=").concat(w, "))?")), R || (T += "(?=".concat(S, "|").concat(w, ")")) } return new RegExp(T, _o(c)) }(function (a, l) { l === void 0 && (l = {}); for (var c = function (P) { for (var A = [], C = 0; C < P.length;) { var R = P[C]; if (R !== "*" && R !== "+" && R !== "?") if (R !== "\\") if (R !== "{") if (R !== "}") if (R !== ":") if (R !== "(") A.push({ type: "CHAR", index: C, value: P[C++] }); else { var I = 1, B = ""; if (P[D = C + 1] === "?") throw new TypeError('Pattern cannot start with "?" at '.concat(D)); for (; D < P.length;)if (P[D] !== "\\") { if (P[D] === ")") { if (--I == 0) { D++; break } } else if (P[D] === "(" && (I++, P[D + 1] !== "?")) throw new TypeError("Capturing groups are not allowed at ".concat(D)); B += P[D++] } else B += P[D++] + P[D++]; if (I) throw new TypeError("Unbalanced pattern at ".concat(C)); if (!B) throw new TypeError("Missing pattern at ".concat(C)); A.push({ type: "PATTERN", index: C, value: B }), C = D } else { for (var Z = "", D = C + 1; D < P.length;) { var ee = P.charCodeAt(D); if (!(ee >= 48 && ee <= 57 || ee >= 65 && ee <= 90 || ee >= 97 && ee <= 122 || ee === 95)) break; Z += P[D++] } if (!Z) throw new TypeError("Missing parameter name at ".concat(C)); A.push({ type: "NAME", index: C, value: Z }), C = D } else A.push({ type: "CLOSE", index: C, value: P[C++] }); else A.push({ type: "OPEN", index: C, value: P[C++] }); else A.push({ type: "ESCAPED_CHAR", index: C++, value: P[C++] }); else A.push({ type: "MODIFIER", index: C, value: P[C++] }) } return A.push({ type: "END", index: C, value: "" }), A }(a), h = l.prefixes, u = h === void 0 ? "./" : h, d = "[^".concat(Nt(l.delimiter || "/#?"), "]+?"), p = [], g = 0, f = 0, m = "", _ = function (P) { if (f < c.length && c[f].type === P) return c[f++].value }, y = function (P) { var A = _(P); if (A !== void 0) return A; var C = c[f], R = C.index; throw new TypeError("Unexpected ".concat(C.type, " at ").concat(R, ", expected ").concat(P)) }, v = function () { for (var P, A = ""; P = _("CHAR") || _("ESCAPED_CHAR");)A += P; return A }; f < c.length;) { var b = _("CHAR"), w = _("NAME"), S = _("PATTERN"); if (w || S) u.indexOf(k = b || "") === -1 && (m += k, k = ""), m && (p.push(m), m = ""), p.push({ name: w || g++, prefix: k, suffix: "", pattern: S || d, modifier: _("MODIFIER") || "" }); else { var T = b || _("ESCAPED_CHAR"); if (T) m += T; else if (m && (p.push(m), m = ""), _("OPEN")) { var k = v(), x = _("NAME") || "", E = _("PATTERN") || "", O = v(); y("CLOSE"), p.push({ name: x || (E ? g++ : ""), pattern: x && !E ? d : E, prefix: k, suffix: O, modifier: _("MODIFIER") || "" }) } else y("END") } } return p }(r, o), n, o) }(e, t, i) }, dh = { __proto__: null, update: Ki, nextTick: function () { return new Promise(function (s) { window.requestAnimationFrame(s) }) }, pathToRegexp: vo }, wo = function () { return window.location.origin }, gi = function (s) { return s === void 0 && (s = window.location.href), tt(s).port }, tt = function (s) { var e, t = s.match(/:\d+/); if (t === null) /^http/.test(s) && (e = 80), /^https/.test(s) && (e = 443); else { var i = t[0].substring(1); e = parseInt(i, 10) } var r, n = s.replace(wo(), ""), o = {}, a = n.indexOf("#"); a >= 0 && (r = n.slice(a + 1), n = n.slice(0, a)); var l = n.indexOf("?"); return l >= 0 && (o = bo(n.slice(l + 1)), n = n.slice(0, l)), { hash: r, path: n, port: e, query: o } }, bo = function (s) { return s.split("&").reduce(function (e, t) { var i = t.split("="); return e[i[0]] = i[1], e }, {}) }, on = function (s) { return s === void 0 && (s = window.location.href), s.replace(/(\/#.*|\/|#.*)$/, "") }, fh = { __proto__: null, getHref: function () { return window.location.href }, getAbsoluteHref: function (s, e) { return e === void 0 && (e = document.baseURI), new URL(s, e).href }, getOrigin: wo, getPort: gi, getPath: function (s) { return s === void 0 && (s = window.location.href), tt(s).path }, getQuery: function (s, e) { return e === void 0 && (e = !1), e ? JSON.stringify(tt(s).query) : tt(s).query }, getHash: function (s) { return tt(s).hash }, parse: tt, parseQuery: bo, clean: on }; function ph(s, e, t, i, r) { return e === void 0 && (e = 2e3), new Promise(function (n, o) { var a = new XMLHttpRequest; a.onreadystatechange = function () { if (a.readyState === XMLHttpRequest.DONE) { if (a.status === 200) { var l = a.responseURL !== "" && a.responseURL !== s ? a.responseURL : s; n({ html: a.responseText, url: Oe({ href: l }, tt(l)) }), i.update(s, { status: "fulfilled", target: l }) } else if (a.status) { var c = { status: a.status, statusText: a.statusText }; t(s, c), o(c), i.update(s, { status: "rejected" }) } } }, a.ontimeout = function () { var l = new Error("Timeout error [" + e + "]"); t(s, l), o(l), i.update(s, { status: "rejected" }) }, a.onerror = function () { var l = new Error("Fetch error"); t(s, l), o(l), i.update(s, { status: "rejected" }) }, a.open("GET", s), a.timeout = e, a.setRequestHeader("Accept", "text/html,application/xhtml+xml,application/xml"), a.setRequestHeader("x-barba", "yes"), r.all().forEach(function (l, c) { a.setRequestHeader(c, l) }), a.send() }) } function gh(s) { return !!s && (typeof s == "object" || typeof s == "function") && typeof s.then == "function" } function Ft(s, e) { return e === void 0 && (e = {}), function () { var t = arguments, i = !1, r = new Promise(function (n, o) { e.async = function () { return i = !0, function (l, c) { l ? o(l) : n(c) } }; var a = s.apply(e, [].slice.call(t)); i || (gh(a) ? a.then(n, o) : n(a)) }); return r } } var it = new (function (s) { function e() { var i; return (i = s.call(this) || this).logger = new yt("@barba/core"), i.all = ["ready", "page", "reset", "currentAdded", "currentRemoved", "nextAdded", "nextRemoved", "beforeOnce", "once", "afterOnce", "before", "beforeLeave", "leave", "afterLeave", "beforeEnter", "enter", "afterEnter", "after"], i.registered = new Map, i.init(), i } Ji(e, s); var t = e.prototype; return t.init = function () { var i = this; this.registered.clear(), this.all.forEach(function (r) { i[r] || (i[r] = function (n, o) { i.registered.has(r) || i.registered.set(r, new Set), i.registered.get(r).add({ ctx: o || {}, fn: n }) }) }) }, t.do = function (i) { var r = arguments, n = this; if (this.registered.has(i)) { var o = Promise.resolve(); return this.registered.get(i).forEach(function (a) { o = o.then(function () { return Ft(a.fn, a.ctx).apply(void 0, [].slice.call(r, 1)) }) }), o.catch(function (a) { n.logger.debug("Hook error [" + i + "]"), n.logger.error(a) }) } return Promise.resolve() }, t.clear = function () { var i = this; this.all.forEach(function (r) { delete i[r] }), this.init() }, t.help = function () { this.logger.info("Available hooks: " + this.all.join(",")); var i = []; this.registered.forEach(function (r, n) { return i.push(n) }), this.logger.info("Registered hooks: " + i.join(",")) }, e }(hh)), So = function () { function s(e) { if (this.k = void 0, this.O = [], typeof e == "boolean") this.k = e; else { var t = Array.isArray(e) ? e : [e]; this.O = t.map(function (i) { return vo(i) }) } } return s.prototype.checkHref = function (e) { if (typeof this.k == "boolean") return this.k; var t = tt(e).path; return this.O.some(function (i) { return i.exec(t) !== null }) }, s }(), mh = function (s) { function e(i) { var r; return (r = s.call(this, i) || this).T = new Map, r } Ji(e, s); var t = e.prototype; return t.set = function (i, r, n, o, a) { return this.T.set(i, { action: n, request: r, status: o, target: a != null ? a : i }), { action: n, request: r, status: o, target: a } }, t.get = function (i) { return this.T.get(i) }, t.getRequest = function (i) { return this.T.get(i).request }, t.getAction = function (i) { return this.T.get(i).action }, t.getStatus = function (i) { return this.T.get(i).status }, t.getTarget = function (i) { return this.T.get(i).target }, t.has = function (i) { return !this.checkHref(i) && this.T.has(i) }, t.delete = function (i) { return this.T.delete(i) }, t.update = function (i, r) { var n = Oe({}, this.T.get(i), r); return this.T.set(i, n), n }, e }(So), _h = function () { function s() { this.A = new Map } var e = s.prototype; return e.set = function (t, i) { return this.A.set(t, i), { name: i } }, e.get = function (t) { return this.A.get(t) }, e.all = function () { return this.A }, e.has = function (t) { return this.A.has(t) }, e.delete = function (t) { return this.A.delete(t) }, e.clear = function () { return this.A.clear() }, s }(), yh = function () { return !window.history.pushState }, vh = function (s) { return !s.el || !s.href }, wh = function (s) { var e = s.event; return e.which > 1 || e.metaKey || e.ctrlKey || e.shiftKey || e.altKey }, bh = function (s) { var e = s.el; return e.hasAttribute("target") && e.target === "_blank" }, Sh = function (s) { var e = s.el; return e.protocol !== void 0 && window.location.protocol !== e.protocol || e.hostname !== void 0 && window.location.hostname !== e.hostname }, xh = function (s) { var e = s.el; return e.port !== void 0 && gi() !== gi(e.href) }, Th = function (s) { var e = s.el; return e.getAttribute && typeof e.getAttribute("download") == "string" }, kh = function (s) { return s.el.hasAttribute(Ae.prefix + "-" + Ae.prevent) }, Eh = function (s) { return Boolean(s.el.closest("[" + Ae.prefix + "-" + Ae.prevent + '="all"]')) }, Ph = function (s) { var e = s.href; return on(e) === on() && gi(e) === gi() }, Ch = function (s) { function e(i) { var r; return (r = s.call(this, i) || this).suite = [], r.tests = new Map, r.init(), r } Ji(e, s); var t = e.prototype; return t.init = function () { this.add("pushState", yh), this.add("exists", vh), this.add("newTab", wh), this.add("blank", bh), this.add("corsDomain", Sh), this.add("corsPort", xh), this.add("download", Th), this.add("preventSelf", kh), this.add("preventAll", Eh), this.add("sameUrl", Ph, !1) }, t.add = function (i, r, n) { n === void 0 && (n = !0), this.tests.set(i, r), n && this.suite.push(i) }, t.run = function (i, r, n, o) { return this.tests.get(i)({ el: r, event: n, href: o }) }, t.checkLink = function (i, r, n) { var o = this; return this.suite.some(function (a) { return o.run(a, i, r, n) }) }, e }(So), an = function (s) { function e(t, i) { var r; return i === void 0 && (i = "Barba error"), (r = s.call.apply(s, [this].concat([].slice.call(arguments, 2))) || this).error = void 0, r.label = void 0, r.error = t, r.label = i, Error.captureStackTrace && Error.captureStackTrace(ch(r), e), r.name = "BarbaError", r } return Ji(e, s), e }(sn(Error)), Oh = function () { function s(t) { t === void 0 && (t = []), this.logger = new yt("@barba/core"), this.all = [], this.page = [], this.once = [], this.j = [{ name: "namespace", type: "strings" }, { name: "custom", type: "function" }], t && (this.all = this.all.concat(t)), this.update() } var e = s.prototype; return e.add = function (t, i) { t === "rule" ? this.j.splice(i.position || 0, 0, i.value) : this.all.push(i), this.update() }, e.resolve = function (t, i) { var r = this; i === void 0 && (i = {}); var n = i.once ? this.once : this.page; n = n.filter(i.self ? function (d) { return d.name && d.name === "self" } : function (d) { return !d.name || d.name !== "self" }); var o = new Map, a = n.find(function (d) { var p = !0, g = {}; return i.self && d.name === "self" ? (o.set(d, g), !0) : (r.j.reverse().forEach(function (f) { p && (p = r.M(d, f, t, g), d.from && d.to && (p = r.M(d, f, t, g, "from") && r.M(d, f, t, g, "to")), d.from && !d.to && (p = r.M(d, f, t, g, "from")), !d.from && d.to && (p = r.M(d, f, t, g, "to"))) }), o.set(d, g), p) }), l = o.get(a), c = []; if (c.push(i.once ? "once" : "page"), i.self && c.push("self"), l) { var h, u = [a]; Object.keys(l).length > 0 && u.push(l), (h = this.logger).info.apply(h, ["Transition found [" + c.join(",") + "]"].concat(u)) } else this.logger.info("No transition found [" + c.join(",") + "]"); return a }, e.update = function () { var t = this; this.all = this.all.map(function (i) { return t.N(i) }).sort(function (i, r) { return i.priority - r.priority }).reverse().map(function (i) { return delete i.priority, i }), this.page = this.all.filter(function (i) { return i.leave !== void 0 || i.enter !== void 0 }), this.once = this.all.filter(function (i) { return i.once !== void 0 }) }, e.M = function (t, i, r, n, o) { var a = !0, l = !1, c = t, h = i.name, u = h, d = h, p = h, g = o ? c[o] : c, f = o === "to" ? r.next : r.current; if (o ? g && g[h] : g[h]) { switch (i.type) { case "strings": default: var m = Array.isArray(g[u]) ? g[u] : [g[u]]; f[u] && m.indexOf(f[u]) !== -1 && (l = !0), m.indexOf(f[u]) === -1 && (a = !1); break; case "object": var _ = Array.isArray(g[d]) ? g[d] : [g[d]]; f[d] ? (f[d].name && _.indexOf(f[d].name) !== -1 && (l = !0), _.indexOf(f[d].name) === -1 && (a = !1)) : a = !1; break; case "function": g[p](r) ? l = !0 : a = !1 }l && (o ? (n[o] = n[o] || {}, n[o][h] = c[o][h]) : n[h] = c[h]) } return a }, e.S = function (t, i, r) { var n = 0; return (t[i] || t.from && t.from[i] || t.to && t.to[i]) && (n += Math.pow(10, r), t.from && t.from[i] && (n += 1), t.to && t.to[i] && (n += 2)), n }, e.N = function (t) { var i = this; t.priority = 0; var r = 0; return this.j.forEach(function (n, o) { r += i.S(t, n.name, o + 1) }), t.priority = r, t }, s }(); function mi(s, e) { try { var t = s() } catch (i) { return e(i) } return t && t.then ? t.then(void 0, e) : t } var Ah = function () { function s(t) { t === void 0 && (t = []), this.logger = new yt("@barba/core"), this.store = void 0, this.C = !1, this.store = new Oh(t) } var e = s.prototype; return e.get = function (t, i) { return this.store.resolve(t, i) }, e.doOnce = function (t) { var i = t.data, r = t.transition; try { var n = function () { o.C = !1 }, o = this, a = r || {}; o.C = !0; var l = mi(function () { return Promise.resolve(o.L("beforeOnce", i, a)).then(function () { return Promise.resolve(o.once(i, a)).then(function () { return Promise.resolve(o.L("afterOnce", i, a)).then(function () { }) }) }) }, function (c) { o.C = !1, o.logger.debug("Transition error [before/after/once]"), o.logger.error(c) }); return Promise.resolve(l && l.then ? l.then(n) : n()) } catch (c) { return Promise.reject(c) } }, e.doPage = function (t) { var i = t.data, r = t.transition, n = t.page, o = t.wrapper; try { var a = function (d) { l.C = !1 }, l = this, c = r || {}, h = c.sync === !0 || !1; l.C = !0; var u = mi(function () { function d() { return Promise.resolve(l.L("before", i, c)).then(function () { function g(m) { return Promise.resolve(l.remove(i)).then(function () { return Promise.resolve(l.L("after", i, c)).then(function () { }) }) } var f = function () { if (h) return mi(function () { return Promise.resolve(l.add(i, o)).then(function () { return Promise.resolve(l.L("beforeLeave", i, c)).then(function () { return Promise.resolve(l.L("beforeEnter", i, c)).then(function () { return Promise.resolve(Promise.all([l.leave(i, c), l.enter(i, c)])).then(function () { return Promise.resolve(l.L("afterLeave", i, c)).then(function () { return Promise.resolve(l.L("afterEnter", i, c)).then(function () { }) }) }) }) }) }) }, function (v) { if (l.H(v)) throw new an(v, "Transition error [sync]") }); var m = function (v) { return mi(function () { var b = function () { if (_ !== !1) return Promise.resolve(l.add(i, o)).then(function () { return Promise.resolve(l.L("beforeEnter", i, c)).then(function () { return Promise.resolve(l.enter(i, c, _)).then(function () { return Promise.resolve(l.L("afterEnter", i, c)).then(function () { }) }) }) }) }(); if (b && b.then) return b.then(function () { }) }, function (b) { if (l.H(b)) throw new an(b, "Transition error [before/after/enter]") }) }, _ = !1, y = mi(function () { return Promise.resolve(l.L("beforeLeave", i, c)).then(function () { return Promise.resolve(Promise.all([l.leave(i, c), Ki(n, i)]).then(function (v) { return v[0] })).then(function (v) { return _ = v, Promise.resolve(l.L("afterLeave", i, c)).then(function () { }) }) }) }, function (v) { if (l.H(v)) throw new an(v, "Transition error [before/after/leave]") }); return y && y.then ? y.then(m) : m() }(); return f && f.then ? f.then(g) : g() }) } var p = function () { if (h) return Promise.resolve(Ki(n, i)).then(function () { }) }(); return p && p.then ? p.then(d) : d() }, function (d) { throw l.C = !1, d.name && d.name === "BarbaError" ? (l.logger.debug(d.label), l.logger.error(d.error), d) : (l.logger.debug("Transition error [page]"), l.logger.error(d), d) }); return Promise.resolve(u && u.then ? u.then(a) : a()) } catch (d) { return Promise.reject(d) } }, e.once = function (t, i) { try { return Promise.resolve(it.do("once", t, i)).then(function () { return i.once ? Ft(i.once, i)(t) : Promise.resolve() }) } catch (r) { return Promise.reject(r) } }, e.leave = function (t, i) { try { return Promise.resolve(it.do("leave", t, i)).then(function () { return i.leave ? Ft(i.leave, i)(t) : Promise.resolve() }) } catch (r) { return Promise.reject(r) } }, e.enter = function (t, i, r) { try { return Promise.resolve(it.do("enter", t, i)).then(function () { return i.enter ? Ft(i.enter, i)(t, r) : Promise.resolve() }) } catch (n) { return Promise.reject(n) } }, e.add = function (t, i) { try { return vt.addContainer(t.next.container, i), it.do("nextAdded", t), Promise.resolve() } catch (r) { return Promise.reject(r) } }, e.remove = function (t) { try { return vt.removeContainer(t.current.container), it.do("currentRemoved", t), Promise.resolve() } catch (i) { return Promise.reject(i) } }, e.H = function (t) { return t.message ? !/Timeout error|Fetch error/.test(t.message) : !t.status }, e.L = function (t, i, r) { try { return Promise.resolve(it.do(t, i, r)).then(function () { return r[t] ? Ft(r[t], r)(i) : Promise.resolve() }) } catch (n) { return Promise.reject(n) } }, tn(s, [{ key: "isRunning", get: function () { return this.C }, set: function (t) { this.C = t } }, { key: "hasOnce", get: function () { return this.store.once.length > 0 } }, { key: "hasSelf", get: function () { return this.store.all.some(function (t) { return t.name === "self" }) } }, { key: "shouldWait", get: function () { return this.store.all.some(function (t) { return t.to && !t.to.route || t.sync }) } }]), s }(), Rh = function () { function s(e) { var t = this; this.names = ["beforeLeave", "afterLeave", "beforeEnter", "afterEnter"], this.byNamespace = new Map, e.length !== 0 && (e.forEach(function (i) { t.byNamespace.set(i.namespace, i) }), this.names.forEach(function (i) { it[i](t._(i)) })) } return s.prototype._ = function (e) { var t = this; return function (i) { var r = e.match(/enter/i) ? i.next : i.current, n = t.byNamespace.get(r.namespace); return n && n[e] ? Ft(n[e], n)(i) : Promise.resolve() } }, s }(); Element.prototype.matches || (Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector), Element.prototype.closest || (Element.prototype.closest = function (s) { var e = this; do { if (e.matches(s)) return e; e = e.parentElement || e.parentNode } while (e !== null && e.nodeType === 1); return null }); var Lh = { container: null, html: "", namespace: "", url: { hash: "", href: "", path: "", port: null, query: {} } }, wt = new (function () { function s() { this.version = "2.10.3", this.schemaPage = Lh, this.Logger = yt, this.logger = new yt("@barba/core"), this.plugins = [], this.timeout = void 0, this.cacheIgnore = void 0, this.cacheFirstPage = void 0, this.prefetchIgnore = void 0, this.preventRunning = void 0, this.hooks = it, this.cache = void 0, this.headers = void 0, this.prevent = void 0, this.transitions = void 0, this.views = void 0, this.dom = vt, this.helpers = dh, this.history = yo, this.request = ph, this.url = fh, this.D = void 0, this.B = void 0, this.q = void 0, this.F = void 0 } var e = s.prototype; return e.use = function (t, i) { var r = this.plugins; r.indexOf(t) > -1 ? this.logger.warn("Plugin [" + t.name + "] already installed.") : typeof t.install == "function" ? (t.install(this, i), r.push(t)) : this.logger.warn("Plugin [" + t.name + '] has no "install" method.') }, e.init = function (t) { var i = t === void 0 ? {} : t, r = i.transitions, n = r === void 0 ? [] : r, o = i.views, a = o === void 0 ? [] : o, l = i.schema, c = l === void 0 ? Ae : l, h = i.requestError, u = i.timeout, d = u === void 0 ? 2e3 : u, p = i.cacheIgnore, g = p !== void 0 && p, f = i.cacheFirstPage, m = f !== void 0 && f, _ = i.prefetchIgnore, y = _ !== void 0 && _, v = i.preventRunning, b = v !== void 0 && v, w = i.prevent, S = w === void 0 ? null : w, T = i.debug, k = i.logLevel; if (yt.setLevel((T !== void 0 && T) === !0 ? "debug" : k === void 0 ? "off" : k), this.logger.info(this.version), Object.keys(c).forEach(function (O) { Ae[O] && (Ae[O] = c[O]) }), this.B = h, this.timeout = d, this.cacheIgnore = g, this.cacheFirstPage = m, this.prefetchIgnore = y, this.preventRunning = b, this.q = this.dom.getWrapper(), !this.q) throw new Error("[@barba/core] No Barba wrapper found"); this.I(); var x = this.data.current; if (!x.container) throw new Error("[@barba/core] No Barba container found"); if (this.cache = new mh(g), this.headers = new _h, this.prevent = new Ch(y), this.transitions = new Ah(n), this.views = new Rh(a), S !== null) { if (typeof S != "function") throw new Error("[@barba/core] Prevent should be a function"); this.prevent.add("preventCustom", S) } this.history.init(x.url.href, x.namespace), m && this.cache.set(x.url.href, Promise.resolve({ html: x.html, url: x.url }), "init", "fulfilled"), this.U = this.U.bind(this), this.$ = this.$.bind(this), this.X = this.X.bind(this), this.G(), this.plugins.forEach(function (O) { return O.init() }); var E = this.data; E.trigger = "barba", E.next = E.current, E.current = Oe({}, this.schemaPage), this.hooks.do("ready", E), this.once(E), this.I() }, e.destroy = function () { this.I(), this.J(), this.history.clear(), this.hooks.clear(), this.plugins = [] }, e.force = function (t) { window.location.assign(t) }, e.go = function (t, i, r) { var n; if (i === void 0 && (i = "barba"), this.F = null, this.transitions.isRunning) this.force(t); else if (!(n = i === "popstate" ? this.history.current && this.url.getPath(this.history.current.url) === this.url.getPath(t) && this.url.getQuery(this.history.current.url, !0) === this.url.getQuery(t, !0) : this.prevent.run("sameUrl", null, null, t)) || this.transitions.hasSelf) return i = this.history.change(this.cache.has(t) ? this.cache.get(t).target : t, i, r), r && (r.stopPropagation(), r.preventDefault()), this.page(t, i, r != null ? r : void 0, n) }, e.once = function (t) { try { var i = this; return Promise.resolve(i.hooks.do("beforeEnter", t)).then(function () { function r() { return Promise.resolve(i.hooks.do("afterEnter", t)).then(function () { }) } var n = function () { if (i.transitions.hasOnce) { var o = i.transitions.get(t, { once: !0 }); return Promise.resolve(i.transitions.doOnce({ transition: o, data: t })).then(function () { }) } }(); return n && n.then ? n.then(r) : r() }) } catch (r) { return Promise.reject(r) } }, e.page = function (t, i, r, n) { try { var o, a = function () { var u = l.data; return Promise.resolve(l.hooks.do("page", u)).then(function () { var d = function (p, g) { try { var f = (m = l.transitions.get(u, { once: !1, self: n }), Promise.resolve(l.transitions.doPage({ data: u, page: o, transition: m, wrapper: l.q })).then(function () { l.I() })) } catch { return g() } var m; return f && f.then ? f.then(void 0, g) : f }(0, function () { yt.getLevel() === 0 && l.force(u.next.url.href) }); if (d && d.then) return d.then(function () { }) }) }, l = this; if (l.data.next.url = Oe({ href: t }, l.url.parse(t)), l.data.trigger = i, l.data.event = r, l.cache.has(t)) o = l.cache.update(t, { action: "click" }).request; else { var c = l.request(t, l.timeout, l.onRequestError.bind(l, i), l.cache, l.headers); c.then(function (u) { u.url.href !== t && l.history.add(u.url.href, i, "replace") }), o = l.cache.set(t, c, "click", "pending").request } var h = function () { if (l.transitions.shouldWait) return Promise.resolve(Ki(o, l.data)).then(function () { }) }(); return Promise.resolve(h && h.then ? h.then(a) : a()) } catch (u) { return Promise.reject(u) } }, e.onRequestError = function (t) { this.transitions.isRunning = !1; var i = [].slice.call(arguments, 1), r = i[0], n = i[1], o = this.cache.getAction(r); return this.cache.delete(r), this.B && this.B(t, o, r, n) === !1 || o === "click" && this.force(r), !1 }, e.prefetch = function (t) { var i = this; t = this.url.getAbsoluteHref(t), this.cache.has(t) || this.cache.set(t, this.request(t, this.timeout, this.onRequestError.bind(this, "barba"), this.cache, this.headers).catch(function (r) { i.logger.error(r) }), "prefetch", "pending") }, e.G = function () { this.prefetchIgnore !== !0 && (document.addEventListener("mouseover", this.U), document.addEventListener("touchstart", this.U)), document.addEventListener("click", this.$), window.addEventListener("popstate", this.X) }, e.J = function () { this.prefetchIgnore !== !0 && (document.removeEventListener("mouseover", this.U), document.removeEventListener("touchstart", this.U)), document.removeEventListener("click", this.$), window.removeEventListener("popstate", this.X) }, e.U = function (t) { var i = this, r = this.W(t); if (r) { var n = this.url.getAbsoluteHref(this.dom.getHref(r)); this.prevent.checkHref(n) || this.cache.has(n) || this.cache.set(n, this.request(n, this.timeout, this.onRequestError.bind(this, r), this.cache, this.headers).catch(function (o) { i.logger.error(o) }), "enter", "pending") } }, e.$ = function (t) { var i = this.W(t); if (i) { if (this.transitions.isRunning && this.preventRunning) return t.preventDefault(), void t.stopPropagation(); this.F = t, this.go(this.dom.getHref(i), i, t) } }, e.X = function (t) { this.go(this.url.getHref(), "popstate", t) }, e.W = function (t) { for (var i = t.target; i && !this.dom.getHref(i);)i = i.parentNode; if (i && !this.prevent.checkLink(i, t, this.dom.getHref(i))) return i }, e.I = function () { var t = this.url.getHref(), i = { container: this.dom.getContainer(), html: this.dom.getHtml(), namespace: this.dom.getNamespace(), url: Oe({ href: t }, this.url.parse(t)) }; this.D = { current: i, event: void 0, next: Oe({}, this.schemaPage), trigger: void 0 }, this.hooks.do("reset", this.data) }, tn(s, [{ key: "data", get: function () { return this.D } }, { key: "wrapper", get: function () { return this.q } }]), s }()); function Xi(s) { const e = s.querySelector(".is-manifesto-text"), t = s.querySelector(".chevrons"); e && M.to(e, { opacity: 0, duration: .4, ease: "power2.inOut" }), t && M.to(t, { opacity: 0, duration: .4, ease: "power2.inOut" }) } function Yi(s) { const e = s.querySelector(".is-manifesto-text"), t = s.querySelector(".chevrons"), i = M.timeline(); e && i.set(e, { opacity: 0 }).to(e, { opacity: 1, duration: .2, ease: "none" }).to(e, { opacity: 0, duration: .2, ease: "none" }).to(e, { opacity: 1, duration: .2, ease: "none" }), t && i.set(t, { opacity: 0 }, 0).to(t, { opacity: 1, duration: .2, ease: "none" }, 0).to(t, { opacity: 0, duration: .2, ease: "none" }, ">").to(t, { opacity: 1, duration: .2, ease: "none" }, ">") } function Ih() { const s = document.querySelector(".viewport_right"), e = document.querySelector(".viewport_left"), t = document.querySelectorAll(".toggle_button:not(.is-active)"), i = document.querySelector(".toggle_button.is-active"), r = document.querySelectorAll(".toggle_arrow"), n = document.querySelector(".is--label"); if (window.innerWidth < 992) return e.style.display = "none", Promise.resolve(); const o = M.timeline(); return n && M.set(n, { display: "none" }), o.to(t, { flex: "0 1 0%", opacity: 0, duration: .6, ease: "power2.inOut" }).to(r, { opacity: 0, duration: .3, onComplete: () => { t.forEach(a => a.style.display = "none"), r.forEach(a => a.style.display = "none") } }, "<").to(i, { flex: "1 1 100%", duration: .8, ease: "power2.inOut" }, "<"), o.to(s, { width: "100vw", duration: 1, ease: "serpeasing", onComplete: function () { e.style.display = "none", i && (i.style.display = "none", i.classList.remove("is-active")) } }, 0), o } function bt(s, e, t = 500) { const i = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789%.-"; let r = 0; const n = Math.max(e.length, s.textContent.length), o = setInterval(() => { const a = e.split("").map((l, c) => c < r ? e[c] : i[Math.floor(Math.random() * i.length)]).join(""); s.textContent = a, r++, r >= n && (clearInterval(o), s.textContent = e) }, t / n) } function $h() { "scrollRestoration" in history && (history.scrollRestoration = "manual"), wt.hooks.before(t => { t.next.namespace !== "home" && (document.body.classList.add("barba-transition"), document.body.style.animation = "hide-scrollbars 1.5s forwards", document.documentElement.style.overflow = "hidden", document.body.style.overflow = "hidden") }), wt.hooks.after(() => { window.scrollTo(0, 0), typeof _t == "function" && M.delayedCall(.1, _t), typeof St == "function" && M.delayedCall(.1, St); const t = window.innerWidth < 992, i = document.querySelector(".viewport_right"), r = document.querySelector(".viewport_right-inner"), n = document.querySelector(".content-wrapper"), o = document.querySelector(".view-container"), a = document.querySelector(".game_inner"), l = document.querySelector("#game-view.is-visible"); t && i && !l && (M.set(i, { height: "auto", minHeight: "auto", display: "block", overflow: "visible" }), r && M.set(r, { height: "auto", minHeight: "auto", display: "block", overflow: "visible" }), n && M.set(n, { height: "auto", minHeight: "auto", display: "block", overflow: "visible" }), o && M.set(o, { height: "auto", minHeight: "auto", display: "block", overflow: "visible" }), a && M.set(a, { height: "auto", minHeight: "auto", display: "block", overflow: "visible" })), M.delayedCall(.3, () => { document.body.classList.remove("barba-transition"), document.body.style.animation = "", document.documentElement.style.overflow = "", document.body.style.overflow = "" }) }); const s = { name: "default-transition", leave: ({ current: t }) => new Promise(i => { Xi(t.container), M.delayedCall(.4, i) }), enter({ next: t, current: i }) { Yi(t.container); const r = i == null ? void 0 : i.container.querySelector(".toggle_button.is-active"), n = t.container.querySelector(".is--label"); if (r && n) { const h = r.getBoundingClientRect(); M.set(n, { position: "absolute", top: h.top, left: h.left, width: h.width, height: h.height, display: "flex" }), M.to(n, { position: "static", clearProps: "all", duration: .3, ease: "power2.inOut", onComplete: () => { n && n.textContent && bt(n, n.textContent, 300) } }), Xi(n), Yi(n) } else n && n.textContent && M.delayedCall(.3, () => { bt(n, n.textContent, 300) }); const o = t.container.querySelector("#manifesto > .label"), a = i == null ? void 0 : i.container.querySelector("#manifesto > .label"), l = t.container.querySelector(".is--scramble"), c = i == null ? void 0 : i.container.querySelector(".is--scramble"); return o && a && bt(o, o.textContent), l && c && bt(l, l.textContent), Promise.resolve() }, after() { ln() } }, e = { name: "leave-home-transition", from: { namespace: "home" }, leave: t => new Promise(i => { Xi(t.current.container), M.delayedCall(.4, () => { Ih().then(i) }) }), enter({ next: t, current: i }) { Yi(t.container); const r = t.container.querySelector(".is--label"); r && r.textContent && (Xi(r), Yi(r), M.delayedCall(.3, () => { bt(r, r.textContent, 300) })); const n = t.container.querySelector("#manifesto > .label"), o = i == null ? void 0 : i.container.querySelector("#manifesto > .label"); return n && o && bt(n, n.textContent), Promise.resolve() }, after() { ln() } }; wt.init({ prevent: ({ el: t }) => { const i = t.href.replace(window.location.origin, ""); return i === "/" || i === "/index.html" || i.startsWith("/?") || i.startsWith("/index.html?") }, debug: !1, preventRunning: !0, prefetch: !0, transitions: [e, s] }), wt.hooks.enter(t => { t.next.namespace !== "home" && M.delayedCall(1, () => { t.next.container.style.opacity === "0" && M.to(t.next.container, { opacity: 1, duration: .3 }) }) }), window.addEventListener("error", t => { if (t.error && t.error.message && t.error.message.includes("barba")) { document.body.classList.remove("barba-transition"), document.body.style.animation = "", document.documentElement.style.overflow = "", document.body.style.overflow = ""; const i = document.querySelector('[data-barba="container"]'); i && (i.style.opacity = "1") } }), window.addEventListener("popstate", () => { const t = window.location.pathname; if (t === "/" || t === "/index.html") { window.location.reload(); return } wt.history && wt.history.current && (wt.history.current.trigger = "back") }) } M.registerPlugin(dt), dt.create("serpeasing", "M0,0 C0.37,0.01 0.01,0.99 1,1"); function jh() {
    if (window.asciiArtTimestamp && Date.now() - window.asciiArtTimestamp < 100) return; console.log("%c" + `
  \u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2557 corp
 \u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557
 \u255A\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D
  \u255A\u2550\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u255D  \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u255D 
 \u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2551     
 \u255A\u2550\u2550\u2550\u2550\u2550\u255D \u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u255D  \u255A\u2550\u255D\u255A\u2550\u255D     `, "color: #ff4139; font-weight: bold;"), console.log("%cSERP Corp", "color: #ff4139; font-size: 16px; font-weight: bold;"), window.asciiArtTimestamp = Date.now()
  } const Mh = { ".is-rate": { type: "number", min: 40, max: 50, suffix: "%" }, ".is-souls": { type: "number", min: 91, max: 97, range: !0, decimalPlaces: 3, suffix: "" }, ".is-entropy": { type: "number", range: !0, min: -.017, max: .115, suffix: "\u0394", decimalPlaces: 3 }, ".is-trust": { type: "text", options: ["\u2588\u2588\u2588%", "\u2588\u2588\u2588%", "\u2588\u2588%", "--"] }, ".is-initiation": { type: "number", min: 5, max: 12, suffix: "await." }, ".is-neural": { type: "text", options: ["High", "Med.", "Null", "Max.", "Lost", "--", "\u221E"] }, ".is-origin": { type: "text", options: ["@serp", "@v0id", "--", "@\u03A9421", "@\u03A9314"] }, ".is-pulse": { type: "number", min: 10.8, max: 17.7, suffix: "HZ" }, ".is-memory": { type: "number", min: 18, max: 71, suffix: "% Mem" }, ".is-cpu": { type: "number", min: 21, max: 82, suffix: "% CPU" } }; function Dh(s) { if (s.type === "number") { if (s.range) { const t = Math.random() * (s.max - s.min) + s.min, i = t.toFixed(s.decimalPlaces || 3); return `${t >= 0 ? `+${i}` : i}${s.suffix || ""}` } return `${Math.floor(Math.random() * (s.max - s.min + 1)) + s.min}${s.suffix || ""}` } else if (s.type === "text") return s.options[Math.floor(Math.random() * s.options.length)]; return "" } function qh() { Object.entries(Mh).forEach(([s, e]) => { document.querySelectorAll(s).forEach(i => { const r = Dh(e); bt(i, r) }) }) } function Uh() { jh(), setInterval(qh, 4e3), Ja() } function ln() { var r; oh(), ho(), co(), Ga(); const s = document.querySelector(".dropdown"), e = document.querySelector(".dropdown-inner"); if (s) { const n = s.cloneNode(!0); s.parentNode.replaceChild(n, s), n.addEventListener("click", () => { if (e) { const o = window.getComputedStyle(e).display !== "none"; e.style.display = o ? "none" : "flex" } }) } Bh("[data-scramble]", { target: ".label" }), Nh(), zh(); const t = document.getElementById("game"), i = document.getElementById("manifesto"); t && i && (((r = document.querySelector('[data-barba="container"]')) == null ? void 0 : r.dataset.barbaNamespace) === "home" && (t.classList.add("is-active"), i.classList.remove("is-active")), t.addEventListener("click", () => { var o; t.classList.contains("is-active") || (t.classList.add("is-active"), i.classList.remove("is-active"), ((o = document.querySelector('[data-barba="container"]')) == null ? void 0 : o.dataset.barbaNamespace) === "home" && requestAnimationFrame(() => { Lr() })) }), i.addEventListener("click", () => { i.classList.contains("is-active") || (i.classList.add("is-active"), t.classList.remove("is-active")) })) } function zh() {
    const s = document.getElementById("manifesto"), e = document.getElementById("game"), t = document.getElementById("manifesto-view"), i = document.getElementById("game-view"), r = document.getElementById("left-arrow"), n = document.getElementById("right-arrow"), o = document.querySelector(".viewport_right"), a = document.querySelector(".viewport_right-inner"), l = document.querySelector(".content-wrapper"), c = document.querySelector(".view-container"), h = document.querySelector(".game_inner"), u = document.querySelector(".game-controls"); if (!s || !e || !t || !i || !r || !n || !o || !a || !l || !c || !h || !u) return; function d(g) {
      var y; const m = ((y = document.querySelector('[data-barba="container"]')) == null ? void 0 : y.dataset.barbaNamespace) === "home", _ = window.innerWidth < 992; t.classList.toggle("is-visible", g), i.classList.toggle("is-visible", !g), s.classList.toggle("is-active", g), e.classList.toggle("is-active", !g), r.classList.toggle("is-active", g), n.classList.toggle("is-active", !g), r.style.opacity = g ? "1" : "0.5", n.style.opacity = g ? "0.5" : "1", St(), g ? (_ ? (o.style.cssText = `
          height: auto;
          min-height: auto;
          display: block;
          overflow: visible;
        `, a.style.cssText = `
          height: auto;
          min-height: auto;
          display: block;
          overflow: visible;
        `, l.style.cssText = `
          height: auto;
          min-height: auto;
          display: block;
          overflow: visible;
        `, c.style.cssText = `
          height: auto;
          min-height: auto;
          display: block;
          overflow: visible;
        `, h.style.cssText = `
          height: auto;
          min-height: auto;
          display: block;
          overflow: visible;
        `) : (o.style.cssText = "", a.style.cssText = "", l.style.cssText = "", c.style.cssText = "", h.style.cssText = ""), setTimeout(() => { Te() }, 0)) : (o.style.cssText = `
        height: 100vh;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      `, a.style.cssText = `
        height: 100%;
        min-height: 0;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      `, l.style.cssText = `
        height: 100%;
        min-height: 0;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      `, c.style.cssText = `
        flex: 1;
        min-height: 0;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      `, h.style.cssText = `
        flex: 1;
        min-height: 0;
        display: flex;
        position: relative;
        overflow: hidden;
      `, m && (h._cleanup && h._cleanup(), Lr()))
    } s.addEventListener("click", () => { d(!0) }), e.addEventListener("click", () => { d(!1) }); function p(g, f) { g.addEventListener("mouseenter", () => { g.classList.contains("is-active") || (f.style.opacity = "1", f.classList.remove("animate"), f.offsetWidth, f.classList.add("animate")) }), g.addEventListener("mouseleave", () => { g.classList.contains("is-active") || (f.style.opacity = "0.5") }), f.addEventListener("animationend", () => { f.classList.remove("animate") }) } p(s, r), p(e, n), i.classList.contains("is-visible") ? (o.style.cssText = `
      height: 100vh;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, a.style.cssText = `
      height: 100%;
      min-height: 0;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, l.style.cssText = `
      height: 100%;
      min-height: 0;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, c.style.cssText = `
      flex: 1;
      min-height: 0;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, h.style.cssText = `
      flex: 1;
      min-height: 0;
      display: flex;
      position: relative;
      overflow: hidden;
    `) : setTimeout(() => { Te() }, 0)
  } function Bh(s, e = {}) { const { speed: t = 150, target: i = null } = e, r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_-+=<>?/[]{}"; document.querySelectorAll(s).forEach(n => { const o = i ? n.querySelector(i) : n; if (!o) return; const a = o.textContent; n.addEventListener("mouseenter", () => { let l = "", c = 0; const h = setInterval(() => { l = ""; for (let u = 0; u < a.length; u++)u < c ? l += a[u] : l += r.charAt(Math.floor(Math.random() * r.length)); o.textContent = l, c < a.length ? c++ : (clearInterval(h), o.textContent = a) }, t) }) }) } function Nh() { const s = document.querySelector(".home"), e = document.querySelector(".nav-wrapper"), t = document.querySelector(".header"); if (!s || !e || !t) return; const i = window.matchMedia("(max-width: 991px)"); function r(n) { n.matches ? s.parentElement !== e && e.insertBefore(s, e.firstChild) : s.parentElement !== t && t.insertBefore(s, e) } r(i), i.addEventListener("change", r) } document.addEventListener("DOMContentLoaded", () => { var l; Uh(), $h(), ln(), St(); const s = window.innerWidth < 992, e = document.querySelector(".viewport_right"), t = document.querySelector(".viewport_right-inner"), i = document.querySelector(".content-wrapper"), r = document.querySelector(".view-container"), n = document.querySelector(".game_inner"), o = document.querySelector("#game-view.is-visible"); if (s && e && !o && (e.style.height = "auto", e.style.minHeight = "auto", e.style.display = "block", e.style.overflow = "visible", t && (t.style.height = "auto", t.style.minHeight = "auto", t.style.display = "block", t.style.overflow = "visible"), i && (i.style.height = "auto", i.style.minHeight = "auto", i.style.display = "block", i.style.overflow = "visible"), r && (r.style.height = "auto", r.style.minHeight = "auto", r.style.display = "block", r.style.overflow = "visible"), n && (n.style.height = "auto", n.style.minHeight = "auto", n.style.display = "block", n.style.overflow = "visible")), ((l = document.querySelector('[data-barba="container"]')) == null ? void 0 : l.dataset.barbaNamespace) === "home") { const c = document.getElementById("game"), h = document.getElementById("manifesto"); c && h && (c.classList.add("is-active"), h.classList.remove("is-active")), Lr() } }), window.addEventListener("resize", () => {
    var c; const s = (c = document.querySelector('[data-barba="container"]')) == null ? void 0 : c.dataset.barbaNamespace, e = window.innerWidth < 992, t = document.querySelector(".viewport_right"), i = document.querySelector(".viewport_right-inner"), r = document.querySelector(".content-wrapper"), n = document.querySelector(".view-container"), o = document.querySelector(".game_inner"), a = document.querySelector("#game-view.is-visible"), l = document.querySelector("#manifesto-view.is-visible"); St(), t && (s === "home" && (e ? t.style.removeProperty("width") : (t.style.width = window.innerWidth >= 1440 ? "60vw" : "70vw", a ? (t.style.cssText = `
            width: ${window.innerWidth >= 1440 ? "60vw" : "70vw"};
            height: 100vh;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
          `, i && (i.style.cssText = `
              height: 100%;
              min-height: 0;
              display: flex;
              flex-direction: column;
              overflow: hidden;
            `), r && (r.style.cssText = `
              height: 100%;
              min-height: 0;
              display: flex;
              flex-direction: column;
              overflow: hidden;
            `), n && (n.style.cssText = `
              flex: 1;
              min-height: 0;
              display: flex;
              flex-direction: column;
              overflow: hidden;
            `), o && (o.style.cssText = `
              flex: 1;
              min-height: 0;
              display: flex;
              position: relative;
              overflow: hidden;
            `)) : l && (t.style.width = window.innerWidth >= 1440 ? "60vw" : "70vw", t.style.height = "", t.style.minHeight = "", t.style.display = "", t.style.overflow = "", i && (i.style = ""), r && (r.style = ""), n && (n.style = ""), o && (o.style = "")))), e && !a && (t.style.height = "auto", t.style.minHeight = "auto", t.style.display = "block", t.style.overflow = "visible", i && (i.style.height = "auto", i.style.minHeight = "auto", i.style.display = "block", i.style.overflow = "visible"), r && (r.style.height = "auto", r.style.minHeight = "auto", r.style.display = "block", r.style.overflow = "visible"), n && (n.style.height = "auto", n.style.minHeight = "auto", n.style.display = "block", n.style.overflow = "visible"), o && (o.style.height = "auto", o.style.minHeight = "auto", o.style.display = "block", o.style.overflow = "visible"))), typeof _t == "function" && _t()
  }); function St() { const s = window.innerWidth < 992, e = document.querySelector("#game-view.is-visible"), t = document.querySelector(".game-controls"), i = document.getElementById("restart"); if (!(!t || !i)) { if (!e) { t.style.display = "none", i.style.display = "none"; return } s ? (t.style.display = "flex", i.style.display = "none") : (t.style.display = "none", i.style.display = "flex") } } window.addEventListener("error", function (s) { if (s.message && s.message.includes("ControlLooksLikePasswordCredentialField")) return s.stopImmediatePropagation(), s.preventDefault(), !1 }); var xo = function () { throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object") }, Fh = Object.freeze(yi({ __proto__: null, [Symbol.toStringTag]: "Module", default: xo }, [xo]))
});
